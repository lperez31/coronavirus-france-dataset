if (undefined === window.Kameleoon){Kameleoon={processOmniture:function(e){Kameleoon.API.Tracking.processOmniture(e)},API:{processOmniture:function(){}},Classes:{}};Kameleoon.Classes.API=function(){var o=Kameleoon.Analyst;var p=Kameleoon.Internals.configuration;var g=Kameleoon.Internals.runtime;var s=Kameleoon.Utils;var e=function(){this.Core={enableLegalConsent:o.allowSaveLocalData.bind(o),enableSinglePageSupport:s.enableSinglePageSupport.bind(s),getConfiguration:function(){var e=s.clone(p);return{siteCode:e.siteCode,singlePageSupport:e.singlePageSupport,goals:e.goals.map(function(e){return new c(e)}),generationTime:e.scriptProduceTime}},load:o.load.bind(o),processRedirect:s.processRedirect.bind(s),runWhenConditionTrue:function(e,t,i){if(e())s.runProtectedFunction(t);else if(!g.pageLoaded)var n=s.setTimeout(function(){s.clearTimeout(n);Kameleoon.API.Core.runWhenConditionTrue.apply(Kameleoon,[e,t,i])},i?i:200)},runWhenElementPresent:function(e,t,i){var n=!0;if("undefined"!==typeof i)n=!1;var r=s.querySelectorAll(e);if(!g.querySelectorAllHasError)if(0<r.length)s.runProtectedFunction(function(){t(r)});else if(!g.pageLoaded)if(g.cantUseMutationObserver||!n)var o=s.setTimeout(function(){s.clearTimeout(o);Kameleoon.API.Core.runWhenElementPresent.apply(Kameleoon,[e,t,n,i])},i?i:250);else{var a={};a.selector=e;a.callback=t;a.useAntiFlicker=n;g.waitingElementPresentObjects.push(a)}}};this.Goals={cancelConversion:function(e,t){this.processConversions(e,t,!0)},processConversion:function(e,t){this.processConversions(e,t,!1)},processConversions:function(e,n,r){p.goals.forEach(function(t){if(e==t.id||e==t.name){var i=[];i.push({goal:t,revenue:n,negative:r});if(!t.linkedExperimentId)p.goals.forEach(function(e){if(null!=e.linkedExperimentId&&e.masterGoalId==t.id)i.push({goal:e,revenue:n,negative:r})});Kameleoon.Analyst.processConversions(i)}})}};this.Data={checkInterest:function(e,i,n){if(g.gathererRun&&"object"==typeof e){var r=Math.random().toString();if(null==g.checkImageCallbacks)g.checkImageCallbacks={};var t=[];for(var o=0;o<e.length;++o)t.push({url:e[o]});g.checkImageCallbacks[r]=function(e){if(i&&1==e)for(var t in g.Gatherer.configuration.interests)if("interestName"==g.Gatherer.configuration.interests[t].name){Kameleoon.Visitor.addInterests([interest.index],fresh);break}n&&r(e)};Kameleoon.Gatherer.checkImageList(t,null,r)}},readLocalData:function(e){return g.kameleoonVars[e]?g.kameleoonVars[e].value:null},resetCustomData:function(e){Kameleoon.API.Data.setCustomData(e,[],!0)},retrieveDataFromRemoteSource:function(e,t){s.performBeaconServerCall("//api-data."+p.DOMAIN+"/data?siteCode="+p.siteCode+"&key="+e,function(){if(4==this.readyState){var e={};if(200==this.status)e=s.JSONParse(this.responseText);t&&t(e)}},null)},setCustomData:function(e,t,i){if(g.gathererRun){var n=null;for(var r in g.Gatherer.configuration.customData){var o=g.Gatherer.configuration.customData[r];if(null!=o&&o.name==e){n=parseInt(r);break}}if(null!=n){if(null==i)i=!1;Kameleoon.Gatherer.trackCustomData([n],[t],[i])}}},writeLocalData:function(e,t,i){g.kameleoonVars[e]={value:t,date:(new Date).getTime()+24*60*60*1e3*(i?30:1/24)};s.createLocalData("kameleoonVars",g.kameleoonVars,380,null,"LS",!0)}};this.Events={triggered:[],trigger:function(e){Kameleoon.API.Core.runWhenConditionTrue(function(){return!0===g.setupAfterLocalDataRetrieval},function(){Kameleoon.API.Events.triggered.push(e);o.processAllContainers();o.processAllTargetingSegments();},100)}};this.Tracking={processOmniture:function(e){Kameleoon.Analyst.processOmniture&&Kameleoon.Analyst.processOmniture(e)}};this.Products={obtainRecommendedProducts:function(e,t,i,n){},trackAddToCart:function(e,t,i){if(null!=e&&e.length>0){i=parseInt(i)||1;if(i>0){if(!g.simulationMode&&!g.proxyMode)o.validateTrackingRequest(function(){s.performBeaconServerCall(o.obtainProductTrackingRequestPrefix()+"eventType=productAddToCart"+"&siteCode="+p.siteCode+"&ean="+encodeURIComponent(e.toString())+"&quantity="+i,null,null);}.bind(this))}else if(p.useRees46&&null!=window.r46)r46("track","remove_from_cart",{id:e,amount:i})}},trackCategoryView:function(e){},trackProductView:function(e,t){if(null!=e&&e.length>0){var i=new m(e,t);if(!g.simulationMode&&!g.proxyMode)o.validateTrackingRequest(function(){s.performBeaconServerCall(o.obtainProductTrackingRequestPrefix()+"eventType=productPage"+"&siteCode="+p.siteCode+h(i),null,null)}.bind(this));if(g.gathererRun)Kameleoon.Gatherer.trackProduct(e);g.product=f(i);}},trackTransaction:function(e){for(var i=0;i<e.length;++i){var n=e[i];if(null!=n.productId&&n.productId.length>0){n.quantity=parseInt(n.quantity)||1;if(n.quantity>0)if(!g.simulationMode&&!g.proxyMode)o.validateTrackingRequest(function(){s.performBeaconServerCall(o.obtainProductTrackingRequestPrefix()+"eventType=productBuy"+"&siteCode="+p.siteCode+"&ean="+encodeURIComponent(n.productId.toString())+"&quantity="+n.quantity,null,null)}.bind(this))}}}};this.Experiments=new t("experiments");this.Personalizations=new t("personalizations");this.Variations={execute:function(e){var t=function(t){return Kameleoon.Internals.runtime.variations.find(function(e){return e.id==t})};var i=t(e);if(i.redirections)Kameleoon.Analyst.preProcessRedirect(i);Kameleoon.Analyst.addCSSStyleSheet(i.cssCode);Kameleoon.Analyst.applyJavascriptCode(i)}};Object.defineProperty(this.Utils,"mouseDownEvent",{enumerable:!0,get:function(){return g.mouseDownEvent}});Object.defineProperty(this.Utils,"touchMoveEvent",{enumerable:!0,get:function(){return g.touchMoveEvent}});Object.defineProperty(this,"currentContainer",{enumerable:!1,get:function(){C("Function Kameleoon.API.currentContainer will be deprecated.","currentContainer");return g.currentContainer}})}.bind(this);this.Utils={addEventListener:s.addEventListener.bind(s),clearInterval:s.clearInterval.bind(s),clearTimeout:s.clearTimeout.bind(s),createHash:s.computeStringHash.bind(s),getURLParameters:s.parseParameters.bind(s),performRequest:function(e,t,i,n){return s.performBeaconServerCall(e,t,i,"undefined"!=typeof n?n:5e3)},querySelectorAll:s.querySelectorAll.bind(s),setInterval:function(e,t){return s.setInterval(e,"undefined"!=typeof t?t:200)},setTimeout:function(e,t){return s.setTimeout(e,"undefined"!=typeof t?t:200)}};Object.defineProperty(this,"Visitor",{enumerable:!0,get:function(){return new n}});Object.defineProperty(this,"CurrentVisit",{enumerable:!0,get:function(){return new r(g.Visitor.currentVisit)}});var t=function(r){var r=r;this.getAll=function(){return g[r].map(function(e){return new i(e,r)})};this.getActive=function(){return g[r].filter(function(e){return!0===e.targeting&&1!=e.disabled}).map(function(e){return new i(e,r)})};this.getTriggeredInVisit=function(){var e=g.Visitor.currentVisit;var t="experiments"==r?Object.keys(e.timesByVariationIdByExperimentId):Object.keys(e.timesByVariationIdByPersonalizationId);return g[r].filter(function(e){return-1!=t.indexOf(e.id.toString())}).map(function(e){return new i(e,r)})};this.getById=function(t){var e=g[r].find(function(e){return e.id==t});if(e)return new i(e,r);return null};this.getByName=function(t){var e=g[r].find(function(e){return e.name==t});if(e)return new i(e,r);return null};if("experiments"==r)this.assignVariation=function(t,e,i){var n=g[r].find(function(e){return e.id==t});if(!n.registeredVariationId||i){n.registeredVariationId=e;n.assignmentTime=(new Date).getTime();Kameleoon.Analyst.writeExperimentLocalData(n)}};else this.disable=function(t){var e=g["personalizations"].find(function(e){return e.id==t});if(e)e.disabled=!0}};var i=function(t,e){var t=t;this.dateLaunched=t.dateStatusModified;this.dateModified=t.dateModified;this.id=t.id;this.name=t.name;this.targetSegment=new d(t.targetingSegment);this.active=t.targeting&&!t.disabled;this.goals=t.goals;this.untrackedTrafficReallocationTime=t.untrackedRespoolTime||null;if("experiments"==e){this.mainGoal=t.kameleoonTracking&&t.kameleoonTracking.mainGoal?new c(t.kameleoonTracking.mainGoal):null;var i=null;if(t.registeredVariationId)i=Kameleoon.Internals.runtime.variations.find(function(e){return e.id==t.registeredVariationId});this.associatedVariation=i?new u(i,t):null;if(g.Visitor.currentVisit.mentalistDecisionByExperimentId[this.id])this.mentalistDecision=!0;this.trafficDeviation={};this.variations=[];for(var n in t.deviation){this.trafficDeviation["reference"==n?0:n]=100*t.deviation[n];this.variations.push(new u(g.variations.find(function(e){return e.id==n})||{},t))}Object.defineProperty(this,"registeredVariation",{enumerable:!1,get:function(){C("Property registeredVariation will be deprecated, please use associatedVariation instead.","registeredVariation");return this.associatedVariation}.bind(this)})}else{this.mainGoal=new c(Kameleoon.Internals.configuration.goals.find(function(e){return e.id==t.mainGoalId}));this.associatedVariation=new u(Kameleoon.Internals.runtime.variations.find(function(e){return e.id==t.variationId})||{},t);this.exposition=t.exposition;if(g.Visitor.currentVisit.mentalistDecisionByPersonalizationId[this.id])this.mentalistDecision=!0}Object.defineProperty(this,"targetingSegment",{enumerable:!1,get:function(){C("Property targetingSegment will be deprecated, please use targetSegment instead.","targetingSegment");return this.targetSegment}.bind(this)});Object.defineProperty(this,"targeting",{enumerable:!1,get:function(){C("Property targeting will be deprecated, please use active instead.","targeting");return this.active}.bind(this)});Object.defineProperty(this,"displayedVariation",{enumerable:!1,get:function(){C("Property displayedVariation will be deprecated, please use associatedVariation instead.","displayedVariation");return this.associatedVariation}.bind(this)})};Kameleoon.Analyst.APIContainer=i;var n=function(){this.numberOfVisits=g.Visitor.totalVisits;this.timeStartedEldestVisit=g.Visitor.timeStartedEldestVisit;this.customData=a();this.personalizationsActive=g.personalizationsActive;this.code=g.Visitor.currentVisit.visitorCode;this.currentVisit=new r(g.Visitor.currentVisit);this.visits=g.Visitor.visits.map(function(e){return new r(e)});this.firstVisit=new r(g.Visitor.visits[0]);this.previousVisit=new r(g.Visitor.visits.slice(-2)[0]);Object.defineProperty(this,"totalVisits",{enumerable:!1,get:function(){C("Property totalVisits will be deprecated, please use numberOfVisits instead.","totalVisits");return this.numberOfVisits}.bind(this)})};var r=function(n){this.pageViews=n.wholeVisitHistory.timesStartedPages.length;this.duration=n.timeLastActivity-n.timeStarted;this.locale=n.localeLanguageTag;this.startDate=n.timeStarted;this.index=n.visitNumber;var n=g.Visitor.currentVisit;this.triggeredExperiments=g["experiments"].filter(function(e){return-1!=Object.keys(n.timesByVariationIdByExperimentId).indexOf(e.id.toString())}).map(function(e){return Kameleoon.API.Experiments.getById(e.id)});this.triggeredPersonalizations=g["personalizations"].filter(function(e){return-1!=Object.keys(n.timesByVariationIdByPersonalizationId).indexOf(e.id.toString())}).map(function(e){return Kameleoon.API.Personalizations.getById(e.id)});if(n==Kameleoon.Internals.runtime.Visitor.currentVisit){this.device=new v;this.geolocation=g.geolocation?new y:null;if(g.mentalistRun){Object.defineProperty(this,"conversionPredictions",{enumerable:!0,get:function(){return Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(!1)}});Object.defineProperty(this,"initialConversionPredictions",{enumerable:!0,get:function(){return Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(!0)}})}}this.conversions={};p.goals.forEach(function(e){var t=n.wholeVisitHistory.conversionCountByGoalId[e.id];if(null!=t&&t>0){var i=n.wholeVisitHistory.revenueCountByGoalId[e.id];if(null==i)i=0;this.conversions[e.id]={count:t,revenue:i}}}.bind(this));this.interests=null;if(g.Gatherer.interestsChecked){this.interests=[];for(var e in n.wholeVisitHistory.freshByActiveInterest){var t=g.Gatherer.configuration.interests[e];if(null!=t)this.interests.push(t.name)}}this.customData={};for(var i in n.wholeVisitHistory.countByValueByCustomDatum){var r=g.Gatherer.configuration.customData[i];if(null!=r){var o=n.wholeVisitHistory.countByValueByCustomDatum[i];switch(r.type){case"LIST":var a=[];for(var s in o)a.push(s);this.customData[r.name]=a;break;case"COUNT_LIST":var u=[];for(var s in o)u.push({value:s,count:o[s]});this.customData[r.name]=u;break;default:this.customData[r.name]=Object.keys(o)[0];break}}}var l="<OTHER / UNKNOWN>";this.acquisitionChannel=[];for(var c=0,d=n.firstReferrers.length;c<d;c++){var m=n.firstReferrers[c];var h;if(0==m)h="<RESTART>";else{var f=g.Gatherer.configuration.referrers[m-1];h=null==f?l:f.name}this.acquisitionChannel.push(h)}this.originalLandingPage=n.landingPageHref;this.weather=new P(n);Object.defineProperty(this,"visitorCode",{enumerable:!1,get:function(){b("currentVisit.visitorCode","Visitor.code");return Kameleoon.API.Visitor.code}});Object.defineProperty(this,"timeSpent",{enumerable:!1,get:function(){C("Property timeSpent will be deprecated, please use duration instead","timeSpent");return this.duration}});Object.defineProperty(this,"visitNumber",{enumerable:!1,get:function(){C("Property visitNumber will be deprecated, please use index instead","visitNumber");return this.index}});Object.defineProperty(this,"activeExperiments",{enumerable:!1,get:function(){C("Property activeExperiments will be deprecated, please use Kameleoon.API.Experiments.getActive() instead","activeExperiments");return Kameleoon.API.Experiments.getActive()}});Object.defineProperty(this,"activePersonalizations",{enumerable:!1,get:function(){C("Property activePersonalizations will be deprecated, please use Kameleoon.API.Personalizations.getActive() instead","activePersonalizations");return Kameleoon.API.Personalizations.getActive()}})};var v=function(){var e={CHROME:"Chrome OS",MAC:"Mac",IOS:"iOS",LINUX:"Linux",Android:"Android","WINDOWS PHONE":"Windows Phone"};this.browser=g.browserName;this.browserVersion=g.browserVersion;var t=Kameleoon.Gatherer.obtainOSIndex();if(null!=t)this.os=e[g.Gatherer.configuration.oss[t].name];else this.os="Other";this.screenHeight=Kameleoon.Gatherer.obtainScreenHeight();this.screenWidth=Kameleoon.Gatherer.obtainScreenWidth();this.timeZone=Kameleoon.Gatherer.obtainTimeZoneId();this.type=g.deviceType[0]+g.deviceType.slice(1).toLocaleLowerCase();this.windowHeight=Kameleoon.Gatherer.obtainWindowHeight();this.windowWidth=Kameleoon.Gatherer.obtainWindowWidth()};var y=function(){this.country=g.geolocation.country;this.region=g.geolocation.region;this.city=g.geolocation.city;this.postalCode=g.geolocation.postalCode;this.latitude=g.geolocation.latitude;this.longitude=g.geolocation.longitude};var P=function(e){this.temperature=e.wholeVisitHistory.temperature;this.humidity=e.wholeVisitHistory.humidity;this.pressure=e.wholeVisitHistory.pressure;this.windSpeed=e.wholeVisitHistory.windSpeed;this.cloudiness=e.wholeVisitHistory.cloudiness;this.sunrise=null==e.wholeVisitHistory.sunriseTime?null:new Date(e.wholeVisitHistory.sunriseTime);this.sunset=null==e.wholeVisitHistory.sunsetTime?null:new Date(e.wholeVisitHistory.sunsetTime);this.conditionCode=e.wholeVisitHistory.weatherCodeId;this.conditionDescription=e.wholeVisitHistory.weatherCode};var a=function(){var e={};for(var t in g.Visitor.currentVisit.wholeVisitHistory.countByValueByCustomDatum){var i=g.Gatherer.configuration.customData[t];if(null!=i&&!i.disabled)if("VISITOR"==Kameleoon.Gatherer.obtainCorrectedCustomDatumScope(i.scope)){var n=g.Visitor.currentVisit.wholeVisitHistory.countByValueByCustomDatum[t];switch(i.type){case"LIST":var r=[];for(var o in n)r.push(o);e[i.name]=r;break;case"COUNT_LIST":var a=[];for(var o in n)a.push({value:o,count:n[o]});e[i.name]=a;break;default:e[i.name]=Object.keys(n)[0];break}}}return e};var u=function(e,t){this.id=e.id;this.name=e.name;this.reallocationTime=t.respoolTime?t.respoolTime[this.id]:null;this.instantiatedTemplate=e.widgetTemplateInputData?new l(e.widgetTemplateName,e.widgetTemplateInputData):null};var l=function(e,t){this.name=e;this.customFields=t};var c=function(e){if(e){this.id=e.id;this.name=e.name;this.type=e.type}};var d=function(e){if(e){this.id=e.id;this.name=e.id;this.targetingTree=e.targetingTree}};var m=function(e,t){this.productId=e;this.name=t.name;this.categoryId=t.categoryId;this.category=t.category;this.mainImageURL=t.mainImageURL||t.image_url;this.imageURLs=t.imageURLs;this.price=parseFloat(t.price)||null;this.available=t.available;this.brand=t.brand;this.child=t.child;this.gender=t.gender;this.sizes=t.sizes||t.fashion_sizes;this.type=t.type;this.feature=t.feature;this.crossedOutPrice=parseFloat(t.crossedOutPrice)||null;this.sku=t.sku;this.merchantID=t.merchantID;if(t.url)this.url=t.url};var h=function(e){var t="m"==e.gender||"M"==e.gender?!0:"f"==e.gender||"F"==e.gender?!1:null;return"&ean="+encodeURIComponent(e.productId.toString())+(null==e.name?"":"&name="+encodeURIComponent(e.name.toString()))+(null==e.categoryId?"":"&categoryId="+encodeURIComponent(e.categoryId.toString()))+(null==e.category?"":"&category="+encodeURIComponent(e.category.toString()))+"&href="+encodeURIComponent(s.computeCurrentPageCleanAbsoluteURL())+(null==e.mainImageURL?"":"&pictureHref="+encodeURIComponent(e.mainImageURL.toString()))+(null==e.price?"":"&price="+e.price)+(null==e.available?"":"&available="+e.available)+(null==e.brand?"":"&brand="+e.brand)+(null==e.child?"":"&child="+e.child)+(null==t?"":"&male="+t)+(null==e.sizes?"":"&sizes="+encodeURIComponent(JSON.stringify(e.sizes)))+(null==e.type?"":"&type="+e.type)+(null==e.feature?"":"&feature="+e.feature)+(null==e.sku?"":"&sku="+e.sku)+(null==e.merchantID?"":"&sellerId="+e.merchantID)+(null==e.crossedOutPrice?"":"&crossedOutPrice="+e.crossedOutPrice)};var f=function(e){return{productId:e.productId,name:e.name,categoryId:e.categoryId,category:e.category,mainImageURL:e.mainImageURL,imageURLs:e.imageURLs,price:e.price,available:e.available,brand:e.brand,child:e.child,gender:e.gender,sizes:e.sizes,type:e.type,feature:e.feature,sku:e.sku,merchantID:e.merchantID,crossedOutPrice:e.crossedOutPrice}};var b=function(e,t){if(!Kameleoon.Internals.runtime.deprecatedFunctionsCalled)Kameleoon.Internals.runtime.deprecatedFunctionsCalled=[];if(-1==Kameleoon.Internals.runtime.deprecatedFunctionsCalled.indexOf(e)){Kameleoon.Internals.runtime.deprecatedFunctionsCalled.push(e);if(t)console.warn("Function Kameleoon.API."+e+" will be deprecated, please use Kameleoon.API."+t);else console.warn("Function Kameleoon.API."+e+" will be deprecated.")}};var C=function(e,t){if(!Kameleoon.Internals.runtime.deprecatedFunctionsCalled)Kameleoon.Internals.runtime.deprecatedFunctionsCalled=[];if(-1==Kameleoon.Internals.runtime.deprecatedFunctionsCalled.indexOf(t)){Kameleoon.Internals.runtime.deprecatedFunctionsCalled.push(t);console.warn(e)}};var I=function(){this.load=function(){b("load","Core.load");this.Core.load.apply(this,arguments)};this.runWhenElementPresent=function(e,t,i,n){b("runWhenElementPresent","Core.runWhenElementPresent");if(!0===i)this.Core.runWhenElementPresent(e,t);else this.Core.runWhenElementPresent(e,t,n)};this.runWhenConditionTrue=function(){b("runWhenConditionTrue","Core.runWhenConditionTrue");this.Core.runWhenConditionTrue.apply(this,arguments)};this.processRedirect=function(){b("processRedirect","Core.processRedirect");this.Core.processRedirect.apply(this,arguments)};this.triggerEvent=function(){b("triggerEvent","Events.trigger");this.Events.trigger.apply(this,arguments)};this.processConversion=function(){b("processConversion","Goals.processConversion");this.Goals.processConversion.apply(this,arguments)};this.cancelConversion=function(){b("cancelConversion","Goals.cancelConversion");this.Goals.cancelConversion.apply(this,arguments)};this.processConversions=function(){b("processConversions","Goals.processConversions");this.Goals.processConversions.apply(this,arguments)};this.processOmniture=function(){b("processOmniture","Tracking.processOmniture");this.Tracking.processOmniture.apply(this,arguments)};this.loadScriptSequentially=function(){C("The function loadScriptSequentially will be deprecated.","loadScriptSequentially");s.loadScriptSequentially.apply(this,arguments)};this.processPageLoaded=function(){s.processPageLoaded.apply(this,arguments)};this.setCustomData=function(){b("setCustomData","Data.setCustomData");this.Data.setCustomData.apply(this,arguments)};this.registerProductPage=function(){b("registerProductPage","Products.trackProductView");this.Products.trackProductView.apply(this,arguments)};this.registerProductAddToCart=function(e,t){b("registerProductAddToCart","Products.trackAddToCart");this.Products.trackAddToCart(e,0,t)};this.registerProductBuy=function(e,t){b("registerProductBuy","Products.trackTransaction");this.Products.trackTransaction([{productId:e,quantity:t}])};this.registerProductsBuy=function(e){b("registerProductsBuy","Products.trackTransaction");var t=e.map(function(e){return{productId:e.ean,quantity:e.quantity}});this.Products.trackTransaction(t)};this.registerProductCategory=function(){b("registerProductCategory","Products.trackCategoryView");this.Products.trackCategoryView.apply(this,arguments)};this.registerRemoveProductCart=function(e,t){b("registerRemoveProductCart","Products.trackAddToCart");this.Products.trackAddToCart(e,0,t)};this.getRecommendedProducts=function(){b("getRecommendedProducts","Products.obtainRecommendedProducts");this.Products.obtainRecommendedProducts.apply(this,arguments)};this.retrieveData=function(){b("retrieveData","Data.retrieveDataFromRemoteSource");this.Data.retrieveDataFromRemoteSource.apply(this,arguments)};Object.defineProperty(this,"currentVisit",{enumerable:!0,get:function(){b("currentVisit","CurrentVisit");return Kameleoon.API.CurrentVisit}});Object.defineProperty(this,"events",{enumerable:!0,get:function(){b("events","Events.triggered");return Kameleoon.API.Events.triggered}});Object.defineProperty(this,"visits",{enumerable:!0,get:function(){b("visits","Visitor.getAll");return Kameleoon.API.Visitor.visits}});Object.defineProperty(this,"visitor",{enumerable:!0,get:function(){b("visitor","Visitor");return Kameleoon.API.Visitor}});Object.defineProperty(this,"experiments",{enumerable:!0,get:function(){b("experiments","Experiments.getAll");return Kameleoon.API.Experiments.getAll()}});Object.defineProperty(this,"personalizations",{enumerable:!0,get:function(){b("personalizations","Personalizations.getAll");return Kameleoon.API.Personalizations.getAll()}});}.bind(this);e();I()};Kameleoon.Classes.Analyst=function(){var Configuration=Kameleoon.Internals?Kameleoon.Internals.configuration:null;var Runtime=Configuration?Kameleoon.Internals.runtime:null;var Utils=Kameleoon.Utils;this.CODE_ALPHABET="abcdefghijklmnopqrstuvwxyz0123456789";this.load=function(){document.removeEventListener("visibilitychange",this.load);if("prerender"==document.visibilityState){document.addEventListener("visibilitychange",this.load);if(window.kameleoonDisplayPage){window.clearTimeout(window.kameleoonDisplayPageTimeOut);try{window.kameleoonDisplayPage(!0)}catch(e){}}return}Runtime=Kameleoon.Internals.runtime;Utils=Kameleoon.Utils;if(null!=Runtime){Runtime.eventListeners.forEach(function(e){e.element.removeEventListener(e.eventType,e.actionFunction,e.useCapture)});for(var timeoutId in Runtime.timeoutIds)Utils.clearTimeout(timeoutId);for(var intervalId in Runtime.intervalIds)Utils.clearInterval(intervalId);if(null!=Runtime.mutationObserver)Runtime.mutationObserver.disconnect();if(null!=Runtime.Analyst.targetingPanel&&null!=Runtime.Analyst.targetingPanel.parentNode)Runtime.Analyst.targetingPanel.parentNode.removeChild(Runtime.Analyst.targetingPanel);if(null!=Runtime.Analyst.targetingPanelHideButton&&null!=Runtime.Analyst.targetingPanelHideButton.parentNode)Runtime.Analyst.targetingPanelHideButton.parentNode.removeChild(Runtime.Analyst.targetingPanelHideButton);if(null!=Runtime.Analyst.targetingPanelShowButton&&null!=Runtime.Analyst.targetingPanelShowButton.parentNode)Runtime.Analyst.targetingPanelShowButton.parentNode.removeChild(Runtime.Analyst.targetingPanelShowButton);if(Runtime.externalIframe)window.kameleoonExternalIframe=Runtime.externalIframe}Configuration=Kameleoon.Internals.configuration;Kameleoon.Internals.runtime=Runtime=new Kameleoon.Classes.Runtime(Configuration);Kameleoon.Utils=Utils=new Kameleoon.Classes.Utils(Runtime);Kameleoon.API=new Kameleoon.Classes.API;Runtime.iframeLocalStorage=Configuration.useWideDomainSupport;Runtime.useWideDomainSupport=Configuration.useWideDomainSupport||null!=window.kameleoonLightIframe;var elements=Utils.querySelectorAll("[id^='kameleoonElement'], [id^='kameleoonScenarioLayerBase'], [id^='kameleoonStyleSheet']");for(var i=0;i<elements.length;i++)elements[i].parentNode.removeChild(elements[i]);elements=Utils.querySelectorAll("[id^='kameleoonId']");for(var i=0;i<elements.length;i++)elements[i].removeAttribute("id");elements=Utils.querySelectorAll("[class^='kameleoonClass']");for(var i=0;i<elements.length;i++)elements[i].removeAttribute("class");Utils.domReady(function(){Runtime.domReady=!0});if(!Runtime.iframeLocalStorage)try{if(window.localStorage){localStorage.setItem("kameleoonPrivateMode","false");localStorage.removeItem("kameleoonPrivateMode")}else Runtime.noLocalStorage=!0}catch(e){Runtime.noLocalStorage=!0}if(window.kameleoonDisplayPage){if(null==Configuration.behaviorWhenTimeout||document.getElementById("kameleoonLoadingStyleSheet"))window.clearTimeout(window.kameleoonDisplayPageTimeOut);else if(!Runtime.noLocalStorage&&null==window.kameleoonEndLoadTime)switch(Configuration.behaviorWhenTimeout){case"VISIT":sessionStorage.setItem("kameleoonDisableForVisit","true");break;case"PAGE":Runtime.kameleoonDisableForPage=!0;break}try{window.kameleoonDisplayPage(!0)}catch(e){}}var customEvent=document.createEvent("CustomEvent");var eventData={timeout:Runtime.kameleoonDisableForPage||sessionStorage.getItem("kameleoonDisableForVisit")?!0:!1};if(null!=window.kameleoonStartLoadTime)eventData.loadTime=window.kameleoonEndLoadTime-window.kameleoonStartLoadTime-25;customEvent.initCustomEvent("Kameleoon::Load",!1,!1,eventData);Utils.addEventListener(window,"message",Utils.processMessageEvent,!1);if(-1!=navigator.userAgent.indexOf("Chrome/62")){var currentScroll={x:window.scrollX,y:window.scrollY};document.documentElement.style.display="none";var fixVisibility=document.documentElement.offsetHeight;document.documentElement.style.display="block";window.scrollTo(currentScroll.x,currentScroll.y)}if(!Array.prototype.find&&-1!=navigator.userAgent.indexOf("rv:11"))Object.defineProperty(Array.prototype,"find",{enumerable:!1,value:function(e){try{var t=Object(this);var i=t.length>>>0;var n=arguments[1];var a;for(var o=0;o<i;o++){a=t[o];if(e.call(n,a,o,t))return a}return}catch(e){}}});if(Runtime.noLocalStorage||sessionStorage.getItem("kameleoonDisableForVisit")||Runtime.kameleoonDisableForPage)return;Kameleoon.Analyst.setupKameleoon()};this.setupKameleoon=function(){Runtime.targetingSegments=Utils.clone(Configuration.targetingSegments);Runtime.variations=Utils.clone(Configuration.variations);Runtime.experiments=Utils.clone(Configuration.experiments).map(function(e){return new Kameleoon.Classes.Container(e)});Runtime.personalizations=Utils.clone(Configuration.personalizations).map(function(e){return new Kameleoon.Classes.Container(e)});if(null!=Configuration.mentalistTargetingSegments)Runtime.mentalistTargetingSegments=Utils.clone(Configuration.mentalistTargetingSegments);Runtime.cantUseMutationObserver="function"!==typeof MutationObserver||Configuration.disableDomMutationObserver;Runtime.mouseDownEvent="ontouchend"in document.documentElement?"touchend":"mousedown";if("touchend"==Runtime.mouseDownEvent){Utils.addEventListener(document,"touchmove",function(e){Runtime.touchMoveEvent=!0});Utils.addEventListener(document,"touchstart",function(e){Runtime.touchMoveEvent=!1})}if(null!=Configuration.kameleoonByteLength)if(null!=window.kameleoonStartLoadTime){if(null==window.kameleoonEndLoadTime)window.kameleoonEndLoadTime=(new Date).getTime();var kameleoonLoadTime=window.kameleoonEndLoadTime-window.kameleoonStartLoadTime-25;Runtime.bandwithBytesPerMillisecond=Configuration.kameleoonByteLength/kameleoonLoadTime}Runtime.deviceType=bowser.tablet?"TABLET":bowser.mobile?"PHONE":"DESKTOP";Runtime.mobileDevice="TABLET"==Runtime.deviceType||"PHONE"==Runtime.deviceType;Runtime.linux=bowser.linux;Runtime.mac=bowser.mac;Runtime.windows=bowser.windows;Runtime.android=bowser.android;Runtime.ios=bowser.ios;Runtime.windowsphone=bowser.windowsphone;Runtime.gecko=bowser.gecko;Runtime.webkit=bowser.webkit;Runtime.browserName=""==bowser.name?null:bowser.name;Runtime.browserVersion=""==bowser.version?null:parseFloat(bowser.version);Runtime.msie=bowser.msie;Runtime.msedge=bowser.msedge;Runtime.chrome=bowser.chrome;Runtime.firefox=bowser.firefox;Runtime.safari=bowser.safari;Runtime.opera=bowser.opera;Runtime.modernMsie=Runtime.msie&&Runtime.browserVersion>=11;Runtime.unsupportedBrowser=Runtime.msie&&!Runtime.modernMsie||Runtime.opera&&Runtime.browserVersion<13;Runtime.parameters=Utils.parseParameters();Runtime.conversionsEvent=new Utils.Event;Runtime.targetingsEvent=new Utils.Event;Runtime.memorizedTargetingsEvent=Runtime.targetingsEvent.memorize();var kameleoonOptout=Runtime.parameters.kameleoonOptout;if(null!=kameleoonOptout){var optoutValue=parseInt(kameleoonOptout);Utils.createLocalData("kameleoonOptout",!0,isNaN(optoutValue)?45:optoutValue,null,"LS",!1,null,!0)}if(this.shouldAbortSetup())return;if(0==window.kameleoonLightIframe){Runtime.iframeLocalStorage=!1;if(window.kameleoonIframeURL)Utils.setTimeout(function(){var e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style="float: left !important; opacity: 0.0 !important; width: 0px !important; height: 0px !important;";e.onload=function(){e.parentNode.removeChild(e)};document.head.appendChild(e)},5e3)}if(null!=Kameleoon.Mentalist)Runtime.mentalistRun=Kameleoon.Mentalist.isSecure();Runtime.headNode=document.getElementsByTagName("head")[0];Runtime.editorMode="true"==Runtime.parameters.kameleoon;Runtime.proxyMode="proxy."+Configuration.DOMAIN===window.location.hostname;Runtime.disableCache="true"==Runtime.parameters.kameleoonDisableCache||Runtime.parameters.kameleoonVariationId;Runtime.kameleoonSelectionIframeMode="true"==Runtime.parameters.kameleoonSelectionIframeMode;if(window.parent!=window)try{Runtime.editorMode=Runtime.editorMode||window.parent.location.search&&-1!=window.parent.location.search.indexOf("kameleoon=true")}catch(e){}if(!Runtime.iframeLocalStorage)window.addEventListener("storage",function(e){var t=null==e.key?[""]:e.key.split("-");var i=t[0];if(-1!=i.indexOf("kameleoon")){var n;if(null==e.newValue)n=null;else try{n=JSON.parse(e.newValue).value}catch(e){return}var a={};switch(i){case"kameleoonExperiment":a.type=i;var o=t[1];a.experimentId=isNaN(o)?o:parseInt(o);var r;if(null==n)r=null;else{var s=n.split("/")[0];r=isNaN(s)?s:parseInt(s)}a.registeredVariationId=r;break;case"kameleoonPersonalizations":a.type=i;a.active=null==n?null:"true"==n.split("/")[0];break;case"kameleoonData":case"kameleoonDataSimulation":a.type=i;a.value=null==n?null:n;break;case"kameleoonLocalDataConsent":a.type=i;a.saveLocalDataAllowed=null==n?null:n;break}if(null!=a.type)Utils.processStorageData(a)}}.bind(this),!1);if(Configuration.abtestingSetup||Configuration.personalizationSetup){if(Runtime.parameters.kameleoonVariationId)Runtime.experiments=[];this.obtainSimulationModeData();}else this.setupAfterLocalDataRetrieval();};this.shouldAbortSetup=function(){if(Runtime.parameters.kameleoonDisabled||Configuration.kameleoonDisabled)return!0;if(Runtime.unsupportedBrowser)return!0;if(Utils.readLocalData("kameleoonOptout","LS",!1)||Utils.readLocalData("kameleoonOptout","COOKIE",!1))return!0;return!1};this.obtainSimulationModeData=function(){if(Runtime.parameters["kameleoon-simulation"]){Runtime.newSimulationModeData=!0;if(0==Runtime.parameters["kameleoon-simulation"].indexOf("server-call-")){Utils.performBeaconServerCall("https://"+Configuration.API_HOST_NAME+"."+Configuration.DOMAIN+"/simulation?siteCode="+Configuration.siteCode+"&simulationCode="+Runtime.parameters["kameleoon-simulation"].substring(12),function(){if(4==this.readyState&&200==this.status){var fileName="kameleoonSimulation.js";try{eval(this.responseText+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}}},null);return}Runtime.simulationModeData=Utils.JSONParse(Runtime.parameters["kameleoon-simulation"])}this.setupLocalData()};this.setupLocalData=function(){if(Runtime.iframeLocalStorage){Runtime.externalIframe=document.getElementById("kameleoonExternalIframe")||window.kameleoonExternalIframe;Runtime.postMessageOrigin=window.kameleoonIframeOrigin?window.kameleoonIframeOrigin:Configuration.IFRAME_ORIGIN;Runtime.postMessageCallbacks={};if(null==Configuration.externalIframeData)Utils.postMessageToExternalIframe(Utils.JSONStringify({type:"retrieve",callbackId:Utils.addPostMessageCallback(function(e){this.setupLocalDataCallback(e)}.bind(this))}));else{this.setupLocalDataCallback(Configuration.externalIframeData);delete Configuration.externalIframeData}}else this.setupLocalDataCallback(null)};this.loadKameleoonFull=function(t){if(null!=Configuration.kameleoonFull)this.updateAndEvaluateKameleoonFull(Configuration.kameleoonFull,t);else if(Runtime.iframeLocalStorage)Utils.postMessageToExternalIframe(Utils.JSONStringify({type:"kameleoonfull",staticHostName:Configuration.STATIC_HOST_NAME,domain:Configuration.DOMAIN,betaCode:Configuration.betaCode,cache:Utils.obtainRandomString(16),callbackId:Utils.addPostMessageCallback(function(e){Kameleoon.Analyst.updateAndEvaluateKameleoonFull(e,t)})}));else{var e=sessionStorage.getItem("kameleoonFull");var i=sessionStorage.getItem("kameleoonFullTime");if(null==e||null==i||(new Date).getTime()-parseInt(i)>=12*60*60*1e3)Utils.performBeaconServerCall("//"+Configuration.STATIC_HOST_NAME+"."+Configuration.DOMAIN+"/kameleoon-full"+(Configuration.betaCode?"-beta":"")+".js?cache="+Utils.obtainRandomString(16),function(){if(void 0===this.readyState||4==this.readyState&&200==this.status){sessionStorage.setItem("kameleoonFull",this.responseText);sessionStorage.setItem("kameleoonFullTime",(new Date).getTime());Kameleoon.Analyst.updateAndEvaluateKameleoonFull(this.responseText,t)}});else this.updateAndEvaluateKameleoonFull(e,t)}};this.updateAndEvaluateKameleoonFull=function(kameleoonFull,callback){Configuration.kameleoonFull=kameleoonFull;var fileName="kameleoonFull.js";try{eval(kameleoonFull+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}callback&&callback()};this.allowSaveLocalData=function(){document.removeEventListener(Runtime.mouseDownEvent,Kameleoon.Analyst.allowSaveLocalData,!1);window.removeEventListener("scroll",Kameleoon.Analyst.allowSaveLocalData,!1);Runtime.saveLocalDataAllowed=!0;Utils.createLocalData("kameleoonLocalDataConsent",!0,380,null,"LS",!1,null,!0);var e=null==Runtime.localDataMap?null:Runtime.localDataMap["LS"];if(null!=e)for(var t in e)Utils.createLocalData(e[t].name,e[t].value,e[t].days,e[t].domain,e[t].forceLocalAccess,e[t].jsonFormat,null,!0);Runtime.localDataMap=null;Kameleoon.Analyst.processRequestsToValidate()};this.setupLocalDataCallback=function(incomingStoredData){Utils.removeBlockingStyleSheet();Runtime.saveLocalDataAllowed=incomingStoredData?incomingStoredData.kameleoonLocalDataConsent:Utils.readLocalData("kameleoonLocalDataConsent","LS",!0);if("OFF"!=Configuration.localDataLegalControl&&null==Runtime.saveLocalDataAllowed&&null==Runtime.saveLocalDataAllowed&&(null==Configuration.localDataConsentCookieName||null==Utils.readLocalData(Configuration.localDataConsentCookieName,"COOKIE",!1))){Runtime.saveLocalDataAllowed=!1;if("INTERACTIVE"==Configuration.localDataLegalControl){Utils.addEventListener(document,Runtime.mouseDownEvent,this.allowSaveLocalData,!1);Utils.addEventListener(window,"scroll",this.allowSaveLocalData,!1)}}else Runtime.saveLocalDataAllowed=!0;if(Runtime.newSimulationModeData){Utils.createLocalData("kameleoonSimulationMode",Runtime.simulationModeData,1/24,null,"LS",!0);Utils.createLocalData("kameleoonSimulationModeShortURL",Runtime.simulationModeShortURL,1/24,null,"LS",!0)}else{Runtime.simulationModeData=incomingStoredData?incomingStoredData.kameleoonSimulationMode:Utils.readLocalData("kameleoonSimulationMode","LS",!0);Runtime.simulationModeShortURL=incomingStoredData?incomingStoredData.kameleoonSimulationModeShortURL:Utils.readLocalData("kameleoonSimulationModeShortURL","LS",!0)}if(Runtime.simulationModeData){Runtime.simulationMode=!0;Runtime.disableCache=!0;this.loadKameleoonFull(function(){Kameleoon.Analyst.processSimulations.apply(Kameleoon.Analyst)})}var kameleoonVars=incomingStoredData?incomingStoredData.kameleoonVars:Utils.readLocalData("kameleoonVars","LS",!0);Runtime.kameleoonVars=kameleoonVars?kameleoonVars:{};for(var key in Runtime.kameleoonVars)if(Runtime.pageStartTime>Runtime.kameleoonVars[key].date)delete Runtime.kameleoonVars[key];Utils.createLocalData("kameleoonVars",Runtime.kameleoonVars,380,null,"LS",!0);if(Runtime.parameters.kameleoonVariationId){var variationId=Runtime.parameters.kameleoonVariationId;var newVariation=incomingStoredData?incomingStoredData["kameleoonVariation"+variationId]:Utils.readLocalData("kameleoonVariation"+variationId,"LS",!0);if(null!=newVariation){sessionStorage.setItem("kameleoonVariation"+variationId,newVariation);Utils.createLocalData("kameleoonVariation"+variationId,newVariation,0,null,"LS")}var previewContainer={id:"",name:"Visualization",forceTargeting:!0,forceExposition:!0,associatedVariation:{name:"",id:variationId}};previewContainer.displayedVariation={id:variationId};previewContainer.variationId=variationId;Runtime.personalizations.push(new Kameleoon.Classes.Container(previewContainer,"personalizations"));Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Analyst.loadVariationDataForPrevisualization(previewContainer)})}Runtime.experiments.forEach(function(e){var t=!1;var i=incomingStoredData?incomingStoredData["kameleoonRedirect-"+e.id]:Utils.readLocalData("kameleoonRedirect-"+e.id,"LS",!1);i=i?i:Runtime.parameters["kameleoonRedirect-"+e.id];e.previousRequestRedirected=i?!0:!1;if(i){e.registeredVariationId=i;e.assignmentTime=(new Date).getTime()}var n=incomingStoredData?incomingStoredData["kameleoonExperiment-"+e.id]:Utils.readLocalData("kameleoonExperiment-"+e.id,"LS",!1);for(var a in Runtime.parameters)if(0==a.indexOf("kameleoonAVTE-"+e.id)){n=Runtime.parameters[a]+"/"+(new Date).getTime()+"/"+!1;t=!0}if(n){var o=n.split("/");e.registeredVariationId=o[0];e.assignmentTime=o[1];e.counterActive="true"==o[2]&&(new Date).getTime()-e.assignmentTime<2592e6?!0:!1}else e.counterActive=!1;if(e.registeredVariationId&&-1!=e.registeredVariationId.toString().indexOf("-mentalist")){e.registeredVariationId=e.registeredVariationId.replace("-mentalist","");e.mentalistEnabled=!0}if(t)Kameleoon.Analyst.writeExperimentLocalData(e)});var storedData;var existingSimulationMode=Runtime.simulationMode&&!Runtime.newSimulationModeData;if(incomingStoredData)try{var dataEncodedKey=existingSimulationMode&&null!=incomingStoredData.kameleoonDataSimulation?"kameleoonDataSimulation":"kameleoonData";var dataEncoded=incomingStoredData[dataEncodedKey];if(!Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[dataEncodedKey])storedData=dataEncoded;else{var dataJSON=Utils.unobfuscateString(dataEncoded);storedData=dataJSON&&Utils.JSONParse(dataJSON)||{}}}catch(e){storedData=null}else storedData=(existingSimulationMode?Utils.readLocalData("kameleoonDataSimulation","LS",!0):null)||Utils.readLocalData("kameleoonData","LS",!0);Runtime.storedData=storedData||{};var beforeSetupAfterLocalDataRetrieval=function(){Kameleoon.Analyst.setupAfterLocalDataRetrieval();var e={simulation:!0};for(var t=0,i=Kameleoon.Internals.runtime.experiments.length;t<i;++t)e[Kameleoon.Internals.runtime.experiments[t].id]=!0;for(var t=0,i=Kameleoon.Internals.configuration.pausedExperiments.length;t<i;++t)e[Kameleoon.Internals.configuration.pausedExperiments[t]]=!0;var n=[];var a=document.cookie.split(new RegExp("; *"));for(var t=0,i=a.length;t<i;++t){var o=a[t].substring(0,a[t].indexOf("="));var r=o.indexOf("kameleoonExperiment-");if(0==r){var s=o.substring("kameleoonExperiment-".length);if(null==e[s])n.push(o)}}var l=window.location.hostname.split(".");for(var t=0,i=n.length;t<i;++t){var m=n[t];var c="";for(var u=0,d=l.length;u<d;u++){if(u>0)c="."+c;c=l[d-u-1]+c;Kameleoon.Utils.eraseLocalData(m,c,"COOKIE")}}};var loadCustomAlgorithm=function(algorithmId,vectorizationId,decider,vectorizer,save){try{if(save){if(vectorizer)sessionStorage.setItem("kameleoonVectorizer-"+algorithmId+"-"+vectorizationId,vectorizer);sessionStorage.setItem("kameleoonDecider-"+algorithmId+"-"+vectorizationId,JSON.stringify(decider))}if(vectorizer){eval(vectorizer+"//# sourceURL=kameleoonVectorizer.js");Kameleoon.Mentalist[algorithmId][vectorizationId].decider=decider}else{Kameleoon.Mentalist[algorithmId]={};Kameleoon.Mentalist[algorithmId][vectorizationId]={decider:decider}}Runtime.algorithmId=algorithmId;Runtime.vectorizationId=vectorizationId;beforeSetupAfterLocalDataRetrieval()}catch(e){beforeSetupAfterLocalDataRetrieval()}};if(Runtime.mentalistRun&&Configuration.customPredictiveAlgorithmScript)try{var customPredictiveAlgorithm=eval(Configuration.customPredictiveAlgorithmScript);if(customPredictiveAlgorithm){var teacherStudent=!0===customPredictiveAlgorithm.teacherStudent;var algorithmId=customPredictiveAlgorithm.algorithmId;var vectorizationId=customPredictiveAlgorithm.vectorizationId||"standard";var savedDecider=sessionStorage.getItem("kameleoonDecider-"+algorithmId+"-"+vectorizationId);var savedVectorizer=sessionStorage.getItem("kameleoonVectorizer-"+algorithmId+"-"+vectorizationId);if(savedDecider&&(savedVectorizer||"standard"==vectorizationId))loadCustomAlgorithm(algorithmId,vectorizationId,Kameleoon.Utils.JSONParse(savedDecider),savedVectorizer,!1);else{var req=new XMLHttpRequest;req.open("GET","https://api-predict.kameleoon.com/decider/"+Configuration.siteCode+"/"+Configuration.MentalistFeatures.featuresConfigurationCode+"/"+teacherStudent+"/"+algorithmId+"/20190730/"+vectorizationId+".arraybuffer",!0);req.responseType="arraybuffer";req.onload=function(){var e=Kameleoon.Mentalist.readDecider(new Utils.BinaryReader(req.response));if("standard"!=vectorizationId)Kameleoon.Utils.performBeaconServerCall("http://api-predict.kameleoon.com/vectorizer/"+Configuration.siteCode+"/"+algorithmId+"/"+vectorizationId+".js",function(){if(4==this.readyState)if(200==this.status)loadCustomAlgorithm(algorithmId,vectorizationId,e,this.responseText,!0);else beforeSetupAfterLocalDataRetrieval()},null);else loadCustomAlgorithm(algorithmId,vectorizationId,e,null,!0)};req.onerror=function(){beforeSetupAfterLocalDataRetrieval()};req.send(null)}}else beforeSetupAfterLocalDataRetrieval()}catch(e){beforeSetupAfterLocalDataRetrieval()}else beforeSetupAfterLocalDataRetrieval()};this.setupAfterLocalDataRetrieval=function(){Runtime.setupAfterLocalDataRetrieval=!0;if(!Runtime.simulationMode&&Runtime.parameters.kameleoonHeatMap&&Runtime.parameters.kameleoonVariationId)Utils.performBeaconServerCall("https://"+Configuration.API_HOST_NAME+"."+Configuration.DOMAIN+"/heatmap",function(){if(4==this.readyState&&200==this.status){eval(this.responseText+"//# sourceURL=kameleoonHeatMap.js");Kameleoon.API.getHeatMap()}},null);if(Kameleoon.Analyst.processScriptActivityTracking)Kameleoon.Analyst.processScriptActivityTracking();if(Configuration.abtestingSetup||Configuration.personalizationSetup){if(Kameleoon.Gatherer&&Configuration.Gatherer){Kameleoon.Gatherer.run();Runtime.gathererRun=!0}else Utils.saveStoredData(null);if(Runtime.mentalistRun)Runtime.targetingSegmentsPredictions={};Runtime.adblockCheckIntervalId=Utils.setInterval(function(){var e=document.getElementById("adBlockerCheck");if(null==e&&null!=document.body){e=document.createElement("div");e.id="adBlockerCheck";e.className="ad-placement";document.body.appendChild(e)}if(null!=e&&"none"==Utils.obtainComputedStyle(e).display){Utils.clearInterval(Runtime.adblockCheckIntervalId);Runtime.adblock=!0}}.bind(this),50);Runtime.adblockCheckTimeoutId=Utils.setTimeout(function(){Utils.clearTimeout(Runtime.adblockCheckTimeoutId);var e=document.getElementById("adBlockerCheck");if(null!=e)e.parentNode.removeChild(e);if(null==Runtime.adblock){Utils.clearInterval(Runtime.adblockCheckIntervalId);Runtime.adblock=!1}else if(Runtime.gathererRun)Kameleoon.Gatherer.trackAdBlocker()}.bind(this),2e3);Runtime.ghosteryCheckIntervalId=Utils.setInterval(function(){if(Utils.querySelectorAll("[id^=ghostery-]").length>0){Utils.clearInterval(Runtime.ghosteryCheckIntervalId);Runtime.ghostery=!0}}.bind(this),50);Runtime.ghosteryCheckTimeoutId=Utils.setTimeout(function(){Utils.clearTimeout(Runtime.ghosteryCheckTimeoutId);if(null==Runtime.ghostery){Utils.clearInterval(Runtime.ghosteryCheckIntervalId);Runtime.ghostery=!1}else if(Runtime.gathererRun)Kameleoon.Gatherer.trackAdBlocker()}.bind(this),2e3);if(Configuration.ip||Configuration.trackerExcludedIPRanges.length>0||Runtime.simulationMode){var registerIP=function(e){Runtime.ip=e;var t=!0;for(var i=0,n=Configuration.trackerExcludedIPRanges.length;i<n;++i)if(Utils.ipAddressMatchesRange(e,Configuration.trackerExcludedIPRanges[i])){t=!1;break}Runtime.ipIsTrackerAccepted=t;this.processRequestsToValidate();if(Runtime.gathererRun)Kameleoon.Gatherer.trackIP(Runtime.ip)}.bind(this);var ipString=sessionStorage.getItem("KameleoonIP");if(null==ipString)Utils.performBeaconServerCall("//tlp-"+this.obtainTrackerNodeCodeRandom()+".kameleoon.com/ip.gif",function(){if(4==this.readyState&&(200==this.status||204==this.status)){ipString=this.getResponseHeader("ip");sessionStorage.setItem("KameleoonIP",ipString);registerIP(ipString)}},function(){Runtime.ipIsTrackerAccepted=!0;Kameleoon.Analyst.processRequestsToValidate()},1e3);else registerIP(ipString)}}Runtime.experiments.forEach(function(e){this.setupExperiment(e)}.bind(this));window.kameleoonQueue=new Kameleoon.Classes.CommandQueue(window.kameleoonQueue);window.kameleoonQueue.treatCommands();this.processAllContainers();this.processAllTargetingSegments();var experimentsTracking=[];Runtime.experiments.forEach(function(e){if(!0!==e.targeting&&e.redirectProcessed){this.performVariationAssignment(e,!0);experimentsTracking.push(e)}else if(e.preAssignVariation)this.performVariationAssignment(e,!0)}.bind(this));this.performContainersTracking(experimentsTracking);this.checkKameleoonGoals();Utils.domReady(function(){if(!0!==Configuration.disableEditorLaunchViaKeys)Kameleoon.Loader.enableKameleoonEditorListener();if(Runtime.kameleoonSelectionIframeMode){var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src","https://"+Configuration.API_HOST_NAME+"."+Configuration.DOMAIN+"/get-script?type=selection");Runtime.headNode.appendChild(e)}if(Runtime.editorMode&&!Runtime.editorEnabled&&Configuration.abtestingSetup)Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)});Kameleoon.Analyst.processGlobalScript.apply(Kameleoon.Analyst);if(Runtime.parameters.kameleoonVariationSelection||Runtime.simulationMode&&(!Runtime.editorMode||!Runtime.editorEnabled))Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableSimulationPanel()})})};this.checkAndSetKameleoonTrackingTime=function(e,t){var i=sessionStorage.getItem("kameleoonTrackingTimes");var n=null==i?{}:Utils.JSONParse(i);var a=20*60*1e3;if(null==n[t]||null==n[t]["Experiment-"+e]||(new Date).getTime()>=n[t]["Experiment-"+e]+a){if(null==n[t])n[t]={};n[t]["Experiment-"+e]=(new Date).getTime();sessionStorage.setItem("kameleoonTrackingTimes",Utils.JSONStringify(n));return!0}return!1};this.setupExperiment=function(e){if(e.previousRequestRedirected){e.redirectProcessed=!0;if(Configuration.adobeOmniture){var t=Configuration.adobeOmniture.object?Configuration.adobeOmniture.object:"s";if(Runtime.parameters.sc_referrer)window[t].referrer=Runtime.parameters.sc_referrer}Utils.eraseLocalData("kameleoonRedirect-"+e.id,null,null)}};this.performVariationAssignment=function(experiment,onlyRegisteredVariation){if(experiment.displayedVariation&&!onlyRegisteredVariation)return;var registeredVariationId=experiment.registeredVariationId,assignmentTime=experiment.assignmentTime;if(null!=experiment.mentalistDeviation){if(null!=experiment.mentalistVariationReassignationPermissionCustomScript)try{experiment.mentalistVariationReassignationPermission=eval("(function(){return "+experiment.mentalistVariationReassignationPermissionCustomScript+"})(); //# sourceURL=kameleoonMentalistVariationReassignationPermissionCustomScript.js")()}catch(e){}if(null==experiment.mentalistVariationReassignationPermission)experiment.mentalistVariationReassignationPermission=void 0===Runtime.Visitor.currentVisit.variationIdByExperimentId[experiment.id];if(Runtime.gathererRun&&Runtime.mentalistRun&&Kameleoon.Mentalist.isExperimentLearned(experiment.id)&&Utils.seededRandom(Kameleoon.Gatherer.obtainFieldFromStoredData("visitorCode")+experiment.id,!0)<=experiment.mentalistDeviation)experiment.mentalistEnabled=!0}if("true"==Runtime.parameters.kameleoonEraseCookies)registeredVariationId=null;if(registeredVariationId&&assignmentTime)experiment.variations.forEach(function(e){if(registeredVariationId==e.id&&e.respoolTime>assignmentTime||"none"==registeredVariationId&&experiment.untrackedRespoolTime>assignmentTime)registeredVariationId=null});if("none"!=registeredVariationId&&!Runtime.simulationMode&&!this.findVariation(registeredVariationId))registeredVariationId=null;if(experiment.mentalistEnabled&&experiment.mentalistVariationReassignationPermission)registeredVariationId=null;if(!registeredVariationId||experiment.mentalistVariationReassignationPermission)experiment.train=!0;if(!registeredVariationId){var customVariationSelectionFunction=null;if(experiment.customVariationSelectionScript){var fileName="kameleoonCustomVariationSelectionScript.js";try{eval(experiment.customVariationSelectionScript+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}}if(experiment.mentalistEnabled){var variationIdToScore=Kameleoon.Mentalist.computeVariationIdToScore(experiment.id);if(null!=experiment.mentalistVariationSelectionCustomScript)try{registeredVariationId=eval("(function(){return "+experiment.mentalistVariationSelectionCustomScript+"})(); //# sourceURL=kameleoonMentalistVariationSelectionCustomScript.js")(variationIdToScore)}catch(e){}else{var registeredScore=Number.NEGATIVE_INFINITY;for(var variationId in variationIdToScore){var score=variationIdToScore[variationId];if(score>registeredScore){registeredVariationId=variationId;registeredScore=score}}}if(!registeredVariationId)registeredVariationId="reference"}else if(customVariationSelectionFunction)registeredVariationId=customVariationSelectionFunction(experiment);else{var deviationRandom=this.obtainVariationAssignmentRandomNumber(experiment);var total=0;for(var i=0,l=experiment.variations.length;i<l;++i){total+=experiment.variations[i].deviation;if(deviationRandom<=total){registeredVariationId=experiment.variations[i].id;break}}registeredVariationId=registeredVariationId?registeredVariationId:"none"}experiment.registeredVariationId=registeredVariationId;experiment.assignmentTime=(new Date).getTime();this.writeExperimentLocalData(experiment)}this.associateContainerAndVariation(experiment,registeredVariationId,onlyRegisteredVariation?"REGISTERED_VARIATION":"BOTH")};this.obtainVariationAssignmentRandomNumber=function(e){var t=null;if(Runtime.gathererRun)for(var i in Runtime.Gatherer.configuration.customData)if(Runtime.Gatherer.configuration.customData[i].mappingIdentifier){t=Runtime.Visitor.currentVisit.wholeVisitHistory.countByValueByCustomDatum[i];if(null!=t)t=Object.keys(t)[0];break}if(null==t){var n="";e.variations.forEach(function(e){if(e.respoolTime&&0!=e.respoolTime)n+=e.respoolTime});var a=Kameleoon.Gatherer.obtainFieldFromStoredData("visitorCode")+e.id+n;return Utils.seededRandom(a,!0)}return Utils.seededRandom(e.id+"//"+t)};this.processAllContainers=function(){this.setMutationObserver();var e=[];e=e.concat(Runtime.experiments);e=e.concat(Runtime.personalizations);this.processContainers(e)};this.processContainers=function(e){this.internalProcessContainers(e);if(!Runtime.domReady){var t=[];for(var i=0,n=e.length;i<n;++i){var a=e[i];if(!a.domReadyCallback){a.domReadyCallback=!0;t.push(a)}}Utils.domReady(function(){Kameleoon.Analyst.internalProcessContainers(t,!0)})}};this.internalProcessContainers=function(containers,domReady){var currentTime=(new Date).getTime();this.checkContainersTargeting(containers);var containersTracking=[];for(var i=0,l=containers.length;i<l;++i){var container=containers[i];if(!0===container.targeting){container.domReadyCallback=!0;if(container.experimentContainer){this.performVariationAssignment(container,!1);if(null!=container.registeredVariation)if(!this.checkCapping(!0,container.id,container.registeredVariation.id,container.registeredVariation,currentTime))container.targeting=!1}else this.associateContainerAndVariation(container,container.exposition?container.associatedVariation.id:"reference","BOTH")}if(!0===container.targeting)if(container.displayedVariation&&container.displayedVariation.elementSets){if(container.experimentContainer)if("reference"!=container.displayedVariation.id||container.executeCodeForReference){if(container.cssCode&&!container.cssCodeEvaluated){this.addCSSStyleSheet(container.cssCode,container,null);container.cssCodeEvaluated=!0}if(container.javaScriptCode&&!container.javaScriptCodeEvaluated){container.javaScriptCodeEvaluated=!0;var fileName="kameleoonContainerJavaScriptCode-"+container.id+".js";try{eval(container.javaScriptCode+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}}}if(!domReady)this.initVariationCommands(container.displayedVariation);if(!container.trackingPerformed&&(container.experimentContainer||container.exposition||!container.exposition&&"CUSTOM_EXPOSITION_RATE"==container.notExposedReason)){var customEvent=document.createEvent("CustomEvent");var customEventData={id:container.id,variationId:container.displayedVariation.id};if(container.experimentContainer)customEventData.experiment=new Kameleoon.Analyst.APIContainer(container,"experiments");else customEventData.personalization=new Kameleoon.Analyst.APIContainer(container,"personalizations");customEvent.initCustomEvent(container.experimentContainer?"Kameleoon::ExperimentTriggered":"Kameleoon::PersonalizationTriggered",!1,!1,customEventData);window.dispatchEvent(customEvent)}containersTracking.push(container)}}this.performContainersTracking(containersTracking)};this.processAllTargetingSegments=function(){this.processTargetingSegments(Runtime.targetingSegments)};this.processTargetingSegments=function(e){this.internalProcessTargetingSegments(e);if(!Runtime.domReady){var t=[];for(var i=0,n=e.length;i<n;++i){var a=e[i];if(!a.domReadyCallback){a.domReadyCallback=!0;t.push(a)}}Utils.domReady(function(){Kameleoon.Analyst.internalProcessTargetingSegments(t)})}};this.internalProcessTargetingSegments=function(e){this.checkTargetingSegmentsTargeting(e);var t=[];for(var i=0,n=e.length;i<n;++i){var a=e[i];if(!0===a.targeting){a.domReadyCallback=!0;t.push(a)}}this.performTargetingSegmentsTracking(t)};this.loadVariationData=function(e,t){var i=e.displayedVariation.id;if(t){sessionStorage.removeItem("kameleoonVariation"+i);if(!Runtime.requestedVariations[i])this.loadVariationFromServer(e,i,t);Runtime.requestedVariations[i].simulation=!0}else{var n=sessionStorage.getItem("kameleoonVariation"+i);if(n){Runtime.variations.push(Utils.JSONParse(n));Kameleoon.Analyst.associateContainerAndVariation(e,i,"BOTH");return}if(!Runtime.requestedVariations[i])this.loadVariationFromServer(e,i);var a=e.id;var o=!1;for(var r=0,s=Runtime.requestedVariations[i].containers.length;r<s;++r)if(a==Runtime.requestedVariations[i].containers[r].id){o=!0;break}if(!o)Runtime.requestedVariations[i].containers.push(e)}};this.loadVariationDataForPrevisualization=function(e){var t=e.displayedVariation.id;var i=sessionStorage.getItem("kameleoonVariation"+t);if(i){Runtime.variations.push(Utils.JSONParse(i));Kameleoon.Analyst.associateContainerAndVariation(e,t,"BOTH");return}if(!Runtime.requestedVariations[t])this.loadVariationFromServer(e,t,!0);Runtime.requestedVariations[t].simulation=!0};this.loadVariationFromServer=function(e,t,i){Runtime.requestedVariations[t]={containers:[]};if("reference"!=t){var n="//";if(i)n+=Configuration.STATIC_DIRECT_HOST_NAME;else n+=Configuration.STATIC_HOST_NAME;n+="."+Configuration.DOMAIN+"/css/customers/"+Configuration.siteCode+"/"+Configuration.memberCode+"/";if(e.simulationMode&&e.multiVariateTest)n+="simulation/"+t+"-data.js";else n+=("true"==Kameleoon.Internals.runtime.parameters.kameleoonReplica?"r":"")+t+"/data.js";if(Runtime.disableCache)n+="?cache="+Utils.obtainRandomString(16);Kameleoon.Utils.forceNoFlicker("*");var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","utf-8");a.setAttribute("src",n);Runtime.headNode.appendChild(a)}};this.checkKameleoonGoals=function(){var e=[];for(var t=0,i=Configuration.goals.length;t<i;++t){var n=Configuration.goals[t];var a={goal:n};if("URL"==n.type){var o=new RegExp(n.url);if(o.test(Utils.computeCurrentPageCleanAbsoluteURL()))e.push(a)}if("PAGE_VIEWS"==n.type)if(Runtime.gathererRun){var r=Runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length;if((null==n.minPageViews||r>=n.minPageViews)&&(null==n.maxPageViews||r<=n.maxPageViews))e.push(a)}}if(e.length>0)this.processConversions(e);Runtime.conversionsProcessingEngagement=[];for(var t=0,i=Configuration.goals.length;t<i;++t){var n=Configuration.goals[t];if("ENGAGEMENT"==n.type)Runtime.conversionsProcessingEngagement.push({goal:n})}Utils.addEventListener(document,Runtime.mouseDownEvent,function(e){Kameleoon.Analyst.processConversions(Runtime.conversionsProcessingEngagement)},!0);Runtime.conversionsProcessingScroll=[];for(var t=0,i=Configuration.goals.length;t<i;++t){var n=Configuration.goals[t];if("SCROLL"==n.type)Runtime.conversionsProcessingScroll.push({goal:n})}Utils.addEventListener(document,"scroll",function(e){if(document.body){var t=[];for(var i=0,n=Runtime.conversionsProcessingScroll.length;i<n;++i){var a=Runtime.conversionsProcessingScroll[i].goal;if(!a.sent){var o=null,r=null;switch(a.scrollTrackingType){case"PIXELS_HEIGHT":o=Math.ceil(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight;r=a.scrollTrackingValue;break;case"PERCENTAGE":o=(Math.ceil(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight)/document.body.scrollHeight*100;r=a.scrollTrackingValue;break;case"ELEMENT":o=window.innerHeight;var s=Kameleoon.Utils.querySelectorAll(a.selector.queryValue);if(s.length>0)r=s[0].getBoundingClientRect().top+s[0].offsetHeight;break}if(null!==o&&null!==r&&r<=o){t.push(Runtime.conversionsProcessingScroll[i]);Runtime.conversionsProcessingScroll[i].goal.sent=!0}}}if(t.length>0)Kameleoon.Analyst.processConversions(t)}},!0);};this.processConversions=function(e){if(Runtime.gathererRun){var t=[];if(null!=Runtime.experiments)for(var i=0,n=Runtime.experiments.length;i<n;++i){var a=Runtime.experiments[i];var o=a.registeredVariationId;if(null!=o&&"none"!=o)t.push(a.id)}var r=[];for(var s=0,l=e.length;s<l;++s){var m=e[s];var c=m.goal;var u=!0===m.negative;if((u||"PAGE_VIEWS"!=c.type&&"TIME_SPENT"!=c.type&&"ENGAGEMENT"!=c.type||0==Runtime.Visitor.currentVisit.obtainNumberConversions(c.id))&&(!c.linkedExperimentId||-1!=t.indexOf(c.linkedExperimentId)))r.push({goalId:c.id,revenue:m.revenue?m.revenue:0,negative:u})}if(r.length>0)Kameleoon.Gatherer.trackConversions(r)}};this.checkTargetingSegmentsTargeting=function(e){var t=[];for(var i=0,n=e.length;i<n;++i){var a=e[i];if(null==a.numberTargetingCheckings)a.numberTargetingCheckings=0;if(this.checkIfTargetingMustBeComputed(a.targeting,a.rescheduleTargeting||0==a.numberTargetingCheckings,!1))t.push(a)}e=t;for(var i=0,n=e.length;i<n;++i){var a=e[i];var o=this.checkTargetingTree(null,a?a.targetingTree:null,!1);a.targeting=o.targeting;a.rescheduleTargeting=o.rescheduleTargeting;a.numberTargetingCheckings++}var r=[];for(var i=0,n=e.length;i<n;++i){var a=e[i];if(this.checkIfTargetingMustBeComputed(a.targeting,a.rescheduleTargeting,!1))r.push(a)}if(r.length>0)var s=Utils.setTimeout(function(){Utils.clearTimeout(s);Kameleoon.Analyst.processTargetingSegments.apply(Kameleoon.Analyst,[r])},Runtime.domReady?Runtime.PAGE_LOADED_POLL_DELAY:Runtime.PAGE_LOADING_POLL_DELAY)};this.checkContainersTargeting=function(e){var t=null;if(Runtime.simulationModeData){var i=Runtime.simulationModeData.targetingSegment;if(i)t=i.id}var r=[];for(var n=0,a=e.length;n<a;++n){var s=e[n];if(null==s.numberTargetingCheckings)s.numberTargetingCheckings=0;if(this.checkIfTargetingMustBeComputed(s.targeting,s.rescheduleTargeting||0==s.numberTargetingCheckings,!s.experimentContainer&&"CUMULATIVE_WEIGHT"==s.personalizationCheckConditionsRule))r.push(s)}e=r;for(var n=0,a=e.length;n<a;++n){var s=e[n];if(null!=t)if(t==s.targetingSegmentId||t==s.targetingSegment.id)s.forceTargeting=!0;if(!0===s.forceTargeting)s.targeting=!0;else{var l=!s.experimentContainer&&"CUMULATIVE_WEIGHT"==s.personalizationCheckConditionsRule;var m=this.checkTargetingTree(s,s.targetingSegment?s.targetingSegment.targetingTree:null,l);if(l)switch(s.microtargetingMatchType){case"GREATER":s.targeting=m.weight>(s.cumulativeWeightOfConditions||0);break;case"EQUAL":s.targeting=m.weight==(s.cumulativeWeightOfConditions||0);break;case"LOWER":s.targeting=m.weight<s.cumulativeWeightOfConditions;break}else s.targeting=m.targeting;s.rescheduleTargeting=m.rescheduleTargeting;s.numberTargetingCheckings++}if(!0===s.targeting)if(s.experimentContainer)Runtime.targetedExperiments=!0;else Runtime.targetedPersonalizations=!0}var _=[];for(var n=0,a=e.length;n<a;++n){var s=e[n];if(!1===s.targeting||!s.experimentContainer&&!0===s.targeting&&!1===s.exposition){this.associateContainerAndVariation(s,"reference","DISPLAYED_VARIATION");this.removeCSSStyleSheet(s)}if(this.checkIfTargetingMustBeComputed(s.targeting,s.rescheduleTargeting,!s.experimentContainer&&"CUMULATIVE_WEIGHT"==s.personalizationCheckConditionsRule))_.push(s)}if(_.length>0)var F=Utils.setTimeout(function(){Utils.clearTimeout(F);Kameleoon.Analyst.processContainers.apply(Kameleoon.Analyst,[_])},Runtime.PAGE_LOADING_POLL_DELAY);e.length&&Runtime.targetingsEvent.emit(e)};this.checkTargetingTree=function(e,t,i){var n;if(null==t){n={targeting:!0,rescheduleTargeting:!1};if(i)n.weight=0}else{if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,i)){n={targeting:t.targeting,rescheduleTargeting:!1};if(i)n.weight=t.weight}else{if(null!=t.targetingCondition)n=this.checkTargetingCondition(e,t.targetingCondition);else{var a=this.checkTargetingTree(e,t.leftChild,i);var o=Runtime.simulationMode||i;if(!o)switch(a.targeting){case!0:if(!t.orOperator)o=!0;break;case!1:if(t.orOperator)o=!0;break;case void 0:default:o=!0;break}var r=null;if(o)r=this.checkTargetingTree(e,t.rightChild,i);var s;switch(a.targeting){case!0:if(t.orOperator)s=!0;else switch(r.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break;case!1:if(t.orOperator)switch(r.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}else s=!1;break;case void 0:default:if(t.orOperator)switch(r.targeting){case!0:s=!0;break;case!1:s=void 0;break;case void 0:default:s=void 0;break}else switch(r.targeting){case!0:s=void 0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break}n={targeting:s,rescheduleTargeting:this.checkIfTargetingMustBeComputed(s,a.rescheduleTargeting||o&&r.rescheduleTargeting,i)};if(i){var l;if(t.orOperator)l=Math.max(a.weight,r.weight);else l=a.weight+r.weight;n.weight=l}}t.targeting=n.targeting;t.rescheduleTargeting=n.rescheduleTargeting;if(i)t.weight=n.weight}t.numberTargetingCheckings++}return n};this.checkTargetingCondition=function(e,t){var i;if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,void 0))i={targeting:t.targeting,rescheduleTargeting:!1};else{var n=Kameleoon.Analyst["evaluateTargeting_"+t.type];var a;if(null!=n)a=n.bind(this)(t,e);else a=null;if(null==a)a={targeting:void 0,rescheduleTargeting:!1};var o=a.targeting;if(!0!==t.include)if(void 0===o){if(!0===a.excludedUndefinedIsTargeted)o=!0}else o=!o;i={targeting:o,rescheduleTargeting:this.checkIfTargetingMustBeComputed(o,a.rescheduleTargeting,void 0)};t.targeting=i.targeting;t.rescheduleTargeting=i.rescheduleTargeting}if(!0===i.targeting)i.weight=t.weight;else i.weight=0;t.numberTargetingCheckings++;return i};this.checkIfTargetingMustBeComputed=function(e,t,i){var n=!0===t&&(void 0===e||!1===e&&!0===i);return n};this.checkCapping=function(e,t,i,n,a){if(Runtime.gathererRun&&null!=n.expositionFrequencySameVisit&&Kameleoon.Visitor.obtainContainerNumberActivations(t,i,null,a,!0,!1,!1,e)>=n.expositionFrequencySameVisit||null!=n.expositionFrequencySameVisitor&&null!=n.expositionFrequencySameVisitorDelaySeconds&&Kameleoon.Visitor.obtainContainerNumberActivations(t,i,a-1e3*n.expositionFrequencySameVisitorDelaySeconds,a,!0,!0,!1,e)>=n.expositionFrequencySameVisitor||n.cappingPerVisitorNumberExpositions&&Kameleoon.Visitor.obtainContainerNumberActivations(t,i,null,a,!0,!0,!1,e)>=n.expositionFrequencySameVisitorMax||n.cappingPerVisitorNumberExposedVisits&&Kameleoon.Visitor.obtainContainerNumberActivations(t,i,null,null,!0,!0,!0,e)>=n.exposedVisitsSameVisitorMax||n.cappingPerVisitorConvertGoal&&Kameleoon.Visitor.obtainNumberConversions(n.cappingPerVisitorGoalId)>0||null!=n.expositionFrequencyDelaySecondsBetweenTwoExpositions&&Kameleoon.Visitor.obtainContainerNumberActivations(t,i,a-1e3*n.expositionFrequencyDelaySecondsBetweenTwoExpositions,a,!0,!0,!1,e)>=1)return!1;return!0};this.initVariationCommands=function(e){if(!e||Runtime.editorMode||Runtime.kameleoonSelectionIframeMode)return;Runtime.currentContainer=e.container;if(e.redirections)this.preProcessRedirect(e);if(e.forceNoFlicker&&!Runtime.domReady){var t="";for(var i=0,n=e.elementSets.length;i<n;++i)t+=(0!=i?", ":"")+e.elementSets[i].selector;Kameleoon.Utils.forceNoFlicker(t)}if(!e.styleSheetAdded){this.addCSSStyleSheet(e.builtCssCodeLevel2,e.container,null);e.styleSheetAdded=!0}if(e.javaScriptCode&&!e.javaScriptCode.afterDOMReady)this.applyJavascriptCode(e);this.processVariationCommands(e)};this.processVariationCommands=function(t){if(!t)return;if(t.elementSets&&t.elementSets.length>0&&null==Kameleoon.Analyst.processElementSet){this.loadKameleoonFull(function(){this.processVariationCommands(t)}.bind(this));return}var e=t.container;if(t.javaScriptCode&&t.javaScriptCode.afterDOMReady&&!t.permanentRefreshActive)Utils.domReady(function(){Kameleoon.Analyst.applyJavascriptCode(t)});if(t.forceNoFlicker&&!t.permanentRefreshActive)Utils.removeBlockingStyleSheet();if(Runtime["enginePollerForVariation"+t.id]&&!t.permanentRefreshActive){window.clearInterval(Runtime["enginePollerForVariation"+t.id]);Runtime["enginePollerForVariation"+t.id]=null}if(!Runtime["enginePollerForVariation"+t.id]&&!Runtime.editorMode&&!Runtime.kameleoonSelectionIframeMode){t.permanentRefreshActive=!0;if(!Runtime.listenVariations)Runtime.listenVariations=[];Runtime.listenVariations.push(t);Runtime["enginePollerForVariation"+t.id]=!0;if(Runtime.cantUseMutationObserver)Runtime["enginePollerForVariation"+t.id]=Utils.setInterval(function(){Kameleoon.Analyst.processVariationCommands.apply(Kameleoon.Analyst,[t])},10)}};this.applyJavascriptCode=function(variation){if(variation.javaScriptCode&&variation.javaScriptCode.code&&!variation.javaScriptCode.evaluated){variation.javaScriptCode.evaluated=!0;var fileName="kameleoonVariationJavaScriptCode-"+variation.id+".js";try{eval(variation.javaScriptCode.code+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName,variation.container)}}};this.setMutationObserver=function(){if(Runtime.cantUseMutationObserver)return;Kameleoon.Analyst.fillInternalObjectsForMutationObserver();var e=document.documentElement,t;if(!Runtime.mutationObserver)Runtime.mutationObserver=new MutationObserver(function(e){e.forEach(function(e){var t=!0,i=e.addedNodes,n=e.removedNodes,a=Runtime.listenVariations;Kameleoon.Analyst.removeMutationElementsFromInternalObjects(n);Kameleoon.Analyst.addMutationElementsToInternalObjects(i);var o=Array.prototype.slice.call(i);var r=Array.prototype.slice.call(n);var s=o.concat(r);for(var l=0;l<s.length;++l){var m=s[l];var c=m.parentNode;if((Runtime.editorMode||Runtime.kameleoonSelectionIframeMode)&&m&&m.id&&"string"==typeof m.id&&null!==m.id.match("kameleoon"))if(m.closest)if(null!==m.closest(".KameleoonProtected"))t=!1;if(t&&m&&m.innerHTML&&"childList"===e.type)Kameleoon.Analyst.fillInternalObjectsForMutationObserver(m);if(t&&m&&a)a.forEach(function(t){if(t.elementSets)t.elementSets.forEach(function(e){if((!e.evaluated||!(e.options.autoGeneratedSelector||e.options.idSelector||e.options.domOperation))&&Kameleoon.Analyst.checkIDsForSelector(e)&&Kameleoon.Analyst.checkClassesForSelector(e)&&Kameleoon.Analyst.checkContainsTextesForSelector(e,m))if(!t.container||t.container.targeting){e.evaluated=!0;Kameleoon.Analyst.processElementSet(e,t,!1,t.permanentRefreshActive,t.editionMode,c)}});if(t.replaceData&&m.nodeType===Node.TEXT_NODE&&(!m.parentNode||"SCRIPT"!==m.parentNode.nodeName&&"STYLE"!==m.parentNode.nodeName)){var e=JSON.parse(t.replaceData);for(var i=0;i<e.length;++i){var n=new RegExp(e[i].toReplace,"gi");if(!e[i].disabled&&m.nodeValue&&n.test(m.nodeValue)){Kameleoon.Analyst.saveElementOriginalData(m);m.kameleoonData.powered=!0;m.nodeValue=m.nodeValue.replace(n,e[i].replaceBy)}}}});if(t&&m)for(var u=Runtime.waitingElementPresentObjects.length-1;u>=0;u-=1){var d=Runtime.waitingElementPresentObjects[u];if(d&&d.useAntiFlicker)if(Kameleoon.Analyst.checkIDsForSelector(d)&&Kameleoon.Analyst.checkClassesForSelector(d)&&Kameleoon.Analyst.checkContainsTextesForSelector(d,m)){var g=Utils.querySelectorAll(d.selector,c);if(0<g.length){Utils.runProtectedFunction(function(){d.callback(g)});Runtime.waitingElementPresentObjects.splice(u,1)}}}}})});t={attributes:!0,childList:!0,characterData:!0,subtree:!0};if("function"===typeof Runtime.mutationObserver.observe)Runtime.mutationObserver.observe(e,t)};this.addMutationElementsToInternalObjects=function(e){for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.id)if(-1===Runtime.addedIDs.indexOf("#"+i.id))Runtime.addedIDs.push("#"+i.id);if(i&&i.className&&"string"===typeof i.className){var n=i.className.split(" ");for(var a=0;a<n.length;++a)if(-1===Runtime.addedClasses.indexOf("."+n[a]))Runtime.addedClasses.push("."+n[a])}}};this.removeMutationElementsFromInternalObjects=function(e){for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.id)if(-1!==Runtime.addedIDs.indexOf("#"+i.id)){var n=Runtime.addedIDs.indexOf(i.id);Runtime.addedIDs.splice(n,1)}}};this.fillInternalObjectsForMutationObserver=function(e){if(!e)e=document;var t=e.getElementsByTagName("*");for(var i=0,n=t.length;i<n;++i){var a=t[i];if(a.id&&-1===Runtime.addedIDs.indexOf("#"+a.id))Runtime.addedIDs.push("#"+a.id);if(a.className&&"string"===typeof a.className){var o=a.className.split(" ");for(var r=0;r<o.length;++r)if(-1===Runtime.addedClasses.indexOf("."+o[r]))Runtime.addedClasses.push("."+o[r])}}};this.checkIDsForSelector=function(e){var t=e.selector;var i;if(e.currentQuery)i=e.currentQuery;var n;if(e.options)n=e.options.domReference;var a=[];if(t&&-1!==t.indexOf("#")){if(!e.selectorIDs||0===e.selectorIDs.length){if(-1!==t.indexOf("contains")){var o=t.match(/:contains\(['"]([\s\S]+)['"]\)/);var r=t.replace(o[0],"");a=r.match(/#([^\s:\[]+)/g)}else a=t.match(/#([^\s:\[>]+)/g);e.selectorIDs=a;if(i&&-1!==i.indexOf("#"))if(-1!==i.indexOf("contains")){var o=i.match(/:contains\(['"]([\s\S]+)['"]\)/);var s=i.replace(o[0],"");a=s.match(/#([^\s:\[]+)/g)}else a=i.match(/#([^\s:\[]+)/g);for(var l=0,m=a.length;l<m;++l)if(-1===e.selectorIDs.indexOf(a[l]))e.selectorIDs.push(a[l])}}else return!0;for(var c=0,u=e.selectorIDs.length;c<u;++c){var d=e.selectorIDs[c];if(-1!==d.indexOf("kameleoonElement")){if(n&&!Kameleoon.Analyst.checkIDsForSelector({selector:n,checkDomReference:!0}))return!1;if(e.checkDomReference)if(-1===Runtime.addedIDs.indexOf(d))return!1}else if(-1===Runtime.addedIDs.indexOf(d))return!1}return!0};this.checkClassesForSelector=function(e){var t=e.selector;var i=[];if(t&&-1!==t.indexOf(".")){if(!e.selectorClasses||0===e.selectorClasses.length){if(-1!==t.indexOf("contains")){var n=t.match(/:contains\(['"]([\s\S]+)['"]\)/);var a=t.replace(n[0],"");i=a.match(/\.([^\s.:\[]+)/g)}i=t.match(/\.([^\s.:\[]+)/g);e.selectorClasses=i}}else return!0;for(var o=0,r=e.selectorClasses.length;o<r;++o){var s=e.selectorClasses[o];if(-1===s.indexOf("kameleoon")&&-1===Runtime.addedClasses.indexOf(s))return!1}return!0};this.checkContainsTextesForSelector=function(e,t){var i=e.selector;var n;if(t&&t.nodeType==Node.TEXT_NODE)if(i&&-1!==i.indexOf("contains")){if(!e.selectorContainsText){var a=i.match(/:contains\(['"]([\s\S]+)['"]\)/);n=a[1];e.selectorContainsText=n;if(t.nodeValue&&-1===t.nodeValue.indexOf(n))return!1}}else return!1;return!0};this.processGlobalScript=function(){if(Configuration.globalScript&&!Runtime.globalScriptProcessed&&!Runtime.editorMode&&!Runtime.kameleoonSelectionIframeMode){Runtime.globalScriptProcessed=!0;var fileName="kameleoonGlobalScript.js";try{eval(Configuration.globalScript+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}}};this.performTargetingSegmentsTracking=function(e){if(Runtime.gathererRun){var t=[];var i=[];for(var n=0,a=e.length;n<a;++n){var o=e[n];if(o.track&&Configuration.useAudience)t.push(o.id);if(o.trackMentalistPrediction)i.push(o.id);if(o.mentalist&&Runtime.mentalistRun)Runtime.targetingSegmentsPredictions[o.id]=Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(o.id)}if(Runtime.mentalistRun)Kameleoon.Gatherer.trackMentalistPredictionSegmentTargeting(i);Kameleoon.Gatherer.trackTargetingSegments(t)}};this.performContainersTracking=function(containers){var containersTrackingNotPerformed=[];for(var i=0,l=containers.length;i<l;++i){var container=containers[i];if(container.trackingPerformed||!container.registeredVariation)continue;containersTrackingNotPerformed.push(container)}containers=containersTrackingNotPerformed;var containersKameleoonTrackingToTrack=[];var containersKameleoonTrackingNotToTrack=[];for(var i=0,l=containers.length;i<l;++i){var sendContainerTracking=!0;var container=containers[i];if(!container.experimentContainer){if("reference"!=container.displayedVariation.id)Runtime.displayedPersonalizations.push({id:container.id,name:container.name});if(container.api)Configuration.activePersonalizations.push(container.name);if("GLOBAL_CAPPING_NUMBER_VISITORS"==container.notExposedReason||"SCHEDULING"==container.notExposedReason||"INTERACTIONS"==container.notExposedReason||"PRIORITY"==container.notExposedReason||"EXPOSITION_FREQUENCY"==container.notExposedReason)sendContainerTracking=!1}var variation=container.registeredVariation;if(container.mentalistEnabled)variation.name+=" (Predicteo)";if(sendContainerTracking&&(container.experimentContainer||container.exposition||!container.exposition&&"CUSTOM_EXPOSITION_RATE"==container.notExposedReason))this.validateTrackingRequest(function(e){if(e.googleAnalyticsTracking)this.processGoogleAnalyticsTracking(e);if(e.universalAnalyticsTracking)this.processUniversalAnalyticsTracking(e);if(e.atInternetTracking)this.processATInternetTracking(e);}.bind(this),container);(container.kameleoonTracking&&sendContainerTracking?containersKameleoonTrackingToTrack:containersKameleoonTrackingNotToTrack).push({type:container.experimentContainer?"EXPERIMENT":"PERSONALIZATION",id:container.id,variationId:"reference"==variation.id?null:container.experimentContainer?variation.id:1,mentalistDecision:container.mentalistEnabled?!0:!1,train:container.train?!0:!1});if(container.javaScriptTracking){var fileName="kameleoonContainerJavaScriptTracking-"+container.id+".js";try{eval(container.javaScriptTracking+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName)}}container.trackingPerformed=!0}if(Runtime.gathererRun)Kameleoon.Gatherer.trackContainers(containersKameleoonTrackingToTrack,containersKameleoonTrackingNotToTrack)};this.addCSSStyleSheet=function(e,t,i){if(!e)return;var n=i?i:document;var a="kameleoonStyleSheet"+(t?"-"+t.id:"");var o=i?i.getElementById(a):null;var r="";if(o){r=o.textContent;o.parentNode.removeChild(o)}var s=n.createElement("style");s.className="KameleoonStyleSheet";s.setAttribute("id",a);s.setAttribute("rel","stylesheet");s.setAttribute("type","text/css");s.setAttribute("media","screen");var l=r+e;if(s.styleSheet)s.styleSheet.cssText=l;else s.appendChild(document.createTextNode(l));if(i)n.getElementsByTagName("head")[0].appendChild(s,n.getElementsByTagName("head")[0].firstChild);else Runtime.headNode.appendChild(s);if(t)t.loadedCSSStyleSheet=s};this.removeCSSStyleSheet=function(e){if(e.loadedCSSStyleSheet){var t=e.loadedCSSStyleSheet.id.replace("kameleoonStyleSheet-","");if(-1==t.indexOf(",")){Runtime.headNode.removeChild(e.loadedCSSStyleSheet);e.loadedCSSStyleSheet=null}else e.loadedCSSStyleSheet.id="kameleoonStyleSheet-"+t.replace(new RegExp(e.id+",?"),"")}};this.findExperiment=function(e){return Utils.findObjectWithId(e,Runtime.experiments)};this.findVariation=function(e){return Utils.findObjectWithId(e,Runtime.variations)};this.associateContainerAndVariation=function(e,i,t){var n=!0;var a=!0;if("REGISTERED_VARIATION"==t)a=!1;if("DISPLAYED_VARIATION"==t)n=!1;if("none"==i){e.trackingPerformed=!0;i="reference";n=!1}var o=this.findVariation(i);var r="Reference";if(e&&e.variations)e.variations.forEach(function(e,t){if(e.id&&e.name&&e.id.toString()==i)r=e.name});var s=e.associatedVariation;if(e&&s&&i==s.id)r=s.name;if(e&&n)e.registeredVariation={id:i,name:r};if(o){if(e&&(Runtime.simulationMode&&"simulation"==e.id||!e.associationMade)){if(n){e.registeredVariation=o;e.associationMade=!0}if(a)e.displayedVariation=o;o.container=e;if(e.experimentContainer)o.experiment=e;else o.personalization=e}}else e.displayedVariation={id:i,name:r};if(e.displayedVariation&&!e.displayedVariation.elementSets)this.loadVariationData(e)};this.writeExperimentLocalData=function(e){var t=e.registeredVariationId+(e.mentalistEnabled?"-mentalist":"")+"/"+e.assignmentTime+"/"+e.counterActive;if(!e.simulationMode)Utils.createLocalData("kameleoonExperiment-"+e.id,t,e.cookieDuration?e.cookieDuration:30,e.cookieDomain,"LS",!1)};this.saveElementOriginalData=function(e,t){if(!e||e.kameleoonData&&e.kameleoonData.originalData)return;if(!e.kameleoonData)e.kameleoonData={};e.kameleoonData.originalData={};e.kameleoonData.originalData.attributesData={};if(e.parentNode)e.kameleoonData.originalData.parentNode=e.parentNode;if(e.nextSibling){e.kameleoonData.originalData.nextSibling=e.nextSibling;if(3===e.nextSibling.nodeType&&e.previousSibling&&3===e.previousSibling.nodeType&&t&&("INSERT_AFTER"===t||"INSERT_BEFORE"===t)){var i=document.createComment("ReplaceHolderComment");var n=e.nextSibling.parentNode.insertBefore(i,e.nextSibling);e.kameleoonData.originalData.placeholderComment=n}}if(e.href)e.kameleoonData.originalData.href=e.getAttribute("href");if(e.nodeValue)e.kameleoonData.originalData.nodeValue=e.nodeValue;if(e.attributes)for(var a=0,o=e.attributes.length;a<o;++a){var r=e.attributes[a];e.kameleoonData.originalData.attributesData[r.nodeName]=r.nodeValue}};this.processUserPosition=function(e,t,i,n){if(i){switch(i.positionMode){case"ABSOLUTE_KEEP_SPACE":case"ABSOLUTE":if(n){var a="ABSOLUTE_KEEP_SPACE"==i.positionMode?e.kameleoonData.originalData.originalNode.offsetWidth:e.offsetWidth;if(a)Utils.setStyle(t,"width",a+"px","th"!=t.nodeName.toLowerCase()&&"td"!=t.nodeName.toLowerCase())}var o=null;var r=!1;if(i.referenceElement){o=Utils.querySelectorAll(i.referenceElement)[0];r=!0}if(!o)o=document.body;if(o&&t.parentNode!=o){t.parentNode.removeChild(t);o.appendChild(t);if(!t.kameleoonData)t.kameleoonData={};t.kameleoonData.moved=!0}Utils.setStyle(t,"position","absolute",!1);var s=Utils.obtainComputedStyle(t).left.replace("px","")/i.referenceWidth;Utils.setStyle(t,"left",Math.round(s*o.offsetWidth)+"px",!0);if(r)this.addRelativePositionToReferenceElement(o);break;case"RELATIVE":Utils.setStyle(t,"position","",!1)}Utils.setStyle(t,"top","",!1);Utils.setStyle(t,"left","",!1);Utils.setStyle(t,"right","",!1);Utils.setStyle(t,"bottom","",!1);if(!n)Utils.setStyle(t,"width","",!1);Utils.setStyle(t,"height","",!1)}};this.addRelativePositionToReferenceElement=function(e){if("absolute"!=Utils.obtainComputedStyle(e).position&&document.body!=e)Utils.setStyle(e,"position","relative",!1)};this.refreshForScreenResize=function(){for(var e=Kameleoon.poweredNodes.length,t=e-1;t>=0;--t)this.processUserPosition(Kameleoon.poweredNodes[t].originalElement,Kameleoon.poweredNodes[t].baseElement,data?data.userPosition:null,!0)};this.obtainCounterTrackingRequestPrefix=function(e){return"//tlp-"+Configuration.trackerNodeCodes[Math.abs(Utils.computeStringHash(Configuration.siteCode))%Configuration.trackerNodeCodes.length]+"."+Configuration.DOMAIN+"/counter.gif?"};this.obtainHeatMapTrackingRequestPrefix=function(){return"//tlp-"+Kameleoon.Analyst.obtainTrackerNodeCodeRandom()+"."+Configuration.DOMAIN+"/heatmap.gif?"};this.obtainProductTrackingRequestPrefix=function(){return"//tlp-"+this.obtainTrackerNodeCodeRandom()+"."+Configuration.DOMAIN+"/sitemapper.gif?"};this.obtainTrackerNodeCodeRandom=function(){return Configuration.trackerNodeCodes[Math.floor(Configuration.trackerNodeCodes.length*Math.random())]},this.isValidTrackerNodeCode=function(e){return Configuration.trackerNodeCodes.indexOf(e)>=0};this.obtainTrackerNodeLogParserRandom=function(e){return Math.floor(Math.random()*Configuration.trackerNodeNumberLogParsers[Configuration.trackerNodeCodes.indexOf(e)])};this.isValidTrackerNodeLogParser=function(e,t){return t>=0&&t<Configuration.trackerNodeNumberLogParsers[Configuration.trackerNodeCodes.indexOf(e)]};this.processRequestsToValidate=function(){var e=Runtime.trackerRequestsToValidate;if(null!=e){var t=Configuration.trackerExcludedIPRanges.length>0;var i=Configuration.requestsDataLegalControl;if((t&&Runtime.ipIsTrackerAccepted||!t)&&(i&&Runtime.saveLocalDataAllowed||!i)){for(var n=0,a=e.length;n<a;++n)e[n].callback(e[n].parameters);delete Runtime.trackerRequestsToValidate}}};this.validateTrackingRequest=function(e,t){if(null!=e){var i=Runtime.ipIsTrackerAccepted;var n=Configuration.trackerExcludedIPRanges.length>0;var a=Configuration.requestsDataLegalControl;if(!n&&!a)e(t);else if(n&&null==i||a&&!Runtime.saveLocalDataAllowed){if(null==Runtime.trackerRequestsToValidate)Runtime.trackerRequestsToValidate=[];Runtime.trackerRequestsToValidate.push({callback:e,parameters:t})}else(n&&i||!n)&&e(t)}};this.processSimulationsData=function(){}};Kameleoon.Analyst=new Kameleoon.Classes.Analyst;Kameleoon.Classes.CommandQueue=function(oldKameleoonQueue){this.commands=oldKameleoonQueue||[];var kameleoonCommandsAllow=["Kameleoon.API.Events.trigger","Kameleoon.API.Data.setCustomData","Kameleoon.API.Goals.processConversion"];this.push=function(o){executeCommand(o)};this.treatCommands=function(){if(isNotEmpy(this.commands)){this.commands.forEach(function(o){executeCommand(o)});this.commands=[]}};var executeCommand=function(command){var commandFunctionName=command[0];if("function"===typeof command)try{command()}catch(o){}else if(allowCommand(commandFunctionName))try{var arrayOfArguments=Array.prototype.slice.call(command,1);eval(commandFunctionName).apply(Kameleoon.API,arrayOfArguments)}catch(o){}};var allowCommand=function(o){return-1!==kameleoonCommandsAllow.indexOf(o)};var isNotEmpy=function(o){return o.length>0}};Kameleoon.Classes.Container=function(t){for(var n in t)this[n]=t[n];this.targeting=void 0;if(!this.targetingSegment)this.targetingSegment=Kameleoon.Internals.runtime.targetingSegments.find(function(t){return t.id==this.targetingSegmentId}.bind(this))||{};this.numberTargetingCheckings=0};Kameleoon.Classes.Runtime=function(e){var t=e;this.JS_EDITOR_URL=t.BASE_EDITOR_URL+"script/editor.js";this.PAGE_LOADING_POLL_DELAY=75;this.PAGE_LOADED_POLL_DELAY=250;this.OPEN_WEATHER_MAP_APPID="c47db1e8ab50752e5f42c72f175b5210";this.OPEN_WEATHER_MAP_WEATHER_URL="//api.openweathermap.org/data/2.5/weather?APPID="+this.OPEN_WEATHER_MAP_APPID+"&";this.OPEN_WEATHER_MAP_WEATHER_FORECAST_URL="//api.openweathermap.org/data/2.5/forecast?APPID="+this.OPEN_WEATHER_MAP_APPID+"&";e.trackerNodeCodes=["01","02","03","04","05","06","07"];e.trackerNodeNumberLogParsers=[6,6,6,6,6,6,6];this.Analyst={};this.eventListeners=[];this.loadTime=(new Date).getTime();this.timeoutIds={};this.intervalIds={};this.addedIDs=[];this.addedClasses=[];this.requestedVariations=[];this.touchMoveEvent=!1;this.waitingScripts=[];this.pageElementSets=[];this.waitingElementPresentObjects=[];this.pageStartTime=(new Date).getTime();this.virtualRootElement=document.createElement("div");this.displayedPersonalizations=[];this.errorLoggerIds=[]};Kameleoon.Classes.Utils=function(runtime){var Runtime=runtime;this.LOCAL_STORAGE_OBFUSCATED_KEYS={kameleoonData:!0,kameleoonDataSimulation:!0};this.processPageLoaded=function(){Runtime.pageLoaded=!0;this.removeBlockingStyleSheet();for(var e=0,t=Runtime.variations.length;e<t;++e)if(Runtime["enginePollerForVariation"+Runtime.variations[e].id]){window.clearInterval(Runtime["enginePollerForVariation"+Runtime.variations[e].id]);Runtime["enginePollerForVariation"+Runtime.variations[e].id]=null}}.bind(this);this.addEventListener=function(e,t,n,a){var r=e.addEventListener(t,n,a);Runtime.eventListeners.push({element:e,eventType:t,actionFunction:n,useCapture:a});return r};this.setTimeout=function(){var e=window.setTimeout.apply(window,arguments);Runtime.timeoutIds[e]=!0;return e};this.clearTimeout=function(e){delete Runtime.timeoutIds[e];window.clearTimeout(e)};this.setInterval=function(){var e=window.setInterval.apply(window,arguments);Runtime.intervalIds[e]=!0;return e};this.clearInterval=function(e){delete Runtime.intervalIds[e];window.clearInterval(e)};this.findObjectWithId=function(e,t){for(var n=0,a=t.length;n<a;++n){var r=t[n];if(e==r.id)return r}return null};this.computeCurrentPageCanonicalURL=function(){if(null==Runtime.currentPageCanonicalURL){var e=this.querySelectorAll('link[rel="canonical"]');if(e.length>0)Runtime.currentPageCanonicalURL=e[0].href}return Runtime.currentPageCanonicalURL};this.computeCurrentPageCleanAbsoluteURL=function(){if(null==Runtime.currentPageCleanAbsoluteURL){Runtime.currentPageCleanAbsoluteURL=this.computeURLNoKameleoonParameters(this.computeCurrentPageAbsoluteURLNoProxyMode());try{Runtime.currentPageCleanAbsoluteURL=decodeURIComponent(Runtime.currentPageCleanAbsoluteURL)}catch(e){}}return Runtime.currentPageCleanAbsoluteURL};this.computeCurrentPageCleanRelativeURL=function(){if(null==Runtime.currentPageCleanRelativeURL)Runtime.currentPageCleanRelativeURL=this.computeRelativeURL(this.computeCurrentPageCleanAbsoluteURL());return Runtime.currentPageCleanRelativeURL},this.computeCurrentPageAbsoluteURLNoProxyMode=function(){if(null==Runtime.currentPageAbsoluteURLNoProxyMode){if(Runtime.proxyMode){var e=Runtime.parameters.kameleoonExperimentId;if(null==e)e=Runtime.parameters["kameleoon-experiment-id"];if(null!=e)for(var t=0,n=Runtime.experiments.length;t<n;++t){var a=Runtime.experiments[t];if(a.id==e){Runtime.currentPageAbsoluteURLNoProxyMode=a.baseURL;break}}}if(null==Runtime.currentPageAbsoluteURLNoProxyMode)Runtime.currentPageAbsoluteURLNoProxyMode=window.location.href}return Runtime.currentPageAbsoluteURLNoProxyMode};this.computeURLNoKameleoonParameters=function(e){return e.replace(/(\?|&|#)kameleoon[^&#]*/g,"")};this.computeURLRegExpNoKameleoonParameters=function(e){return e?e.replace(/(\\\?|&|#)kameleoon[^&#()]*/g,""):null};this.computeRelativeURL=function(e){var t=document.createElement("a");t.href=e;return t.pathname+t.search+t.hash};this.computeStringSha256=function(e){var t=1,n,a=[],r=[];while(++t<18)for(n=t*t;n<312;n+=t)a[n]=1;function i(e,t){return Math.pow(e,1/t)%1*4294967296|0}for(t=1,n=0;t<313;)if(!a[++t]){r[n]=i(t,2);a[n++]=i(t,3)}function o(e,t){return e>>>t|e<<32-t}var l=r.slice(t=0),s=this.encodeUTF8(e),u=[],c=s.length,m=[],f,d,h;for(;t<c;)m[t>>2]|=(255&s.charCodeAt(t))<<8*(3-t++%4);c*=8;m[c>>5]|=128<<24-c%32;m[h=c+64>>5|15]=c;for(t=0;t<h;t+=16){f=l.slice(n=0,8);for(;n<64;f[4]+=d){if(n<16)u[n]=m[n+t];else u[n]=(o(d=u[n-2],17)^o(d,19)^d>>>10)+(0|u[n-7])+(o(d=u[n-15],7)^o(d,18)^d>>>3)+(0|u[n-16]);f.unshift((d=(f.pop()+(o(b=f[4],6)^o(b,11)^o(b,25))+((b&f[5]^~b&f[6])+a[n])|0)+(0|u[n++]))+(o(c=f[0],2)^o(c,13)^o(c,22))+(c&f[1]^f[1]&f[2]^f[2]&c))}for(n=8;n--;)l[n]=f[n]+l[n]}for(s="";n<63;)s+=(l[++n>>3]>>4*(7-n%8)&15).toString(16);return s};this.computeStringHash=function(e,t){e=t?this.computeStringSha256(e):e;var n=0;for(var a=0;a<e.length;++a){n=(n<<5)-n+e.charCodeAt(a);n&=n}return n};this.isInsideHoursMinutesRange=function(e,t,n,a,r,i){if(0==a){n--;if(-1==n)n=23;a=60}if(n<e||n==e&&a<t){n+=24;if(r<e||r==e&&i<t)r+=24}var o=60*(60*r+i)*1e3;var l=60*(60*e+t)*1e3;var s=60*(60*n+a)*1e3;return o>=l&&o<s};this.seededRandom=function(e,t){if(t){var n=Kameleoon.Utils.computeStringSha256(e);return parseInt(n,16)/Math.pow(2,256)}var n=this.computeStringHash(e);n=(9301*Math.abs(n)+49297)%233280;return n/233280};this.testEmptyMap=function(e){return this.JSONStringify(e)===this.JSONStringify({})};this.JSONParse=function(string){return"undefined"!=typeof JSON&&JSON.parse?JSON.parse(string):eval("("+string+")")};this.JSONStringify=function(e){var t=null;if("undefined"!=typeof JSON&&JSON.stringify&&("[]"===JSON.stringify([])||!e.toJSON)){var n=Array.prototype.toJSON;if(n)delete Array.prototype.toJSON;t=JSON.stringify(e);if(n)Array.prototype.toJSON=n}else if(e.toJSON&&"[]"===[].toJSON())t=e.toJSON();else if("undefined"!=typeof JSON&&JSON.encode&&"[]"===JSON.encode([]))t=JSON.encode(e);return t};this.performBeaconServerCall=function(e,t,n,a){var r=new XMLHttpRequest;r.open("GET",e,!0);if(t)r.onreadystatechange=function(e){t.bind(r)(e)};if(n){r.onerror=function(e){n.bind(r)(e)};r.ontimeout=function(e){n.bind(r)(e)}}r.timeout=parseInt(a)||15*60*1e3;r.send()};this.runProtectedFunction=function(e){try{e()}catch(e){if("undefined"!==typeof console&&console.log){console.log("An error occurred in one of your Kameleoon custom JavaScript functions, please check your code");console.log(e,e.message)}Kameleoon.Utils.processPageLoaded()}};this.obtainComputedStyle=function(e){if(window.getComputedStyle){var t=getComputedStyle(e,"");return t?t:{backgroundImage:"none"}}else return e.currentStyle};this.setStyle=function(e,t,n,a){Kameleoon.Analyst.saveElementOriginalData(e);var r=e.style.cssText;if(r){r=r.replace(/^\s+|\s+$/g,"");var i=new RegExp("(^|;)(\\s*"+t+"(.*?);)");r=r.replace(i,"$1");if(r){if(r.lastIndexOf(";")<r.length-2)r+=";";if(r.lastIndexOf(" ")!=r.length-1&&n)r+=" "}}else r="";var o=r+(n?t+": "+n+(a?" !important;":";"):"");e.style.cssText=o};this.processMessageEvent=function(event){if("string"!==typeof event.data)return;if("obtainTagCommanderVariableNames"==event.data){var tagCommanderVariableNames=[];if(window.tc_vars)for(var tagCommanderVariableName in window.tc_vars)tagCommanderVariableNames.push(tagCommanderVariableName);event.source.postMessage("tagCommanderVariableNames"+Kameleoon.Utils.JSONStringify(tagCommanderVariableNames),event.origin);return}if(0==event.data.indexOf("checkKameleoonScriptPresent")){if("https://back-office."+Kameleoon.Internals.configuration.DOMAIN==event.origin){var resultMessage="";var obtainScriptInstallationCode=event.data.replace("checkKameleoonScriptPresent","");eval(obtainScriptInstallationCode);event.source.postMessage(resultMessage,event.origin)}return}if(Runtime.iframeLocalStorage&&Runtime.postMessageOrigin==event.origin)try{var messageData=Kameleoon.Utils.JSONParse(event.data);if(messageData.kameleoonMessage){if(messageData.callbackId){var callback=Runtime.postMessageCallbacks[messageData.callbackId];delete Runtime.postMessageCallbacks[messageData.callbackId];callback&&callback(messageData.data)}if(null!=messageData.type)Kameleoon.Utils.processStorageData(messageData)}}catch(e){}};this.processLocalMessageEvent=function(e){var t=null==e.key?[""]:e.key.split("-");var n=t[0];if(-1!=n.indexOf("kameleoon")){var a;if(null==e.newValue)a=null;else try{a=JSON.parse(e.newValue).value}catch(e){return}var r={};switch(n){case"kameleoonExperiment":r.type=n;var i=t[1];r.experimentId=isNaN(i)?i:parseInt(i);var o;if(null==a)o=null;else{var l=a.split("/")[0];o=isNaN(l)?l:parseInt(l)}r.registeredVariationId=o;break;case"kameleoonPersonalizations":r.type=n;r.active=null==a?null:"true"==a.split("/")[0];break;case"kameleoonData":case"kameleoonDataSimulation":r.type=n;r.value=null==a?null:a;break;case"kameleoonLocalDataConsent":r.type=n;r.saveLocalDataAllowed=null==a?null:a;break}if(null!=r.type)Kameleoon.Utils.processStorageData(r)}};this.processStorageData=function(e){if(Runtime.setupAfterLocalDataRetrieval){if(this.LOCAL_STORAGE_OBFUSCATED_KEYS[e.type])e.value=Kameleoon.Utils.JSONParse(Kameleoon.Utils.unobfuscateString(e.value));switch(e.type){case"kameleoonExperiment":if(null!=Runtime.experiments)for(var t=0,n=Runtime.experiments.length;t<n;++t){var a=Runtime.experiments[t];if(e.experimentId==a.id){a.registeredVariationId=e.registeredVariationId;break}}break;case"kameleoonPersonalizations":Runtime.personalizationsActive=e.active;break;case"kameleoonData":case"kameleoonDataSimulation":if("kameleoonData"==e.type&&!Runtime.simulationMode||"kameleoonDataSimulation"==e.type&&Runtime.simulationMode){Runtime.storedData=e.value;if(Runtime.gathererRun)Kameleoon.Visitor.setupFromStoredData(!1)}break;case"kameleoonLocalDataConsent":if(e.saveLocalDataAllowed)if(null==Runtime.saveLocalDataAllowed)Kameleoon.Analyst.allowSaveLocalData();break}}};this.addPostMessageCallback=function(e){var t=Math.random().toString();Runtime.postMessageCallbacks[t]=e;return t};this.postMessageToExternalIframe=function(e){if(!Runtime.externalIframe||!Runtime.externalIframe.contentWindow){if(window.kameleoonIframeURL){var t=document.createElement("iframe");t.src=window.kameleoonIframeURL;t.id="kameleoonExternalIframe";t.style="float: left !important; opacity: 0.0 !important; width: 0px !important; height: 0px !important;";t.onload=function(){Runtime.externalIframe=t;Runtime.externalIframe.contentWindow.postMessage("kameleoon"+e,"*")};document.head.appendChild(t)}}else Runtime.externalIframe.contentWindow.postMessage("kameleoon"+e,"*")};this.encodeString=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n="";var a,r,i,o,l,s,u;var c=0;e=this.encodeUTF8(e);while(c<e.length){a=e.charCodeAt(c++);r=e.charCodeAt(c++);i=e.charCodeAt(c++);o=a>>2;l=(3&a)<<4|r>>4;s=(15&r)<<2|i>>6;u=63&i;if(isNaN(r))s=u=64;else if(isNaN(i))u=64;n=n+t.charAt(o)+t.charAt(l)+t.charAt(s)+t.charAt(u)}return n};this.decodeString=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n="";var a,r,i;var o,l,s,u;var c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){o=t.indexOf(e.charAt(c++));l=t.indexOf(e.charAt(c++));s=t.indexOf(e.charAt(c++));u=t.indexOf(e.charAt(c++));a=o<<2|l>>4;r=(15&l)<<4|s>>2;i=(3&s)<<6|u;n+=String.fromCharCode(a);if(64!=s)n+=String.fromCharCode(r);if(64!=u)n+=String.fromCharCode(i)}n=this.decodeUTF8(n);return n};this.obfuscateString=function(e){var t="";for(var n=0,a=e.length;n<a;n+=1){var r=e[n];if("’"==r)r="'";t+=String.fromCharCode(r.charCodeAt(0)+16)}return t};this.unobfuscateString=function(e){var t="";for(var n=0,a=e.length;n<a;n+=1)t+=String.fromCharCode(e[n].charCodeAt(0)-16);return t};this.encodeUTF8=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var a=e.charCodeAt(n);if(a<128)t+=String.fromCharCode(a);else if(a>127&&a<2048){t+=String.fromCharCode(a>>6|192);t+=String.fromCharCode(63&a|128)}else{t+=String.fromCharCode(a>>12|224);t+=String.fromCharCode(a>>6&63|128);t+=String.fromCharCode(63&a|128)}}return t};this.decodeUTF8=function(e){var t="";var n=0;var a=c1=c2=0;while(n<e.length){a=e.charCodeAt(n);if(a<128){t+=String.fromCharCode(a);n++}else if(a>191&&a<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((31&a)<<6|63&c2);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3);n+=3}}return t};this.saveStoredData=function(e){this.createLocalData(Runtime.simulationMode?"kameleoonDataSimulation":"kameleoonData",Runtime.storedData||{},Runtime.simulationMode?1/24:380,null,"LS",!0,e)};this.createLocalData=function(e,t,n,a,r,i,o,l){var s="LS"==r?!0:"COOKIE"==r?!1:!0;var u=(new Date).getTime();if(!l&&!Runtime.saveLocalDataAllowed){var c=s?"LS":"COOKIE";if(null==Runtime.localDataMap)Runtime.localDataMap={};if(null==Runtime.localDataMap[c])Runtime.localDataMap[c]={};Runtime.localDataMap[c][e]={name:e,value:t,days:n,domain:a,forceLocalAccess:r,jsonFormat:i,creationTime:u};if(s)o&&o();return}if(s){var m=u+24*n*60*60*1e3;if(Runtime.iframeLocalStorage)this.postMessageToExternalIframe(this.JSONStringify({type:"set",key:e,data:{value:this.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(this.JSONStringify(t))||t,date:m},callbackId:this.addPostMessageCallback(o)}));else{localStorage.setItem(e,this.JSONStringify({value:this.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(this.JSONStringify(t))||t,date:m}));o&&o()}}else{var f="";if(n){var m=new Date(u+24*n*60*60*1e3);f="; expires="+m.toGMTString()}if("CURRENT_HOST"!=a){a=a||this.obtainCurrentRootDomain();f+="; domain="+a}document.cookie=e+"="+(i?this.JSONStringify(t):t)+f+"; path=/"}};this.readLocalData=function(t,e,n){var a="LS"==e?!0:"COOKIE"==e?!1:!0;var r=(new Date).getTime();try{if(!Runtime.saveLocalDataAllowed){var i=Runtime.localDataMap;var o=a?"LS":"COOKIE";if(null!=i&&null!=i[o]&&null!=i[o][t]){var l=i[o][t];if(r-24*l.days*60*60*1e3>=l.creationTime)delete i[o][t];else return l.value}}if(a){var l;try{l=localStorage&&localStorage.getItem(t);if(!l)return null;if(this.LOCAL_STORAGE_OBFUSCATED_KEYS[t])l=this.unobfuscateString(l);l=this.JSONParse(l)}catch(e){l=localStorage&&localStorage.getItem(t);if(!l)return null;l=this.JSONParse(l);if(this.LOCAL_STORAGE_OBFUSCATED_KEYS[t])l.value=this.JSONParse(this.unobfuscateString(l.value))}if(r>l.date){localStorage.removeItem(t);return null}return l.value}else{var s=null;var u=document.cookie.split(";");for(var c=0,m=u.length;c<m;++c){var f=u[c];var d=f.indexOf("=");if(f.substring(0,d).trim()==t){var h=f.substring(d+1);s=n&&Kameleoon.Utils.JSONParse(h)||h;break}}return s}}catch(e){}return null};this.eraseLocalData=function(e,t,n){var a="LS"==n?!0:"COOKIE"==n?!1:!0;if(!Runtime.saveLocalDataAllowed){var r=Runtime.localDataMap;var i=a?"LS":"COOKIE";if(null!=r&&null!=r[i]&&null!=r[i][e])delete r[i][e]}if(a)if(Runtime.iframeLocalStorage)this.postMessageToExternalIframe(this.JSONStringify({type:"remove",key:e,callbackId:this.addPostMessageCallback(null)}));else localStorage.removeItem(e);else this.createLocalData(e,"",-1,t,"COOKIE",!1,null,!0)};this.obtainCurrentRootDomain=function(){if(null==Runtime.currentRootDomain){var e=window.location.hostname.split(".");var t="";for(var n=0,a=e.length;n<a;n++){if(n>0)t="."+t;t=e[a-n-1]+t;this.createLocalData("kameleoonTestCookie","test",1,t,"COOKIE",!1,void 0,!0);if(this.readLocalData("kameleoonTestCookie","COOKIE",!1)){this.eraseLocalData("kameleoonTestCookie",t,"COOKIE");Runtime.currentRootDomain=t;break}}}return Runtime.currentRootDomain};this.obtainRandomString=function(e,t){if(null==t)t=Kameleoon.Analyst.CODE_ALPHABET;var n=t.length;var a="";for(var r=0;r<e;++r){var i=Math.floor(Math.random()*n);a+=t.substring(i,i+1)}return a};this.parseParameters=function(){var t={};var e=window.location.search.substring(1);if(e){e=e.split("&");for(var n=0,a=e.length;n<a;++n){var r=e[n].split("=");try{t[decodeURIComponent(r[0])]=r[1]?decodeURIComponent(r[1]):null}catch(e){t[unescape(r[0])]=r[1]?unescape(r[1]):null}}}e=window.location.hash.substring(1);if(Runtime.firefox)e=window.location.toString().substring(window.location.toString().indexOf("#")+1);e=e.replace(/\?/g,"&");if(e){e=e.split("&");for(var n=0,a=e.length;n<a;++n){var r=e[n].split("=");try{t[decodeURIComponent(r[0])]=r[1]?decodeURIComponent(r[1]):null}catch(e){t[unescape(r[0])]=r[1]?unescape(r[1]):null}}}return t};this.addParameterToURL=function(e,t,n){if(n)return e+(-1==e.indexOf("#")?"#":"&")+t;var a="";if(-1!=e.indexOf("#")){a=e.substr(e.indexOf("#"));e=e.substr(0,e.indexOf("#"))}e+=(-1==e.indexOf("?")?"?":"&")+t+a;return e};this.removeBlockingStyleSheet=function(){var e=document.getElementById("kameleoonPageLoading");if(e&&e.parentNode)e.parentNode.removeChild(e)};this.domReady=function(e){if("complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState)return e();var t=!1;window.addEventListener("load",function(){if(t)return;t=!0;e()},!1);return Kameleoon.Utils.addEventListener(document,"DOMContentLoaded",function(){if(t)return;t=!0;e()},!1)};this.obtainDepth=function(e){var t=0;while(null!==e.parentNode){++t;e=e.parentNode}return t};this.collectionToArray=function(e){var t=[];for(var n=0,a=e.length;n<a;++n)t.push(e[n]);return t};this.getLocale=function(e){var t=null;if(navigator)if(navigator.language)t=navigator.language;else if(navigator.browserLanguage)t=navigator.browserLanguage;else if(navigator.systemLanguage)t=navigator.systemLanguage;else if(navigator.userLanguage)t=navigator.userLanguage;if("fr-FR"==t)t="fr";if("en-US"==t)t="en";if(e&&(!t||"fr"!=t))t="en";return t};this.callJavaScriptCode=function(e){var t=document.createElement("script");t.type="text/javascript";Runtime.headNode.appendChild(t);t.appendChild(document.createTextNode(e))};this.checkElementLoaded=function(e){if(!e||!e.parentNode)return!1;return e.nextSibling?!0:this.checkElementLoaded(e.parentNode)};this.checkElementIsInDocument=function(e,t){var n=null,a=document;if(t.context){n=Kameleoon.Utils.querySelectorAll(t.context);if(n[0])a=n[0].contentWindow.document}while(e&&e!=a.documentElement&&e!=Runtime.virtualRootElement)if(e.parentNode)e=e.parentNode;else return!1;return e==a.documentElement?!0:"VIRTUAL"};this.clone=function(e){return this.JSONParse(this.JSONStringify(e))};this.treatContainsSelector=function(e){var t={},n;function a(e,t){var n=!1;if(t.textContent&&-1!==t.textContent.indexOf(e))n=!0;return n}n=e.match(/:contains\(['"]([\s\S]+)['"]\)/);t.containText=n[1];t.newSelector=e.replace(n[0],"");if(""===t.newSelector)t.newSelector="*";t.check=a;return t};this.treatEqSelector=function(e,t){if(void 0===e)return null;var n=e.split(/\:eq\([0-9]+\)/g);var a=e.match(/(?!\:eq\()[0-9]+/g)||[];var r=null==t?document:t;for(var i=0;i<n.length;++i){n[i]=n[i].trim();if(">"===n[i].charAt(0))n[i]=n[i].substring(1,e.length).trim();if(null==r||""==n[i].trim())break;if(i>a.length-1)r=r.querySelectorAll(n[i]);else r=r.querySelectorAll(n[i])[a[i]]}if(null==r)return[];if(void 0==r.length)r=[r];var o=Kameleoon.Utils.querySelectorAll(e.replace(/\:eq\([0-9]+\)/g,""));var l=[];for(var i=0;i<o.length;++i)for(var s=0;s<r.length;++s)if(o[i]===r[s]){l.push(r[s]);break}return l};this.querySelectorAll=function(t,e){Runtime.querySelectorAllHasError=!1;var n=!1,a,r=[],i=[];if(null==e)e=document;var o=t.match(/#([0-9]+.*)(?: |$)/);if(o){var l=t.charAt(1);t=t.replace("#"+l,"#\\3"+l+" ")}if(""!==t){if(-1!==t.indexOf("[")&&-1===t.indexOf("']")&&-1===t.indexOf('"]')){var s=t.split(/(?=\.)|(?=#)|(?=\[)/),u,c,m;s.forEach(function(e){if("["===e[0]&&-1===e.indexOf("']")&&-1===t.indexOf('"]')&&-1!==t.indexOf("=")){u=e.split(/=(.+)?/);c=u[1];c=c.substring(0,c.length-1);m=u[0]+"='"+c+"']";t=t.replace(e,m)}})}if(-1!==t.indexOf(":contains")){n=!0;a=this.treatContainsSelector(t);t=a.newSelector}if(e&&e.querySelectorAll)if(-1!==t.indexOf(":eq"))r=this.treatEqSelector(t,e);else try{r=e.querySelectorAll(t)}catch(e){Runtime.querySelectorAllHasError=!0;console.log("querySelector:",e);r=[]}for(var f=0,d=r.length;f<d;++f)if(n){if(a.check(a.containText,r[f]))i.push(r[f])}else i.push(r[f])}return i};this.flatten=function(){var e=[];for(var t=0;t<arguments.length;t++)if(arguments[t]instanceof Array)e.push.apply(e,Kameleoon.Utils.flatten.apply(this,arguments[t]));else e.push(arguments[t]);return e};this.flattenTargetingTree=function(e){var r=function(e,t){if(null!=e)if(null!=e.targetingCondition)return!1===e.targetingCondition.targeting?["!",e.targetingCondition]:e.targetingCondition;else{var n=e.orOperator?"OR":"AND";var a=[r(e.leftChild,n),n,r(e.rightChild,n)];return"AND"==t&&"OR"==n?["(",a,")"]:a}};return Kameleoon.Utils.flatten(r(e,"OR"))};this.checkIfImageWasSeen=function(e,t){console.warn("Function Kameleoon.Utils.checkIfImageWasSeen will be deprecated, please use Kameleoon.API.Data.checkInterest");Kameleoon.API.Data.checkInterest(e,null,t)};this.computeDisplayableTargetingTree=function(e){var t=new Array;var n=new Array;this.computeDisplayableTargetingTreeFirstLevelAddIn(e,t,n);if(n.length>0){var a=new Array;var r=new Array;var i=this.createIterator(t);var o=this.createIterator(n);while(o.hasNext()){var l=o.next();if(this.testEmptyMap(l.conditions)){if(o.hasNext())i.next()}else{r.push(l);if(o.hasNext())a.push(i.next())}}t=r.length>0?a.slice(0,r.length-1):a;n=r}return{firstLevelOrOperators:t,secondLevel:n}};this.computeDisplayableTargetingTreeFirstLevelAddIn=function(e,t,n){if(null!=e)if(null==e.targetingCondition)if(0==e.orGuiLevel){this.computeDisplayableTargetingTreeFirstLevelAddIn(e.leftChild,t,n);t.push(e.orOperator);this.computeDisplayableTargetingTreeFirstLevelAddIn(e.rightChild,t,n)}else n.push(this.computeDisplayableTargetingTreeSecondLevel(e));else n.push(this.computeDisplayableTargetingTreeSecondLevel(e))};this.computeDisplayableTargetingTreeSecondLevel=function(e){var t=new Array;var n=new Array;this.computeDisplayableTargetingTreeSecondLevelAddIn(e,t,n);if(n.length>0){var a=new Array;var r=new Array;var i=this.createIterator(t);var o=this.createIterator(n);while(o.hasNext()){var l=o.next();if(l.disabled){if(o.hasNext())i.next()}else{r.push(l);if(o.hasNext())a.push(i.next())}}t=r.length>0?a.slice(0,r.length-1):a;n=r}return{orOperators:t,conditions:n}};this.computeDisplayableTargetingTreeSecondLevelAddIn=function(e,t,n){if(null!=e)if(null==e.targetingCondition){this.computeDisplayableTargetingTreeSecondLevelAddIn(e.leftChild,t,n);t.push(e.orOperator);this.computeDisplayableTargetingTreeSecondLevelAddIn(e.rightChild,t,n)}else n.push(e.targetingCondition)};this.createIterator=function(e){var t=0;return{hasNext:function(){return t<e.length},next:function(){return e[t++]}}};this.ipAddressMatchesRange=function(e,t){var n=e.split(".");var a=t.split(".");return 4==n.length&&4==a.length&&this.ipAdressBlockMatchesRangeBlock(n[0],a[0])&&this.ipAdressBlockMatchesRangeBlock(n[1],a[1])&&this.ipAdressBlockMatchesRangeBlock(n[2],a[2])&&this.ipAdressBlockMatchesRangeBlock(n[3],a[3])};this.ipAdressBlockMatchesRangeBlock=function(e,t){if(t==e)return!0;if("*"==t)return!0;var n=parseInt(e);var a=t.split("-");var r=parseInt(a[0]);var i=a.length>1?parseInt(a[1]):r;if(!isNaN(n)&&!isNaN(r)&&!isNaN(i)&&n>=r&&n<=i)return!0;return!1};this.enableSinglePageSupport=function(){Runtime.href=window.location.href;Kameleoon.Utils.setInterval(function(){if(null!=this){var e=Runtime.href;Runtime.href=window.location.href;if(e!=Runtime.href)Kameleoon.Analyst.load.apply(Runtime,[])}},100)};this.loadScriptSequentially=function(e){if(e){var t=document.createElement("script");t.src=e;t.setAttribute("onload","Kameleoon.Utils.loadScriptSequentially();");Runtime.waitingScripts.push(t);if(1==Runtime.waitingScripts.length)Runtime.headNode.appendChild(Runtime.waitingScripts[0])}else{Runtime.waitingScripts.shift();if(0<Runtime.waitingScripts.length)Runtime.headNode.appendChild(Runtime.waitingScripts[0])}};this.forceNoFlicker=function(e){var t=document.createElement("style");t.setAttribute("id","kameleoonPageLoading");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("media","screen");var n=e+" { visibility: hidden !important; background-image: none !important; }";if(t.styleSheet)t.styleSheet.cssText=n;else t.appendChild(document.createTextNode(n));Runtime.headNode.appendChild(t)};this.processRedirect=function(e){if(window.location.href!=e){if(Runtime.gathererRun&&1==Runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length){if(Kameleoon.Internals.configuration.googleAnalytics)e=Kameleoon.Utils.addParameterToURL(e,"utm_referrer="+encodeURIComponent(document.referrer),Kameleoon.Internals.configuration.googleAnalyticsAllowAnchor);}var t=document.createElement("a");t.href=e;if(-1==window.location.href.indexOf(t.protocol+"//"+t.hostname)){e=Kameleoon.Utils.addParameterToURL(e,"kameleoonAVTE-"+Runtime.currentContainer.id+"="+Runtime.currentContainer.registeredVariation.id,!0);e=Kameleoon.Utils.addParameterToURL(e,"kameleoonRedirect-"+Runtime.currentContainer.id+"="+Runtime.currentContainer.registeredVariationId,!0)}var n=Runtime.parameters;if(n.kameleoonHeatMap){e+=-1==e.indexOf("?")?"?":"&";e+="kameleoonHeatMap="+n.kameleoonHeatMap;e+="&kameleoonProgressiveLoading="+n.kameleoonProgressiveLoading;e+="&kameleoonExperimentId="+n.kameleoonExperimentId;e+="&kameleoonPageWidth="+n.kameleoonPageWidth;e+="&kameleoonAccountLocale="+n.kameleoonAccountLocale;e+="&kameleoonVariationId="+n.kameleoonVariationId;e+="&kameleoonHeatMapRedirect=true"}if(window.location.href!=e&&!n.kameleoonHeatMapRedirect){Kameleoon.Utils.createLocalData("kameleoonRedirect-"+Runtime.currentContainer.id,Runtime.currentContainer.registeredVariationId,1,null,null,!1,null,!0);Kameleoon.Utils.forceNoFlicker("*");Runtime.Analyst.applyRedirect=!0;window.location.replace(e)}}};this.Logger=new function(){var l=5;var s="https://6ad34a4ad5f74debbdd5210d5da2cbb0@logger.kameleoon.com/api/2/store/?sentry_key=6ad34a4ad5f74debbdd5210d5da2cbb0&sentry_version=7";var u=Kameleoon.Internals.configuration;var c=function(e,t,n){return t+Math.abs(Kameleoon.Utils.computeStringHash(e+t+n)).toString()};var m=function(e,t,n,a){var r={tags:{siteCode:u.siteCode},environment:u.environment,platform:"javascript",event_id:t,request:{url:location.href,headers:{"User-Agent":navigator.userAgent}},exception:{values:[{type:e.name,value:e.stack?e.stack:e.message,stacktrace:{frames:[{filename:n}]},mechanism:{data:{mode:"stack",message:e.stack?e.stack:e.message,name:e.name},handled:!1,type:"onerror"}}]}};if(a){r.tags["container-id"]=a.id;r.tags["container-name"]=a.name;r.tags["container-type"]=a.experimentContainer?"experiment":"personalization"}try{r.user={id:Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode}}catch(e){r.user={id:"no_visitor_code"}}return JSON.stringify(r)};this.send=function(t,n,e){try{var a=c(t.message,u.siteCode,u.environment);if(-1==Runtime.errorLoggerIds.indexOf(a)){console.log(t+" at eval ("+n+")");Runtime.errorLoggerIds.push(a)}}catch(e){console.log(t+" at eval ("+n+")")}}};this.BinaryReader=function(e){var i=this;i.littleEndian=!1;i.offset=0;i.dataView=new DataView(e);this.incrementOffset=function(e){i.offset+=e};this.readInt32=function(){var e=i.dataView.getInt32(i.offset,i.littleEndian);i.incrementOffset(4);return e};this.readFloat64=function(){var e=i.dataView.getFloat64(i.offset,i.littleEndian);i.incrementOffset(8);return e};this.readByte=function(){var e=i.dataView.getInt8(i.offset,i.littleEndian);i.incrementOffset(1);return e};this.readDoubleArray=function(e){var t=[];for(var n=0;n<e;n++)t.push(i.readFloat64());return t};this.readDoubleMatrix=function(e,t){var n=[];for(var a=0;a<e;a++){n[a]=[];for(var r=0;r<t;r++)n[a][r]=i.readFloat64()}return n}};this.Event=function(){function a(){this.subscribers={};this.key=0}a.prototype.subscribe=function e(t){var n=this.key;this.subscribers[n]=t;++this.key;this.onSubscribe(n);return function e(){this.onUnsubscribe(n);delete this.subscribers[n]}.bind(this)};a.prototype.emit=function e(){for(var t in this.subscribers)this.subscribers[t].apply(null,arguments)};a.prototype.onSubscribe=function e(t){};a.prototype.onUnsubcribe=function e(t){};a.prototype.filter=function(e){var t=new a;this.subscribe(function(){if(e.apply(null,arguments))t.emit.apply(t,arguments)});return t};a.prototype.map=function(e){var t=new a;this.subscribe(function(){t.emit(e.apply(null,arguments))});return t};a.prototype.memorize=function(){var n=new a;var e=[];this.subscribe(function(){e.push(arguments);n.emit.apply(n,arguments)});n.onSubscribe=function(t){e.forEach(function(e){n.subscribers[t].apply(null,e)})};return n};return a}()};Kameleoon.Classes.Loader=function(){this.enableKameleoonEditorListener=function(){if(!Kameleoon.Internals.runtime.editorListenerEnabled){Kameleoon.Internals.runtime.editorListenerEnabled=!0;var e=function(e){if(!e)e=window.event;Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,e)};Kameleoon.Utils.addEventListener(document,"keyup",e,!1)}};this.listenKeys=function(e){if(e.shiftKey){if(113==e.keyCode&&Kameleoon.Internals.configuration.abtestingSetup){Kameleoon.Internals.runtime.editorMode=!0;Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)})}if(115==e.keyCode&&(Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.parameters.kameleoonVariationSelection))Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableSimulationPanel()})}};};Kameleoon.Loader=new Kameleoon.Classes.Loader;Kameleoon.Analyst.processATInternetTracking=function(experiment){var detectATInternet=Kameleoon.Analyst.detectATInternet(experiment);var escapedExperimentName=experiment.name.replace(/\//gi,"-").replace(/#/g,"-").replace(/&/g,"-");var variationId=("reference"==experiment.registeredVariation.id?0:experiment.registeredVariation.id)+(experiment.mentalistEnabled?1e3:0);var experimentData=experiment.id+"["+escapedExperimentName+"]-"+"0"+"-"+variationId+"["+encodeURIComponent(experiment.registeredVariation.name)+"]";if("xt_mvt"==detectATInternet){var atInternetAlreadyLoaded=void 0!==window.xt_mvt&&void 0!==window.xtsite;var experimentDataParameter="&abmvc="+experimentData;var mvtData=[];if(experiment.factors){var k=0;for(var i=0,l=experiment.factors.length;i<l;++i){++k;var regExp=new RegExp(experiment.factors[i].name+"_(.*?)( /|\\.)");var match=regExp.exec(experiment.registeredVariation.name);var versionId=0;if(match)for(var j=0,m=experiment.factors[i].values.length;j<m;++j)if(match[1]==experiment.factors[i].values[j]){versionId=j+1;break}var version=match?versionId+"["+match[1]+"]":"0[Reference]";mvtData.push(1e4*experiment.id+k+"["+experiment.factors[i].name+"]-"+version)}}for(var i=0,l=mvtData.length;i<l;++i)experimentDataParameter+="&abmv"+(i+1)+"="+mvtData[i];if(atInternetAlreadyLoaded&&!experiment.atInternetTracking.forceXtCoreMissing){if(Kameleoon.Analyst.checkAndSetKameleoonTrackingTime(experiment.id,"ATInternet"))window.xt_mvt(window.xtpage,window.xtn2,experimentData,mvtData)}else if(experiment.atInternetTracking.xtCoreMissingScript){if(!experiment.atInternetTracking.xtCoreMissingScriptGeneratedCode)experiment.atInternetTracking.xtCoreMissingScriptGeneratedCode="(function() {"+experiment.atInternetTracking.xtCoreMissingScript+"})();";var atCallURL=eval(experiment.atInternetTracking.xtCoreMissingScriptGeneratedCode);if(atCallURL&&document.body){if(Kameleoon.Analyst.checkAndSetKameleoonTrackingTime(experiment.id,"ATInternet")){var mvtHitImage=document.createElement("img");mvtHitImage.src=atCallURL+experimentDataParameter+"&type=mvt";document.body.appendChild(mvtHitImage)}}else var timeoutId=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(timeoutId),Kameleoon.Analyst.processATInternetTracking.apply(Kameleoon.Analyst,[experiment])},150)}else var timeoutId=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(timeoutId),Kameleoon.Analyst.processATInternetTracking.apply(Kameleoon.Analyst,[experiment])},150)}if("ATInternet"==detectATInternet){var tag=null==experiment.atInternetTracking.predefinedTagName?new ATInternet.Tracker.Tag:window[experiment.atInternetTracking.predefinedTagName];if(null!=tag&&null!=tag.mvTesting){if(Kameleoon.Analyst.checkAndSetKameleoonTrackingTime(experiment.id,"ATInternet")){tag.mvTesting.set({test:experiment.id+"["+escapedExperimentName+"]",waveId:1,creation:variationId+"["+encodeURIComponent(experiment.registeredVariation.name)+"]"});tag.dispatch()}}else detectATInternet=void 0}if(void 0==detectATInternet)var timeoutId=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(timeoutId),Kameleoon.Analyst.processATInternetTracking.apply(Kameleoon.Analyst,[experiment])},150);return};Kameleoon.Analyst.detectATInternet=function(e){var t=e.atInternetTracking.predefinedTagName;if(null!=t)return null!=window[t]?"ATInternet":void 0;else{var n=void 0!==window.xt_mvt&&void 0!==window.xtsite;var a=void 0!==window.ATInternet&&void 0!==window.ATInternet.Tracker&&void 0!==window.ATInternet.Tracker.Tag;if(n)return"xt_mvt";if(a)return"ATInternet"}return};Kameleoon.Analyst.processGoogleAnalyticsTracking=function(e){window._gaq=window._gaq||[];var n=void 0!=window._gaq._createAsyncTracker;if(!n&&e.googleAnalyticsTracking.eventCallDelayed){var a=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(a);Kameleoon.Analyst.processGoogleAnalyticsTracking.apply(Kameleoon.Analyst,[e])},150);return}var i=this.obtainGoogleAnalyticsTracker(e,n);if(!n)window._gaq.push=this.gaqPush;if(e.googleAnalyticsTracking.customVariable&&e.googleAnalyticsTracking.customVariable<51){var o=[i+"_setCustomVar",e.googleAnalyticsTracking.customVariable,e.name,this.obtainTruncatedVariationName(e.registeredVariation.name,80,e.multiVariateTest),2];window._gaq.push(o,!0)}if(e.googleAnalyticsTracking.pageViewTracking){var t=e.name.replace(/\//gi,"-");window._gaq.push([i+"_trackPageview","/Kameleoon/"+t+"/"+encodeURIComponent(e.registeredVariation.name)],!0)}else if(n||e.googleAnalyticsTracking.eventTracking){var o=[i+"_trackEvent","Kameleoon",e.name,e.registeredVariation.name,void 0,!0];window._gaq.push(o,!0)}};Kameleoon.Analyst.obtainTruncatedVariationName=function(e,n,a){if(e.length<=n)return e;return a?e.substring(e.length-n,e.length)+"...":"..."+e.substring(0,n)};Kameleoon.Analyst.obtainGoogleAnalyticsTracker=function(e,n){var a=e?e.googleAnalyticsTracking.tracker?e.googleAnalyticsTracking.tracker+".":"":Kameleoon.Internals.configuration.googleAnalyticsTracker?Kameleoon.Internals.configuration.googleAnalyticsTracker+".":"";if(window.google_tag_manager&&""==a)if(n&&window._gat&&window._gat._getTrackers().length>0)a=window._gat._getTrackers()[0]._getName()+".";else for(var i=0;i<window._gaq.length;++i)if(window._gaq[i][0]&&0==window._gaq[i][0].indexOf("gtm")){a=window._gaq[i][0].substring(0,window._gaq[i][0].indexOf(".")+1);break}return a};Kameleoon.Analyst.gaqPush=function(e,n){Kameleoon.Internals.runtime.gaFreezingCommandIndex=window._gaq.length;for(var a=0,i=window._gaq.length;a<i;++a){var o=window._gaq[a];if(o[0]&&(-1!=o[0].indexOf("_trackPageview")||-1!=o[0].indexOf("_trackEvent")||-1!=o[0].indexOf("_setCustomVar"))){Kameleoon.Internals.runtime.gaFreezingCommandIndex=a;break}}if(!e[0]||-1!=e[0].indexOf("_trackPageview")||-1!=e[0].indexOf("_trackEvent")||-1!=e[0].indexOf("_setCustomVar")&&!n||Kameleoon.Internals.runtime.firstExternalFreezingCommand){window._gaq.splice(window._gaq.length,0,e);if(!n&&e[0])Kameleoon.Internals.runtime.firstExternalFreezingCommand=!0}else window._gaq.splice(Kameleoon.Internals.runtime.gaFreezingCommandIndex,0,e)};Kameleoon.Analyst.processUniversalAnalyticsTracking=function(n){var a=this.obtainUniversalAnalyticsObject();var e=a&&a.answer&&42==a.answer;if(!e&&n.universalAnalyticsTracking.eventCallDelayed){var i=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(i);Kameleoon.Analyst.processUniversalAnalyticsTracking.apply(Kameleoon.Analyst,[n])},150);return}var l=Kameleoon.Internals.configuration&&Kameleoon.Internals.configuration.universalAnalyticsTrackingId||n.universalAnalyticsTracking&&n.universalAnalyticsTracking.trackingId;if(e&&n.universalAnalyticsTracking.eventCallDelayed&&l)if(void 0==Kameleoon.Analyst.obtainUniversalAnalyticsTracker(n)){var i=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(i);Kameleoon.Analyst.processUniversalAnalyticsTracking.apply(Kameleoon.Analyst,[n])},150);return}var r=this.obtainUniversalAnalyticsTrackerPrefix(n);if(null==a)var i=Kameleoon.Utils.setTimeout(function(){Kameleoon.Utils.clearTimeout(i);Kameleoon.Analyst.processUniversalAnalyticsTracking.apply(Kameleoon.Analyst,[n])},150);else{if(n.universalAnalyticsTracking.dimension&&n.universalAnalyticsTracking.dimension<201)a(r+"set","dimension"+n.universalAnalyticsTracking.dimension,n.name+"/"+n.registeredVariation.name.substring(0,80));if(Kameleoon.Analyst.checkAndSetKameleoonTrackingTime(n.id,"universalAnalytics"))if(n.universalAnalyticsTracking.pageViewTracking){var t=n.name.replace(/\//gi,"-");a(r+"send","pageview","/Kameleoon/"+t+"/"+encodeURIComponent(n.registeredVariation.name))}else if(e||n.universalAnalyticsTracking.eventTracking)a(r+"send","event","Kameleoon",n.name,n.registeredVariation.name,void 0,{nonInteraction:1})}};Kameleoon.Analyst.obtainUniversalAnalyticsObject=function(){var universalAnalyticsObject;try{universalAnalyticsObject=eval(Kameleoon.Internals.configuration.customUniversalAnalyticsObjectPath)}catch(n){universalAnalyticsObject=null}return null==universalAnalyticsObject?window.ga:universalAnalyticsObject};Kameleoon.Analyst.obtainUniversalAnalyticsTrackerPrefix=function(n){var a=this.obtainUniversalAnalyticsTracker(n);return a?a.get("name")+".":""};Kameleoon.Analyst.obtainUniversalAnalyticsTrackerFromTrackingId=function(n){var a=this.obtainUniversalAnalyticsObject();if(void 0!==a&&null!=a.getAll){var e=a.getAll();if(n){for(var i=0;i<e.length;++i)if(n==e[i].get("trackingId"))return e[i]}else if(e.length>0)return e[0]}return};Kameleoon.Analyst.obtainUniversalAnalyticsTracker=function(n){var a=void 0;if(Kameleoon.Internals.configuration&&Kameleoon.Internals.configuration.universalAnalyticsTrackingId)a=Kameleoon.Internals.configuration.universalAnalyticsTrackingId;if(n&&n.universalAnalyticsTracking&&n.universalAnalyticsTracking.trackingId)a=n.universalAnalyticsTracking.trackingId;return this.obtainUniversalAnalyticsTrackerFromTrackingId(a)};Kameleoon.Analyst.evaluateTargeting_PAGE_URL=function(e){var t=new RegExp(Kameleoon.Utils.computeURLRegExpNoKameleoonParameters(e.value));var a;try{a=t.test(decodeURI(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))}catch(e){try{a=window.unescape?t.test(unescape(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())):!1}catch(e){a=!1}}return{targeting:a,rescheduleTargeting:!1}};Kameleoon.Analyst.evaluateTargeting_PAGE_TITLE=function(e){var t=void 0;if(Kameleoon.Internals.runtime.domReady||null!=document.title&&""!=document.title)t=new RegExp(e.value).test(document.title);return{targeting:t,rescheduleTargeting:void 0===t}};Kameleoon.Analyst.evaluateTargeting_PAGE_VIEWS=function(e){if(Kameleoon.Internals.runtime.gathererRun){var t=void 0;switch(e.operator){case"GREATER":t=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length>e.value;break;case"LOWER":t=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length<e.value;break;case"EQUAL":t=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length==e.value;break}return{targeting:t,rescheduleTargeting:!1}}return null};Kameleoon.Analyst.evaluateTargeting_DAY_OF_WEEK=function(e){return{targeting:e.value==(new Date).getDay(),rescheduleTargeting:!1}};Kameleoon.Analyst.evaluateTargeting_BROWSER=function(e){var r=void 0;switch(e.value){case"IE":r=!0===Kameleoon.Internals.runtime.msie||!0===Kameleoon.Internals.runtime.msedge;break;case"CHROME":r=!0===Kameleoon.Internals.runtime.chrome;break;case"FIREFOX":r=!0===Kameleoon.Internals.runtime.firefox;break;case"SAFARI":r=!0===Kameleoon.Internals.runtime.safari;break;case"OPERA":r=!0===Kameleoon.Internals.runtime.opera;break;default:r=!1;break}if(r&&null!=e.version)switch(e.operator){case"EQUAL":r=Kameleoon.Internals.runtime.browserVersion==parseFloat(e.version);break;case"LOWER":r=Kameleoon.Internals.runtime.browserVersion<parseFloat(e.version);break;case"GREATER":r=Kameleoon.Internals.runtime.browserVersion>parseFloat(e.version);break}return{targeting:r,rescheduleTargeting:!1}};Kameleoon.Analyst.evaluateTargeting_CONVERSIONS=function(e){if(Kameleoon.Internals.runtime.gathererRun){var n=void 0;if(e.value<0){n=!1;for(var o=0,a=Kameleoon.Internals.configuration.goals.length;o<a;++o){var r=Kameleoon.Internals.configuration.goals[o];if("PAGE_VIEWS"!=r.type&&"URL"!=r.type){n=void 0;break}}for(var o=0,a=Kameleoon.Internals.configuration.goals.length;o<a;++o){var r=Kameleoon.Internals.configuration.goals[o];if(Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(r.id)>0){n=!0;break}}}else{n=!1;for(var o=0,a=Kameleoon.Internals.configuration.goals.length;o<a;++o){var r=Kameleoon.Internals.configuration.goals[o];if(r.id==e.value){if("PAGE_VIEWS"!=r.type&&"URL"!=r.type)n=void 0;if(Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(r.id)>0)n=!0;break}}}return{targeting:n,rescheduleTargeting:void 0===n,excludedUndefinedIsTargeted:!0}}return null};(function(e){var d=function(){var r="s",f={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},n=function e(a){var s=-a.getTimezoneOffset();return null!==s?s:0},s=function e(){var a=n(new Date(f.BASELINE_YEAR,0,2)),s=n(new Date(f.BASELINE_YEAR,5,2)),i=a-s;if(i<0)return a+",1";else if(i>0)return s+",1,"+r;return a+",0"},i=function e(){var a,s;if("undefined"===typeof Intl||"undefined"===typeof Intl.DateTimeFormat)return;a=Intl.DateTimeFormat();if("undefined"===typeof a||"undefined"===typeof a.resolvedOptions)return;s=a.resolvedOptions().timeZone;if(s&&(s.indexOf("/")>-1||"UTC"===s))return s},o=function e(a){var s=new Date(a,0,1,0,0,1,0).getTime();var i=new Date(a,12,31,23,59,59).getTime();var r=s;var n=new Date(r).getTimezoneOffset();var o=null;var t=null;while(r<i-864e5){var u=new Date(r);var A=u.getTimezoneOffset();if(A!==n){if(A<n)o=u;if(A>n)t=u;n=A}r+=864e5}if(o&&t)return{s:c(o).getTime(),e:c(t).getTime()};return!1},c=function e(a,s,i){if("undefined"===typeof s){s=f.DAY;i=f.HOUR}var r=new Date(a.getTime()-s).getTime();var n=a.getTime()+s;var o=new Date(r).getTimezoneOffset();var t=r;var u=null;while(t<n-i){var A=new Date(t);var c=A.getTimezoneOffset();if(c!==o){u=A;break}t+=i}if(s===f.DAY)return e(u,f.HOUR,f.MINUTE);if(s===f.HOUR)return e(u,f.MINUTE,f.SECOND);return u},v=function e(a,s,i,r){if("N/A"!==i)return i;if("Asia/Beirut"===s){if("Africa/Cairo"===r.name)if(13983768e5===a[6].s&&14116788e5===a[6].e)return 0;if("Asia/Jerusalem"===r.name)if(13959648e5===a[6].s&&14118588e5===a[6].e)return 0}else if("America/Santiago"===s){if("America/Asuncion"===r.name)if(14124816e5===a[6].s&&1397358e6===a[6].e)return 0;if("America/Campo_Grande"===r.name)if(14136912e5===a[6].s&&13925196e5===a[6].e)return 0}else if("America/Montevideo"===s){if("America/Sao_Paulo"===r.name)if(14136876e5===a[6].s&&1392516e6===a[6].e)return 0}else if("Pacific/Auckland"===s)if("Pacific/Fiji"===r.name)if(14142456e5===a[6].s&&13961016e5===a[6].e)return 0;return i},t=function e(r,n){var a=function e(a){var s=0;for(var i=0;i<r.length;i++)if(a.rules[i]&&r[i]){if(r[i].s>=a.rules[i].s&&r[i].e<=a.rules[i].e){s=0;s+=Math.abs(r[i].s-a.rules[i].s);s+=Math.abs(a.rules[i].e-r[i].e)}else{s="N/A";break}if(s>f.MAX_SCORE){s="N/A";break}}s=v(r,n,s,a);return s};var s={};var i=d.olson.dst_rules.zones;var o=i.length;var t=f.AMBIGUITIES[n];for(var u=0;u<o;u++){var A=i[u];var c=a(i[u]);if("N/A"!==c)s[A.name]=c}for(var m in s)if(s.hasOwnProperty(m))for(var l=0;l<t.length;l++)if(t[l]===m)return m;return n},u=function e(a){var s=function e(){var a=[];for(var s=0;s<d.olson.dst_rules.years.length;s++){var i=o(d.olson.dst_rules.years[s]);a.push(i)}return a};var i=function e(a){for(var s=0;s<a.length;s++)if(!1!==a[s])return!0;return!1};var r=s();var n=i(r);if(n)return t(r,a);return a},e=function e(){var a=i();if(!a){a=d.olson.timezones[s()];if("undefined"!==typeof f.AMBIGUITIES[a])a=u(a)}return{name:function(){return a}}};return{determine:e}}();d.olson=d.olson||{};d.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};d.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]};if("undefined"===typeof e)window.jstz=d;else e.jstz=d})();Kameleoon.Classes.Gatherer=function(){var Configuration=Kameleoon.Internals?Kameleoon.Internals.configuration:null;var Runtime=Configuration?Kameleoon.Internals.runtime:null;var Utils=Kameleoon.Utils;var SCRIPT_VERSION=20190115;var VISITOR_CODE_LENGTH=16;var ACTIVITY_TRACKING_INTERVAL=15*1e3;var INTERESTS_TRACKING_TIMEOUT_AFTER_WINDOW_LOAD=2*1e3;var INTERESTS_TRACKING_INTERVAL=5*60*1e3;var INTERESTS_FRESHNESS_DURATION=7*24*60*60*1e3;var IMAGES_DETECTION_TEST_IMAGE="images/common/personalizations/benchmark.png";var IMAGES_DETECTION_DEFAULT_CACHE_TIMEOUT=20;var CUSTOM_DATA_TRACKING_INTERVAL=30*1e3;var MAX_NUMBER_CONVERSIONS_IN_A_REQUEST=20;var MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST=20;var MAX_NUMBER_CONTAINERS_IN_A_REQUEST=20;var REFERENCE_VARIATION_ID_IN_A_REQUEST=0;var MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST=1024;var MAX_NUMBER_MENTALIST_PREDICTION_SEGMENT_TARGETING_IN_A_REQUEST=10;var MAX_HREF_LENGTH_IN_A_REQUEST=200;var MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST=200;var NONCE_BYTE_LENGTH=8;var HEXADECIMAL_ALPHABET="0123456789ABCDEF";var DEFAULT_CUSTOM_DATUM_SCOPE="VISIT";var CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF=100;var CUSTOM_DATA_CUTOFF=3*1e3;var VISITOR_DATA_FROM_SERVER_TRACKING_TIMEOUT=2*1e3;var DEFAULT_LOCALE_LANGUAGE_TAG="en";var MAX_INTERVAL_API_VISIT_REQUEST=15*60*1e3;var MAX_NUMBER_REQUESTS_TO_API_VISIT=3;this.run=function(){Configuration=Kameleoon.Internals.configuration;Runtime=Kameleoon.Internals.runtime;Utils=Kameleoon.Utils;var trackPage=function(l){var m=new Date;this.updateIfStartOfVisit(m,!0,!1,!1,function(u){this.LocalDataHandler.registerAction(function(){var e=Utils.computeCurrentPageCanonicalURL()||Utils.computeCurrentPageCleanAbsoluteURL();this.saveFieldToStoredData("timeLastActivity",m.getTime());Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addPage(m,e,document.title,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(u));Kameleoon.Visitor.saveToStoredData();if(Configuration.track){this.sendTrackingRequest(m,"eventType=page"+"&href="+encodeURIComponent((Utils.computeCurrentPageCanonicalURL()||Utils.computeCurrentPageCleanAbsoluteURL()).slice(0,MAX_HREF_LENGTH_IN_A_REQUEST))+"&title="+encodeURIComponent(document.title.slice(0,MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST))+"&keyPages="+encodeURIComponent(Kameleoon.Utils.JSONStringify(this.obtainKeyPagesIndexes()))+"&referrers="+encodeURIComponent(Kameleoon.Utils.JSONStringify(this.obtainReferrersIndexes(u))),u);var t=this.obtainFieldFromStoredData("landingPageHref");var a=this.obtainFieldFromStoredData("landingPageTitle");var i=this.obtainFieldFromStoredData("landingPages")||[null];var r=this.obtainFieldFromStoredData("firstReferrerHref");var n=this.obtainFieldFromStoredData("firstReferrers")||[null];var o=null;for(var s in Kameleoon.Internals.runtime.Gatherer.configuration.customData)if(Kameleoon.Internals.runtime.Gatherer.configuration.customData[s].mappingIdentifier){o=s;break}this.sendTrackingRequest(m,"eventType=staticData"+"&timeSincePreviousVisit="+this.obtainFieldFromStoredData("timeSincePreviousVisit")+(null!=t?"&landingPageHref="+encodeURIComponent(t.slice(0,MAX_HREF_LENGTH_IN_A_REQUEST)):"")+(null!=a?"&landingPageTitle="+encodeURIComponent(a.slice(0,MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST)):"")+"&landingPages="+encodeURIComponent(Kameleoon.Utils.JSONStringify(i))+(null!=r?"&firstReferrerHref="+encodeURIComponent(r.slice(0,MAX_HREF_LENGTH_IN_A_REQUEST)):"")+"&firstReferrers="+encodeURIComponent(Kameleoon.Utils.JSONStringify(n))+"&timeZoneGroups="+encodeURIComponent(Kameleoon.Utils.JSONStringify(this.obtainTimeZoneGroupsIndexes()))+"&language="+this.obtainLanguageIndex()+"&browser="+this.obtainBrowserIndex()+"&browserVersion="+Runtime.browserVersion+"&mobileBrowser="+Runtime.mobileDevice+"&os="+this.obtainOSIndex()+"&windowWidth="+this.obtainWindowWidth()+"&windowHeight="+this.obtainWindowHeight()+"&screenWidth="+this.obtainScreenWidth()+"&screenHeight="+this.obtainScreenHeight()+"&javaEnabled="+this.obtainJavaEnabled()+"&timeZoneId="+this.obtainTimeZoneId()+"&localeLanguageTag="+this.obtainLocaleLanguageTag()+"&deviceType="+Runtime.deviceType+"&browserName="+this.obtainBrowser()+"&osName="+this.obtainOS()+(o?"&mappingIdentifier="+o:""),u)}l&&l()}.bind(this),!0,{urgent:!0})}.bind(this))}.bind(this);var scheduleActivityTracking=function(){Runtime.Gatherer.active=!1;var e=function(){Runtime.Gatherer.active=!0}.bind(this);Utils.addEventListener(document,"mousemove",e,!1);Utils.addEventListener(document,"scroll",e,!1);if(Runtime.iframeLocalStorage){Runtime.Gatherer.tabCode=Utils.obtainRandomString(16);this.LocalDataHandler.registerAction(function(){var e=function(e){Runtime.Gatherer.tabCount=e};Utils.postMessageToExternalIframe(Utils.JSONStringify({type:"tabcount",tabCode:Runtime.Gatherer.tabCode,deadTime:(new Date).getTime()+ACTIVITY_TRACKING_INTERVAL,callbackId:Utils.addPostMessageCallback(e.bind(this))}))}.bind(this),!1,{repeatInterval:ACTIVITY_TRACKING_INTERVAL,firstRunNow:!0})}Runtime.Gatherer.numberClicks=0;Utils.addEventListener(document,"click",function(){Runtime.Gatherer.numberClicks++}.bind(this),!1);this.LocalDataHandler.registerAction(function(){this.trackActivity(Runtime.Gatherer.active,Runtime.Gatherer.tabCount,Runtime.Gatherer.numberClicks);Runtime.Gatherer.active=!1;Runtime.Gatherer.numberClicks=0}.bind(this),!1,{repeatInterval:ACTIVITY_TRACKING_INTERVAL,firstRunNow:!0})}.bind(this);var scheduleInterestsTracking=function(){}.bind(this);var scheduleCustomDataTracking=function(){}.bind(this);var processMessageEvent=function(e){if("string"!==typeof e.data||e.data.indexOf("kameleoonFull")>=0)return;if(e.data.indexOf("imageChecked")>=0){var t=Utils.JSONParse(e.data);if(null!=Runtime.checkImageCallbacks&&null!=Runtime.checkImageCallbacks[t.callbackId]){var a=Runtime.checkImageCallbacks[t.callbackId];delete Runtime.checkImageCallbacks[t.callbackId];a&&a(t.value);var i=document.getElementsByClassName("KameleoonImageDetection");for(var n=0,o=i.length;n<o;++n){var s=i.item(0);s.parentNode.removeChild(s)}}}}.bind(this);if(null==Runtime.Gatherer)Runtime.Gatherer={};if("DEVELOPMENT"==Configuration.environment)Runtime.Gatherer.configuration=Utils.clone(Configuration.Gatherer);else Runtime.Gatherer.configuration=Utils.JSONParse(Utils.decodeString(Configuration.Gatherer));if(null==Runtime.Visitor)Runtime.Visitor={};if(null==Runtime.Gatherer.countByValueByCustomDatum)Runtime.Gatherer.countByValueByCustomDatum={};this.initializeStoredDataIfNecessary();this.LocalDataHandler.init();Utils.addEventListener(window,"message",processMessageEvent,!1);this.LocalDataHandler.registerAction(function(){this.saveFieldToStoredData("startsOfVisitForCurrentPage",0);trackPage(function(){scheduleActivityTracking();scheduleInterestsTracking();scheduleCustomDataTracking()}.bind(this))}.bind(this),!0,{urgent:!0})};this.trackActivity=function(t,a,i){var r=new Date;var n=function(e){this.LocalDataHandler.registerAction(function(){if(t||!this.obtainVisitIsFinished(r)){Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addActivity(r,t);Kameleoon.Visitor.addTabCount(a);Kameleoon.Visitor.addNumberClicks(i);Kameleoon.Visitor.saveToStoredData();if(Configuration.track)this.sendTrackingRequest(r,"eventType=activity"+"&active="+t+(null!=a?"&tabCount="+a:"")+"&numberClicks="+i,e)}}.bind(this),!0,{urgent:!0})}.bind(this);if(t)this.updateIfStartOfVisit(r,!1,!1,!1,function(e){this.LocalDataHandler.registerAction(function(){this.saveFieldToStoredData("timeLastActivity",r.getTime());n(e)}.bind(this),!0,{urgent:!0})}.bind(this));else n(!1)};this.trackInterests=function(t,a){};this.trackSearch=function(t,a,i){var r=new Date;this.updateIfStartOfVisit(r,!1,!1,!1,function(e){this.LocalDataHandler.registerAction(function(){this.saveFieldToStoredData("timeLastActivity",r.getTime());Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addSearch(r,this.obtainKeyWordsIndexes(t),a,i);Kameleoon.Visitor.saveToStoredData();if(Configuration.track)this.sendTrackingRequest(r,"eventType=search"+"&keyWords="+encodeURIComponent(Kameleoon.Utils.JSONStringify(this.obtainKeyWordsIndexes(t)))+"&numberResults="+a+"&followed="+i,e)}.bind(this),!0,{urgent:!0})}.bind(this))};this.trackConversions=function(g,I){var T=g.length;if(T>0)this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){var t=Configuration.track;!I&&Kameleoon.Visitor.setupFromStoredData(!0);for(var a=0;a<T;a+=MAX_NUMBER_CONVERSIONS_IN_A_REQUEST){var i=Math.min(MAX_NUMBER_CONVERSIONS_IN_A_REQUEST,T-a);var r=null;if(t)r="";var n=0;for(var o=0;o<i;++o){var s=g[a+o];var u=s.goalId;var l=!0===s.negative;var m;var c=this.obtainFieldFromStoredData("revenuesByGoalId");var d=c[u];if(l)if(d&&d.length>0){m=d.splice(-1)[0];if(0==d.length)delete c[u]}else{n++;continue}else{m=parseFloat(s.revenue);if(isNaN(m))m=0;if(!d)d=[];d.push(m);c[u]=d.splice(-10)}this.saveFieldToStoredData("revenuesByGoalId",c);Kameleoon.Visitor.addConversion(u,m,l);if(t){var h=o-n;r+="&goalId"+h+"="+u+(0!=m?"&revenue"+h+"="+m:"");if(l)r+="&negative"+h+"=true"}if(null!=Kameleoon.API.conversionCallbacks)for(var f=0,v=Kameleoon.API.conversionCallbacks.length;f<v;++f)try{Kameleoon.API.conversionCallbacks[f](e,u,m,l)}catch(e){}}if(t){r="eventType=conversions"+"&number="+(i-n)+r;this.sendTrackingRequest(e,r,!1)}}!I&&Kameleoon.Visitor.saveToStoredData()}}.bind(this),!I&&!0,{urgent:!0})};this.trackTargetingSegments=function(u){var l=u.length;if(l>0)this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){var t=Configuration.track;Kameleoon.Visitor.setupFromStoredData(!0);for(var a=0;a<l;a+=MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST){var i=Math.min(MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST,l-a);var r=null;if(t)r="eventType=targetingSegments"+"&number="+i;for(var n=0;n<i;++n){var o=a+n;var s=u[o];Kameleoon.Visitor.addTargetingSegment(e,s);if(t)r+="&id"+n+"="+s}if(t)this.sendTrackingRequest(e,r,!1)}Kameleoon.Visitor.saveToStoredData()}}.bind(this),!0,{urgent:!0})};this.trackContainers=function(t,a){if(t.length+a.length>0)this.LocalDataHandler.registerAction(function(){var f=new Date;if(!this.obtainVisitIsFinished(f)){var e=function(e,t){var a=e.length;if(a>0)for(var i=0;i<a;i+=MAX_NUMBER_CONTAINERS_IN_A_REQUEST){var r=Math.min(MAX_NUMBER_CONTAINERS_IN_A_REQUEST,a-i);var n=null;if(t)n="eventType=containers"+"&number="+r;for(var o=0;o<r;++o){var s=e[i+o];var u=!0===s.train;var l=!0===s.mentalistDecision;var m=null;var c=null;switch(s.type.toUpperCase()){case"EXPERIMENT":m=Kameleoon.Visitor.addExperiment.bind(Kameleoon.Visitor);break;case"PERSONALIZATION":m=Kameleoon.Visitor.addPersonalization.bind(Kameleoon.Visitor);break}if(null!=m)m(f,s.id,s.variationId,l);if(t)n+="&type"+o+"="+s.type+"&id"+o+"="+s.id+"&variationId"+o+"="+(null==s.variationId?REFERENCE_VARIATION_ID_IN_A_REQUEST:s.variationId)+(u?"&train"+o+"="+u:"")+(l?"&mentalistDecision"+o+"="+l:"");if(null!=c)for(var d=0,h=c.length;d<h;++d)try{c[d](f,s.id,s.variationId,l)}catch(e){}}if(t)this.sendTrackingRequest(f,n,!1)}}.bind(this);Kameleoon.Visitor.setupFromStoredData(!0);e(t,Configuration.track);e(a,!1);Kameleoon.Visitor.saveToStoredData()}}.bind(this),!0,{urgent:!0})};this.trackCustomData=function(e,t,a,I){};this.trackProduct=function(t){this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addProduct(t);Kameleoon.Visitor.saveToStoredData();if(Configuration.track)this.sendTrackingRequest(e,"eventType=product"+"&ean="+t,!1);}}.bind(this),!0,{})};this.trackAdBlocker=function(){this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addAdBlocker();Kameleoon.Visitor.saveToStoredData();if(Configuration.track)this.sendTrackingRequest(e,"eventType=adBlocker",!1);}}.bind(this),!0,{})};this.trackIP=function(t){this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addIP(t);Kameleoon.Visitor.saveToStoredData()}}.bind(this),!0,{})};this.trackExternalSolutionData=function(i,r){this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){Kameleoon.Visitor.setupFromStoredData(!0);Kameleoon.Visitor.addExternalSolutionData(i,r);Kameleoon.Visitor.saveToStoredData();if(Configuration.track){var t=[];for(var a in r)t.push([a,r[a]]);this.sendTrackingRequest(e,"eventType=externalSolutionData"+"&externalSolution="+encodeURIComponent(i)+"&valuesByKey="+encodeURIComponent(Utils.JSONStringify(t)),!1)}}}.bind(this),!0,{})};this.trackMentalistPredictionSegmentTargeting=function(f){if(Kameleoon.Internals.runtime.mentalistRun){var v=f.length;if(v>0)this.LocalDataHandler.registerAction(function(){var e=new Date;if(!this.obtainVisitIsFinished(e)){var t=Configuration.track;var a=this.obtainFieldFromStoredData("savedScoresFromMoments");for(var i=0;i<v;i+=MAX_NUMBER_MENTALIST_PREDICTION_SEGMENT_TARGETING_IN_A_REQUEST){var r=Math.min(MAX_NUMBER_MENTALIST_PREDICTION_SEGMENT_TARGETING_IN_A_REQUEST,v-i);var n=null;if(t)n="eventType=mentalistPredictionSegmentTargeting"+"&number="+r;for(var o=0;o<r;++o){var s=i+o;var u=f[s];var l=Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(u);var m=[];var c=Kameleoon.Internals.runtime.targetingSegments.find(function(e){return e.id==u});var d=Configuration.targetingSegmentIdToGoalIdsToKcs||{};if(d[u]||c&&c.trackMentalistPrediction)for(var h in d[u])if(null==a[u]){a[u]={};a[u][h]=l[h]}for(var h in l)m.push([parseInt(h),l[h]]);m=Kameleoon.Utils.JSONStringify(m);if(t)n+="&targetingSegmentId"+o+"="+u+"&goalIdToConversionProbability"+o+"="+encodeURIComponent(m)}if(t)this.sendTrackingRequest(e,n,!1)}this.saveFieldToStoredData("savedScoresFromMoments",a)}}.bind(this),!1,{})}};this.startNewVisit=function(e,t){this.updateIfStartOfVisit(e,!1,!0,t,function(e){this.LocalDataHandler.registerAction(function(){}.bind(this),!0,{urgent:!0})}.bind(this))};this.checkImageList=function(e,t,a){var i=Runtime.Visitor.imagesDetectionCacheTimeout;var CoreAlgorithm={webkit:function(e){var a;var d=!1;var n=function(){window.removeEventListener("message",n,!1);a=(new Date).getTime();var s=new Image;s.style.display="none";s.style.position="absolute";s.style.left="-9999px";s.style.top="-9999px";s.src=e;var o=function(e){if(d){--window.currentChecks;return}var n=(new Date).getTime();var t=n-a;if(s.complete||s.width>0){--window.currentChecks;var i=!0;if(/(\.css|\.js|\.swf)/.test(s.src))i=!0;else if(0==s.width)i=!1;if(i){d=!0;if(null!=interestIndex)window.parent.postMessage(JSON.stringify({command:"addKameleoonInterest",index:interestIndex}),"*");else window.parent.postMessage(JSON.stringify({command:"imageChecked",value:!0,callbackId:callbackId}),"*")}window.stop();window.stop();delete s;window.removeEventListener("message",o,!1)}else if(n-a>cacheTimeout){--window.currentChecks;if(void 0!==window.stop)window.stop();else if(void 0!==document.execCommand)document.execCommand("Stop",!1);delete s;window.removeEventListener("message",o,!1)}else window.postMessage("toNextMessageInterval","*");if(!d&&0==window.currentChecks)if(null!=interestIndex)window.parent.postMessage(JSON.stringify({command:"finishKameleoonInterestCheck",index:interestIndex}),"*");else window.parent.postMessage(JSON.stringify({command:"imageChecked",value:!1,callbackId:callbackId}),"*")};window.addEventListener("message",o,!1);window.postMessage("","*")};window.addEventListener("message",n,!1);window.postMessage("","*")}};mainCheck=CoreAlgorithm.webkit;window.currentChecks=0;for(var i=0;i<images.length;++i){++window.currentChecks;mainCheck(images[i].url)}if(null==i)i=IMAGES_DETECTION_DEFAULT_CACHE_TIMEOUT;var r=document.createElement("iframe");r.style.display="none";var n="var cacheTimeout = "+i+";";if(null!=t)r.className="KameleoonInterestDetection";if(null!=a){r.className="KameleoonImageDetection";n+="var callbackId = "+a+";"}n+="var interestIndex = "+t+";";n+="var images = "+Utils.JSONStringify(e)+";";n+="("+imagesDetectionScript.toString()+")()";r.src="javascript:"+n;Runtime.headNode.appendChild(r)};this.obtainInterestLastCheckTime=function(e){var t=Runtime.storedData.Gatherer["interestLastCheckTime-"+e];return null==t?Number.MIN_VALUE:t};this.sendTrackingRequest=function(e,t,a){Kameleoon.Analyst.validateTrackingRequest(function(){if(!Runtime.simulationMode&&!Runtime.proxyMode&&!Runtime.kameleoonSelectionIframeMode&&!window.kameleoonInjector){Utils.performBeaconServerCall("//tlp-"+this.obtainFieldFromStoredData("trackerNodeCode")+"."+Configuration.DOMAIN+"/visit.gif?lp="+this.obtainFieldFromStoredData("trackerNodeLogParser")+(a&&null==Runtime.Gatherer.scriptProduceTimeSent?"&spt="+Configuration.scriptProduceTime:"")+"&p="+encodeURIComponent(Utils.encodeString(t+"&time="+e.getTime()+"&siteCode="+Configuration.siteCode+"&visitorCode="+this.obtainFieldFromStoredData("visitorCode")+"&visitNumber="+this.obtainFieldFromStoredData("visitNumber")+"&startOfVisit="+(!0===a)+"&scriptVersion="+SCRIPT_VERSION+"&nonce="+Utils.obtainRandomString(2*NONCE_BYTE_LENGTH,HEXADECIMAL_ALPHABET))));if(a)Runtime.Gatherer.scriptProduceTimeSent=!0}}.bind(this))};this.updateIfStartOfVisit=function(date,callerIsTrackPage,forceStartOfVisit,forceStartOfVisitor,callback){var finalCallback=function(startOfVisit){var trackerNodeCode=this.obtainFieldFromStoredData("trackerNodeCode");if(startOfVisit||null==trackerNodeCode||!Kameleoon.Analyst.isValidTrackerNodeCode(trackerNodeCode)){trackerNodeCode=Kameleoon.Analyst.obtainTrackerNodeCodeRandom();this.saveFieldToStoredData("trackerNodeCode",trackerNodeCode)}var trackerNodeLogParser=this.obtainFieldFromStoredData("trackerNodeLogParser");if(startOfVisit||null==trackerNodeLogParser||!Kameleoon.Analyst.isValidTrackerNodeLogParser(trackerNodeCode,trackerNodeLogParser)){trackerNodeLogParser=Kameleoon.Analyst.obtainTrackerNodeLogParserRandom(trackerNodeCode);this.saveFieldToStoredData("trackerNodeLogParser",trackerNodeLogParser)}if(startOfVisit){this.saveFieldToStoredData("savedScoresFromMoments",{});this.saveFieldToStoredData("revenuesByGoalId",{});this.saveFieldToStoredData("loggerRequestsSend",[]);this.inheritVisitorScopeCustomDataAndTrackVisitorDataFromServer()}if(startOfVisit&&Runtime.mentalistRun&&Configuration.track){this.sendTrackingRequest(date,"eventType=mentalistSettings"+"&learnerVersion="+Configuration.MentalistLearner.version,startOfVisit);var goalIdToConversionProbability=Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(!0);if(!Utils.testEmptyMap(goalIdToConversionProbability)){var goalIdToConversionProbabilityToSend=[];for(var goalId in goalIdToConversionProbability)goalIdToConversionProbabilityToSend.push([parseInt(goalId),goalIdToConversionProbability[goalId]]);goalIdToConversionProbabilityToSend=Utils.JSONStringify(goalIdToConversionProbabilityToSend);this.sendTrackingRequest(date,"eventType=mentalistPredictionStartOfVisit"+"&goalIdToConversionProbability="+encodeURIComponent(goalIdToConversionProbabilityToSend),startOfVisit);this.saveFieldToStoredData("savedScoresFromMoments",{0:goalIdToConversionProbability})}}callback&&callback(startOfVisit)}.bind(this);var isCreatedFromEngine=!0;var savedVisitorCode=this.obtainFieldFromStoredData("visitorCode");var savedVisitorCodeCookie=forceStartOfVisitor?null:Utils.readLocalData("kameleoonVisitorCode","COOKIE");if(savedVisitorCodeCookie){isCreatedFromEngine=savedVisitorCodeCookie.match(/^_js_/g);if(isCreatedFromEngine)savedVisitorCodeCookie=savedVisitorCodeCookie.substring(4);if(savedVisitorCode&&savedVisitorCodeCookie!=savedVisitorCode)forceStartOfVisitor=!0}if(forceStartOfVisitor)forceStartOfVisit=!0;var visitNumber=this.obtainFieldFromStoredData("visitNumber");if(forceStartOfVisit||null==visitNumber||this.obtainVisitIsFinished(date)){this.saveFieldToStoredData("startsOfVisitForCurrentPage",this.obtainFieldFromStoredData("startsOfVisitForCurrentPage")+1);var timeSincePreviousVisit;if(forceStartOfVisitor||null==visitNumber){timeSincePreviousVisit=0;visitNumber=0}else{timeSincePreviousVisit=date.getTime()-this.obtainFieldFromStoredData("timeLastActivity");visitNumber++}this.saveFieldToStoredData("visitNumber",visitNumber);this.saveFieldToStoredData("timeLastActivity",date.getTime());this.saveFieldToStoredData("timeSincePreviousVisit",timeSincePreviousVisit);for(var i in Kameleoon.Internals.runtime.Gatherer.configuration.customData)if(Kameleoon.Internals.runtime.Gatherer.configuration.customData[i].mappingIdentifier)this.saveFieldToStoredData("visitsRequestSuccess_"+i,null);this.saveFieldToStoredData("landingPageHref",Utils.computeCurrentPageCleanAbsoluteURL());this.saveFieldToStoredData("landingPageTitle",document.title);this.saveFieldToStoredData("landingPages",this.obtainKeyPagesIndexes());this.saveFieldToStoredData("firstReferrerHref",this.obtainCorrectedReferrer(!0));this.saveFieldToStoredData("firstReferrers",this.obtainReferrersIndexes(!0));if(0==visitNumber){this.saveFieldToStoredData("visitorCode",savedVisitorCodeCookie?savedVisitorCodeCookie:Utils.obtainRandomString(VISITOR_CODE_LENGTH,Kameleoon.Analyst.CODE_ALPHABET));Kameleoon.Visitor.init()}else Kameleoon.Visitor.setupFromStoredData(!1);var landingPageHref=this.obtainFieldFromStoredData("landingPageHref");var landingPageTitle=this.obtainFieldFromStoredData("landingPageTitle");var landingPages=this.obtainFieldFromStoredData("landingPages")||[null];var firstReferrerHref=this.obtainFieldFromStoredData("firstReferrerHref");var firstReferrers=this.obtainFieldFromStoredData("firstReferrers")||[null];var visit=new Kameleoon.Classes.Visit({trackingMode:Configuration.track?"FULL":"NONE",siteCode:Configuration.siteCode,visitorCode:this.obtainFieldFromStoredData("visitorCode"),timeStarted:date,timeSincePreviousVisit:this.obtainFieldFromStoredData("timeSincePreviousVisit"),visitNumber:this.obtainFieldFromStoredData("visitNumber"),landingPageHref:landingPageHref,landingPageTitle:landingPageTitle,landingPages:landingPages,firstReferrerHref:firstReferrerHref,firstReferrers:firstReferrers,timeZoneGroups:this.obtainTimeZoneGroupsIndexes(),language:this.obtainLanguageIndex(),browser:this.obtainBrowserIndex(),browserVersion:Runtime.browserVersion,mobileBrowser:Runtime.mobileDevice,os:this.obtainOSIndex(),windowWidth:this.obtainWindowWidth(),windowHeight:this.obtainWindowHeight(),screenWidth:this.obtainScreenWidth(),screenHeight:this.obtainScreenHeight(),javaEnabled:this.obtainJavaEnabled(),timeZoneId:this.obtainTimeZoneId(),localeLanguageTag:this.obtainLocaleLanguageTag(),deviceType:Runtime.deviceType,browserName:this.obtainBrowser(),osName:this.obtainOS()});Kameleoon.Visitor.addVisit(visit);if(!callerIsTrackPage)Kameleoon.Visitor.addPage(date,Utils.computeCurrentPageCanonicalURL()||Utils.computeCurrentPageCleanAbsoluteURL(),document.title,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(!0));Kameleoon.Visitor.saveToStoredData();finalCallback(!0)}else finalCallback(!1);if(isCreatedFromEngine||forceStartOfVisitor)Utils.createLocalData("kameleoonVisitorCode","_js_"+this.obtainFieldFromStoredData("visitorCode"),380,null,"COOKIE")};this.inheritVisitorScopeCustomDataAndTrackVisitorDataFromServer=function(){this.LocalDataHandler.registerAction(function(){Kameleoon.Visitor.setupFromStoredData(!0);if(Runtime.Visitor.visits.length>1){var e=Runtime.Visitor.currentVisit.wholeVisitHistory.countByValueByCustomDatum;var t=Runtime.Visitor.visits[Runtime.Visitor.visits.length-2].wholeVisitHistory.countByValueByCustomDatum;var a=[];var i=[];var r=[];for(var n in Kameleoon.Internals.runtime.Gatherer.configuration.customData){var o=this.obtainCorrectedCustomDatumScope(Kameleoon.Internals.runtime.Gatherer.configuration.customData[n].scope);if("VISITOR"==o&&null==e[n]){var s=t[n];if(null!=s){a.push(parseInt(n));i.push(s);r.push(!0)}}}this.trackCustomData(a,i,r,!0);Kameleoon.Visitor.saveToStoredData()}}.bind(this),!0,{urgent:!0})};this.obtainCorrectedCustomDatumScope=function(e){if(null==e)e=DEFAULT_CUSTOM_DATUM_SCOPE;return e};this.initializeStoredDataIfNecessary=function(){if(null==Runtime.storedData)Runtime.storedData={};if(null==Runtime.storedData.Gatherer)Runtime.storedData.Gatherer={};if(null==Runtime.storedData.Visitor)Runtime.storedData.Visitor={}};this.obtainFieldFromStoredData=function(e){return Runtime.storedData.Gatherer[e]};this.saveFieldToStoredData=function(e,t){Runtime.storedData.Gatherer[e]=t};this.obtainVisitIsFinished=function(e){var t=e.getTime()-Runtime.Gatherer.configuration.maxVisitIdleDuration;return this.obtainFieldFromStoredData("timeLastActivity")<t};this.obtainTimeZoneId=function(){return jstz.determine().name()};this.obtainTimeZoneGroupsIndexes=function(){var e=this.obtainTimeZoneId();var t=[];for(var a in Kameleoon.Internals.runtime.Gatherer.configuration.timeZoneGroups)if(this.obtainTimeZoneGroupMatches(Kameleoon.Internals.runtime.Gatherer.configuration.timeZoneGroups[a].timeZones,e))t.push(parseInt(a));if(0==t.length)t.push(null);return t};this.obtainTimeZoneGroupMatches=function(e,t){var a=t.toUpperCase();for(var i=0;i<e.length;i++)if(e[i].toUpperCase()==a)return!0;return!1};this.obtainLocaleLanguageTag=function(){var e=null;if(navigator)if(navigator.language)e=navigator.language;else if(navigator.browserLanguage)e=navigator.browserLanguage;else if(navigator.systemLanguage)e=navigator.systemLanguage;else if(navigator.userLanguage)e=navigator.userLanguage;return e?e:DEFAULT_LOCALE_LANGUAGE_TAG};this.obtainLanguage=function(){var e=this.obtainLocaleLanguageTag();var t=e.indexOf("-");if(t>=0)return e.substring(0,t);return e};this.obtainLanguageIndex=function(){var e=this.obtainLanguage().toUpperCase();for(var t in Kameleoon.Internals.runtime.Gatherer.configuration.languages)if(Kameleoon.Internals.runtime.Gatherer.configuration.languages[t].code.toUpperCase()==e)return parseInt(t);return null};this.obtainBrowser=function(){var e=Runtime.browserName;if("Internet Explorer"==e||"Microsoft Edge"==e)e="Explorer";return e};this.obtainBrowserIndex=function(){var e=this.obtainBrowser();if(null==e)return null;var t=e.toUpperCase();for(var a in Kameleoon.Internals.runtime.Gatherer.configuration.browsers)if(Kameleoon.Internals.runtime.Gatherer.configuration.browsers[a].name.toUpperCase()==t)return parseInt(a);return null};this.obtainOS=function(){if(Runtime.windowsphone)return"Windows Phone";if(Runtime.ios)return"iOS";if(Runtime.android)return"Android";if(Runtime.windows)return"Windows";if(Runtime.mac)return"Mac";if(Runtime.linux)return"Linux";return null};this.obtainOSIndex=function(){var e=this.obtainOS();if(null==e)return null;var t=e.toUpperCase();for(var a in Kameleoon.Internals.runtime.Gatherer.configuration.oss)if(Kameleoon.Internals.runtime.Gatherer.configuration.oss[a].name.toUpperCase()==t)return parseInt(a);return null};this.obtainReferrer=function(){return document.referrer};this.obtainCorrectedReferrer=function(e){switch(this.obtainReferrerType(e)){case 0:case 1:case 2:return null;default:return this.obtainReferrer()}};this.obtainReferrerType=function(e){if(this.obtainReferrerIsIgnored(e))return 0;var t=this.obtainInternalReferrerType();var a=this.obtainFieldFromStoredData("startsOfVisitForCurrentPage");if(a>1||1==a&&t>=0)return 1;if(t>=0)return 2;return 3};this.obtainReferrerIsIgnored=function(e){var t=this.obtainReferrer();if(Runtime.Gatherer.configuration.directNoneReferrerOnlyFirst)if(""==t&&!e)return!0;var a=window.location.pathname;var i=Runtime.Gatherer.configuration.noReferrerPages.length;for(var r=0;r<i;r++)if(a==Runtime.Gatherer.configuration.noReferrerPages[r])return!0;return!1};this.obtainInternalReferrerType=function(){var e=this.obtainReferrer();if(""==e)return-1;var t=this.parseHostName(e);var a=Utils.obtainCurrentRootDomain();if(null!=a&&this.computeIfSuffix(t,a))return Runtime.Gatherer.configuration.aliasSites.length;var i=Runtime.Gatherer.configuration.aliasSites.length;for(var r=0;r<i;r++)if(this.computeIfSuffix(t,Runtime.Gatherer.configuration.aliasSites[r]))return r;return-1};this.obtainReferrersIndexes=function(e){switch(this.obtainReferrerType(e)){case 0:case 2:return[null];case 1:return[0];default:var t=[];var a=Number.NEGATIVE_INFINITY;for(var i in Kameleoon.Internals.runtime.Gatherer.configuration.referrers){var r=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[i];if(this.obtainReferrerMatches(r)){var n=r.priority;if(null==n)n=Number.NEGATIVE_INFINITY;if(n>=a){if(n>a){t=[];a=n}t.push(parseInt(i)+1)}}}if(0==t.length)t.push(null);return t}};this.obtainReferrerMatches=function(e){var t=e.detections;for(var a=0;a<t.length;a++)if(this.obtainReferrerDetectionMatches(t[a]))return!0;return!1};this.obtainReferrerDetectionMatches=function(e){var t=this.obtainReferrerDetectionPartMatches(e.method,e.parameters);if(e.and)t=t&&this.obtainReferrerDetectionPartMatches(e.andMethod,e.andParameters);return t};this.obtainReferrerDetectionPartMatches=function(method,parameters){switch(method.toUpperCase()){case"REFERRER_REGEX":return new RegExp(parameters).test(this.obtainReferrer());case"URL_REGEX":var regExp=new RegExp(parameters);return regExp.test(Utils.computeCurrentPageCleanAbsoluteURL())||regExp.test(Utils.computeCurrentPageCleanRelativeURL());default:try{return!0===eval(parameters)}catch(e){return!1}}};this.obtainKeyPagesIndexes=function(){var e=[];for(var t in Kameleoon.Internals.runtime.Gatherer.configuration.keyPages){var a=new RegExp(Kameleoon.Internals.runtime.Gatherer.configuration.keyPages[t].relativeURLRegExp);if(a.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||a.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL()))e.push(parseInt(t))}if(0==e.length)e.push(null);return e};this.obtainKeyWordsIndexes=function(e){var t=[];for(var a in Kameleoon.Internals.runtime.Gatherer.configuration.keyWords)if(new RegExp(Kameleoon.Internals.runtime.Gatherer.configuration.keyWords[a].wordRegExp,"i").test(e))t.push(parseInt(a));return t};this.obtainWindowWidth=function(){var e=null;if(document.body&&document.body.offsetWidth)e=document.body.offsetWidth;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)e=document.documentElement.offsetWidth;if(window.innerWidth)e=window.innerWidth;return e};this.obtainWindowHeight=function(){var e=null;if(document.body&&document.body.offsetHeight)e=document.body.offsetHeight;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetHeight)e=document.documentElement.offsetHeight;if(window.innerHeight)e=window.innerHeight;return e};this.obtainScreenWidth=function(){return window.screen.width};this.obtainScreenHeight=function(){return window.screen.height};this.obtainJavaEnabled=function(){return!0===navigator.javaEnabled()};this.obtainCustomDatumValueMap=function(customDataIndex){var customDatumValueMap=null;var customDatum=Runtime.Gatherer.configuration.customData[customDataIndex];if(null!=customDatum&&!customDatum.disabled)switch(customDatum.method.toUpperCase()){case"GTM":if(window.dataLayer&&customDatum.variableName)for(var i=0,l=dataLayer.length;i<l;++i){var dataLayer_i=dataLayer[i];if(dataLayer_i.hasOwnProperty(customDatum.variableName)){customDatumValueMap={value:dataLayer_i[customDatum.variableName],overwrite:!1};break}}break;case"TC":if(window.tc_vars&&customDatum.variableName){var tc_var=tc_vars[customDatum.variableName];if("string"==typeof tc_var&&0==tc_var.length)tc_var=null;customDatumValueMap={value:tc_var,overwrite:!1}}break;case"TEALIUM":if(window.utag_data&&customDatum.variableName){var utagData=utag_data[customDatum.variableName];if("string"==typeof utagData&&0==utagData.length)utagData=null;customDatumValueMap={value:utagData,overwrite:!1}}break;case"CUSTOM_CODE":try{if(!customDatum.customEvalCodeGeneratedCode)customDatum.customEvalCodeGeneratedCode="(function() {"+customDatum.customEvalCode+"})();";var fileName="kameleoonCustomDataScript-"+customDataIndex+".js";try{customDatumValueMap=eval(customDatum.customEvalCodeGeneratedCode+"//# sourceURL="+fileName)}catch(e){Utils.Logger.send(e,fileName+" ("+customDatum.name+")")}if(null==customDatumValueMap.overwrite)customDatumValueMap.overwrite=!1}catch(e){}break;default:break}return customDatumValueMap};this.computeIfSuffix=function(e,t){var a=e.length-t.length;var i=e.lastIndexOf(t,a);return i>=0&&i==a};this.parseHostName=function(e){var t=document.createElement("a");t.href=e;return t.hostname};this.LocalDataHandler={INTERVAL:1*1e3,init:function(){if(null==Runtime.Gatherer.LocalDataHandler)Runtime.Gatherer.LocalDataHandler={};Runtime.Gatherer.LocalDataHandler.oneShotActions=[];Runtime.Gatherer.LocalDataHandler.repeatedActions=[];var e=function(){if(null!=Runtime){var e=(new Date).getTime();var t=!1;var a=[];for(var i=0,r=Runtime.Gatherer.LocalDataHandler.oneShotActions.length;i<r;++i){var n=Runtime.Gatherer.LocalDataHandler.oneShotActions[i];if(1==n.saveLocalData)t=!0;a.push(n.actionFunction)}Runtime.Gatherer.LocalDataHandler.oneShotActions=[];for(var i=0,r=Runtime.Gatherer.LocalDataHandler.repeatedActions.length;i<r;++i){var n=Runtime.Gatherer.LocalDataHandler.repeatedActions[i];if(n.lastRunTime+n.repeatInterval<=e){if(1==n.saveLocalData)t=!0;a.push(n.actionFunction);n.lastRunTime=e}}this.launchAction(function(){for(var e=0,t=a.length;e<t;++e)try{a[e]()}catch(e){}}.bind(this),t)}}.bind(this);Utils.setInterval(e,this.INTERVAL)},registerAction:function(e,t,a){if(!0===a.urgent)this.launchAction(e,t);else{var i=parseInt(a.repeatInterval);if(isNaN(i))Runtime.Gatherer.LocalDataHandler.oneShotActions.push({actionFunction:e,saveLocalData:t});else{if(!0===a.firstRunNow)Runtime.Gatherer.LocalDataHandler.oneShotActions.push({actionFunction:e,saveLocalData:t});Runtime.Gatherer.LocalDataHandler.repeatedActions.push({actionFunction:e,saveLocalData:t,repeatInterval:i,lastRunTime:(new Date).getTime()})}}},launchAction:function(e,t){e();if(t)Utils.saveStoredData(null)}}};Kameleoon.Gatherer=new Kameleoon.Classes.Gatherer;Kameleoon.Classes.Visit=function(t){var i=t.timeStarted?t.timeStarted.getTime?t.timeStarted.getTime():t.timeStarted:0;this.wholeVisitHistory=new Kameleoon.Classes.VisitHistory(i,t.wholeVisitHistory||{});this.trackingMode=t.trackingMode&&"NONE"!=t.trackingMode||Kameleoon.Internals.configuration.siteCode.track?"NONE":"FULL";this.siteCode=t.siteCode||Kameleoon.Internals.configuration.siteCode;this.visitorCode=t.visitorCode||"";this.timeStarted=i;this.timeLastActivity=t.timeLastActivity||i;this.timeSincePreviousVisit=t.timeSincePreviousVisit||0;this.visitNumber=t.visitNumber||0;this.landingPages=t.landingPages||[null];this.firstReferrers=t.firstReferrers||[null];this.timeZoneGroups=t.timeZoneGroups||[null];this.language=null!=t.language?t.language:null;this.browser=null!=t.browser?t.browser:null;this.browserVersion=null!=t.browserVersion?t.browserVersion:null;this.mobileBrowser=t.mobileBrowser||!1;this.os=null!=t.os?t.os:null;this.windowWidth=t.windowWidth||null;this.windowHeight=t.windowHeight||null;this.screenWidth=t.screenWidth||null;this.screenHeight=t.screenHeight||null;this.javaEnabled=t.javaEnabled||!1;this.timesByTargetingSegmentId=t.timesByTargetingSegmentId||{};this.variationIdByExperimentId=t.variationIdByExperimentId||{};this.mentalistDecisionByExperimentId=t.mentalistDecisionByExperimentId||{};this.timesByVariationIdByExperimentId=t.timesByVariationIdByExperimentId||{};this.variationIdByPersonalizationId=t.variationIdByPersonalizationId||{};this.mentalistDecisionByPersonalizationId=t.mentalistDecisionByPersonalizationId||{};this.timesByVariationIdByPersonalizationId=t.timesByVariationIdByPersonalizationId||{};this.sunriseTime=t.sunriseTime||null;this.sunsetTime=t.sunsetTime||null;this.weatherCode=t.weatherCode||null;this.productEansLastPage=t.productEansLastPage||{};this.productEansAllButLastPages=t.productEansAllButLastPages||{};this.timeZoneId=t.timeZoneId||"UTC";this.localeLanguageTag=t.localeLanguageTag||"en";this.landingPageHref=t.landingPageHref||null;this.landingPageTitle=t.landingPageTitle||null;this.timesByPageHref=t.timesByPageHref||{};this.pageTitleByHref=t.pageTitleByHref||{};this.firstReferrerHref=t.firstReferrerHref||null;this.country=t.country||null;this.region=t.region||null;this.city=t.city||null;this.postalCode=t.postalCode||null;this.latitude=t.latitude||null;this.longitude=t.longitude||null;this.deviceType=t.deviceType||null;this.browserName=t.browserName||null;this.osName=t.osName||null;this.adBlocker=t.adBlocker||!1;this.ips=t.ips||{};this.valuesByKeyByExternalSolution=t.valuesByKeyByExternalSolution||{};this.convertVisitFromServer=function(){var t=this.productEansLastPage;this.productEansLastPage={};for(var i=0,e=t.length;i<e;++i)this.productEansLastPage[t[i]]=!0;var s=this.productEansAllButLastPages;this.productEansAllButLastPages={};for(var i=0,e=s.length;i<e;++i)this.productEansAllButLastPages[s[i]]=!0;var n=this.ips;this.ips={};for(var i=0,e=n.length;i<e;++i)this.ips[n[i]]=!0;for(var a in this.valuesByKeyByExternalSolution){var r=this.valuesByKeyByExternalSolution[a];for(var o in r){var l=r[o];var h={};for(var i=0,e=l.length;i<e;++i)h[l[i]]=!0;r[o]=h}}return this};this.addContainer=function(t,i,e,s,n,a,r,o){if(void 0===n[i]||o&&null!=e&&null==n[i]){n[i]=e;a[i]=s}var l=r[i];if(null==l){l={};r[i]=l}var h=l[e];if(null==h){h=[];l[e]=h}h.push(t.getTime())};this.computeContainerIsActive=function(t,i,e){return i===e[t]};this.computeContainerNumberActivations=function(t,i,e,s,n){var a=n[t];if(null==a)return 0;var r=a[i];if(null==r)return 0;return this.computeObjectNumberPresence(e,s,r)};this.computeObjectNumberPresence=function(t,i,e){var s=0;for(var n=0,a=e.length;n<a;++n){var r=e[n];if((null==t||r>=t)&&(null==i||r<=i))s++}return s};this.addPage=function(t,i,e,s,n){var a=t.getTime();this.addActivity(t,!0);this.wholeVisitHistory.addPage(a,s,n);var r=this.timesByPageHref[i];if(null==r){r=[];this.timesByPageHref[i]=r}r.push(a);this.pageTitleByHref[i]=e;for(var o in this.productEansLastPage)this.productEansAllButLastPages[o]=!0;this.productEansLastPage={}};this.addActivity=function(t,i){var e=t.getTime();if(i)this.timeLastActivity=e;this.wholeVisitHistory.addActivity(e,i)};this.addInterests=function(t,i){this.wholeVisitHistory.addInterests(t,i)};this.addSearch=function(t,i,e,s){this.addActivity(t,!0);this.wholeVisitHistory.addSearch(t.getTime(),i,e,s)};this.addConversions=function(t,i,e){this.wholeVisitHistory.addConversions(t,i,e)};this.addTargetingSegment=function(t,i){var e=this.timesByTargetingSegmentId[i];if(null==e){e=[];this.timesByTargetingSegmentId[i]=e}e.push(t.getTime())};this.addExperiment=function(t,i,e,s){this.addContainer(t,i,e,s,this.variationIdByExperimentId,this.mentalistDecisionByExperimentId,this.timesByVariationIdByExperimentId,!1)};this.addPersonalization=function(t,i,e,s){this.addContainer(t,i,e,s,this.variationIdByPersonalizationId,this.mentalistDecisionByPersonalizationId,this.timesByVariationIdByPersonalizationId,!0)};this.addWeather=function(t,i,e,s,n,a,r,o,l){this.wholeVisitHistory.addWeather(t,i,e,s,n);if(null==this.sunriseTime)this.sunriseTime=a;if(null==this.sunsetTime)this.sunsetTime=r;if(null==this.weatherCode)this.weatherCode=o;if(null==this.weatherCodeId)this.weatherCodeId=l};this.addCustomData=function(t,i,e){this.wholeVisitHistory.addCustomData(t,i,e)};this.addTabCount=function(t){this.wholeVisitHistory.addTabCount(t)};this.addProduct=function(t){this.productEansLastPage[t]=!0};this.addGeolocation=function(t,i,e,s,n,a){this.country=t;this.region=i;this.city=e;this.postalCode=s;this.latitude=n;this.longitude=a};this.addNumberClicks=function(t){this.wholeVisitHistory.addNumberClicks(t)};this.addAdBlocker=function(){this.adBlocker=!0};this.addIP=function(t){this.ips[t]=!0};this.addExternalSolutionData=function(t,i){if(!Kameleoon.Utils.testEmptyMap(i)){var e=this.valuesByKeyByExternalSolution[t];if(null==e){e={};this.valuesByKeyByExternalSolution[t]=e}for(var s in i){var n=i[s];var a=n.length;if(a>0){var r=e[s];if(null==r){r={};e[s]=r}for(var o=0;o<a;++o)r[n[o]]=!0}}}};this.obtainKeyPageIsVisited=function(t){return this.wholeVisitHistory.obtainKeyPageIsVisited(t)};this.obtainKeyWordIsSearched=function(t){return this.wholeVisitHistory.obtainKeyWordIsSearched(t)};this.obtainInterestIsActive=function(t,i){return this.wholeVisitHistory.obtainInterestIsActive(t,i)};this.obtainReferrerIsPresent=function(t){return this.wholeVisitHistory.obtainReferrerIsPresent(t)};this.obtainNumberConversions=function(t){var i=this.wholeVisitHistory.conversionCountByGoalId[t];return null==i?0:i};this.obtainMeanPageDuration=function(){var t=new Date;var i=Kameleoon.OnlineMeanAndDeviation.createFromDifferences(this.wholeVisitHistory.timesStartedPages,!1,!0,!0);i.update([t.getTime()-this.wholeVisitHistory.timesStartedPages[this.wholeVisitHistory.timesStartedPages.length-1]]);return i.mean[0]};this.obtainExperimentNumberActivations=function(t,i,e,s){return this.computeContainerNumberActivations(t,i,e,s,this.timesByVariationIdByExperimentId)};this.obtainPersonalizationNumberActivations=function(t,i,e,s){return this.computeContainerNumberActivations(t,i,e,s,this.timesByVariationIdByPersonalizationId)};this.obtainPageNumberViews=function(t,i,e,s){var n=0;for(var a in this.timesByPageHref)if(null!=a){var r=Kameleoon.Utils.computeRelativeURL(a);if((null==t||t.test(a)||t.test(r))&&(null==i||!i.test(a)&&!i.test(r)))n+=this.computeObjectNumberPresence(e,s,this.timesByPageHref[a])}return n}};Kameleoon.Classes.Visitor=function(){var l=Kameleoon.Internals?Kameleoon.Internals.configuration:null;var h=l?Kameleoon.Internals.runtime:null;var i=Kameleoon.Utils;this.init=function(){l=Kameleoon.Internals.configuration;h=Kameleoon.Internals.runtime;RuntimeVisitor=h.Visitor;if(null==RuntimeVisitor)RuntimeVisitor={};RuntimeVisitor.visits=[];RuntimeVisitor.currentVisit=null;RuntimeVisitor.totalVisits=0;RuntimeVisitor.timeStartedEldestVisit=null;RuntimeVisitor.imagesDetectionTimeWithoutCache=null;RuntimeVisitor.imagesDetectionTimeWithCache=null;RuntimeVisitor.imagesDetectionCacheTimeout=null};this.addVisit=function(i){RuntimeVisitor.visits.push(i);RuntimeVisitor.currentVisit=i;RuntimeVisitor.totalVisits++;if(null==RuntimeVisitor.timeStartedEldestVisit)RuntimeVisitor.timeStartedEldestVisit=i.timeStarted;var t=RuntimeVisitor.visits.length;var e=Math.max(1,l.maxNumberLocalVisits);if(t>e)RuntimeVisitor.visits=RuntimeVisitor.visits.slice(t-e)};this.addPreviousVisits=function(i){if(null!=RuntimeVisitor.currentVisit){var t=RuntimeVisitor.currentVisit;var e=[];for(var n=0,r=RuntimeVisitor.visits.length-1;n<r;++n)e.push(RuntimeVisitor.visits[n]);for(var n=0,r=i.length;n<r;++n)e.push(i[n]);e.sort(function(i,t){var e=i.timeStarted-t.timeStarted;if(0!=e)return e;e=i.visitorCode-t.visitorCode;if(0!=e)return e;e=i.visitNumber-t.visitNumber;return e});this.init();var s=null;var o=null;for(var n=0,r=e.length;n<r;n++){var a=e[n];var u=a.visitorCode;var m=a.visitNumber;if(u!=s||m!=o)this.addVisit(a);s=u;o=m}this.addVisit(t)}};this.saveToStoredData=function(){this.saveFieldToStoredData("visits",RuntimeVisitor.visits);this.saveFieldToStoredData("totalVisits",RuntimeVisitor.totalVisits);this.saveFieldToStoredData("timeStartedEldestVisit",RuntimeVisitor.timeStartedEldestVisit);this.saveFieldToStoredData("imagesDetectionTimeWithoutCache",RuntimeVisitor.imagesDetectionTimeWithoutCache);this.saveFieldToStoredData("imagesDetectionTimeWithCache",RuntimeVisitor.imagesDetectionTimeWithCache);this.saveFieldToStoredData("imagesDetectionCacheTimeout",RuntimeVisitor.imagesDetectionCacheTimeout)};this.setupFromStoredData=function(i){l=Kameleoon.Internals.configuration;h=Kameleoon.Internals.runtime;var t=this.obtainFieldFromStoredData("visits");this.init();if(null==t){if(i){var e=Kameleoon.Gatherer;var n=e.obtainFieldFromStoredData("landingPageHref");var r=e.obtainFieldFromStoredData("landingPageTitle");var s=e.obtainFieldFromStoredData("landingPages")||[null];var o=e.obtainFieldFromStoredData("firstReferrerHref");var a=e.obtainFieldFromStoredData("firstReferrers")||[null];var u=new Kameleoon.Classes.Visit({trackingMode:l.track?"FULL":"NONE",siteCode:l.siteCode,visitorCode:e.obtainFieldFromStoredData("visitorCode"),timeStarted:new Date,timeSincePreviousVisit:e.obtainFieldFromStoredData("timeSincePreviousVisit"),visitNumber:e.obtainFieldFromStoredData("visitNumber"),landingPageHref:n,landingPageTitle:r,landingPages:s,firstReferrerHref:o,firstReferrers:a,timeZoneGroups:e.obtainTimeZoneGroupsIndexes(),language:e.obtainLanguageIndex(),browser:e.obtainBrowserIndex(),browserVersion:h.browserVersion,mobileBrowser:h.mobileDevice,os:e.obtainOSIndex(),windowWidth:e.obtainWindowWidth(),windowHeight:e.obtainWindowHeight(),screenWidth:e.obtainScreenWidth(),screenHeight:e.obtainScreenHeight(),javaEnabled:e.obtainJavaEnabled(),timeZoneId:e.obtainTimeZoneId(),localeLanguageTag:e.obtainLocaleLanguageTag(),deviceType:h.deviceType,browserName:e.obtainBrowser(),osName:e.obtainOS()});this.addVisit(u)}return i}else{var m=t.length;for(var d=0;d<m;++d){var u=t[d];this.addVisit(new Kameleoon.Classes.Visit(u))}RuntimeVisitor.totalVisits=this.obtainFieldFromStoredData("totalVisits");RuntimeVisitor.timeStartedEldestVisit=this.obtainFieldFromStoredData("timeStartedEldestVisit");RuntimeVisitor.imagesDetectionTimeWithoutCache=this.obtainFieldFromStoredData("imagesDetectionTimeWithoutCache");RuntimeVisitor.imagesDetectionTimeWithCache=this.obtainFieldFromStoredData("imagesDetectionTimeWithCache");RuntimeVisitor.imagesDetectionCacheTimeout=this.obtainFieldFromStoredData("imagesDetectionCacheTimeout");return!1}};this.obtainFieldFromStoredData=function(i){return h.storedData.Visitor[i]};this.saveFieldToStoredData=function(i,t){h.storedData.Visitor[i]=t};this.addPage=function(i,t,e,n,r){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addPage(i,t,e,n,r)};this.addActivity=function(i,t){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addActivity(i,t)};this.addInterests=function(i,t){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addInterests(i,t)};this.addSearch=function(i,t,e,n){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addSearch(i,t,e,n)};this.addConversion=function(i,t,e){if(null!=RuntimeVisitor.currentVisit)if(e)RuntimeVisitor.currentVisit.addConversions(i,-1,-t);else RuntimeVisitor.currentVisit.addConversions(i,1,t)};this.addTargetingSegment=function(i,t){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addTargetingSegment(i,t)};this.addExperiment=function(i,t,e,n){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addExperiment(i,t,e,n)};this.addPersonalization=function(i,t,e,n){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addPersonalization(i,t,e,n)};this.addWeather=function(i,t,e,n,r,s,o,a,u){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addWeather(i,t,e,n,r,s,o,a,u)};this.addCustomData=function(i,t,e){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addCustomData(i,t,e)};this.addTabCount=function(i){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addTabCount(i)};this.addProduct=function(i){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addProduct(i)};this.addGeolocation=function(i,t,e,n,r,s){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addGeolocation(i,t,e,n,r,s)};this.addNumberClicks=function(i){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addNumberClicks(i)};this.addAdBlocker=function(){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addAdBlocker()};this.addIP=function(i){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addIP(i)};this.addExternalSolutionData=function(i,t){if(null!=RuntimeVisitor.currentVisit)RuntimeVisitor.currentVisit.addExternalSolutionData(i,t)};this.obtainKeyPageIsVisited=function(i){for(var t=0,e=RuntimeVisitor.visits.length;t<e;++t)if(RuntimeVisitor.visits[t].obtainKeyPageIsVisited(i))return!0;return!1};this.obtainKeyWordIsSearched=function(i){for(var t=0,e=RuntimeVisitor.visits.length;t<e;++t)if(RuntimeVisitor.visits[t].obtainKeyWordIsSearched(i))return!0;return!1};this.obtainInterestIsActive=function(i){for(var t=0,e=RuntimeVisitor.visits.length;t<e;++t)if(RuntimeVisitor.visits[t].obtainInterestIsActive(i,null))return!0;return!1};this.obtainReferrerIsPresent=function(i){for(var t=0,e=RuntimeVisitor.visits.length;t<e;++t)if(RuntimeVisitor.visits[t].obtainReferrerIsPresent(i))return!0;return!1};this.obtainLastVisitWithFreshActiveInterest=function(i){for(var t=RuntimeVisitor.visits.length-1;t>=0;--t){var e=RuntimeVisitor.visits[t];if(e.obtainInterestIsActive(i,!0))return e}return null};this.obtainNumberConversions=function(i){var t=0;for(var e=RuntimeVisitor.visits.length-1;e>=0;--e)t+=RuntimeVisitor.visits[e].obtainNumberConversions(i);return t};this.obtainContainerNumberActivations=function(i,t,e,n,r,s,o,a){var u=a?"obtainExperimentNumberActivations":"obtainPersonalizationNumberActivations";var m=h.Visitor.visits.length;var d=0;if(m>0){if(r){var l=h.Visitor.visits[m-1][u](i,t,e,n);d+=o?l>0?1:0:l}if(s)for(var V=0,c=m-1;V<c;++V){var v=RuntimeVisitor.visits[V][u](i,t,e,n);d+=o?v>0?1:0:v}}return d};this.obtainPageNumberViews=function(i,t,e,n,r,s){var o=RuntimeVisitor.visits.length;var a=0;if(o>0){if(r)a+=RuntimeVisitor.visits[o-1].obtainPageNumberViews(i,t,e,n);if(s)for(var u=0,m=o-1;u<m;++u)a+=RuntimeVisitor.visits[u].obtainPageNumberViews(i,t,e,n)}return a}};Kameleoon.Visitor=new Kameleoon.Classes.Visitor;Kameleoon.Classes.VisitHistory=function(t,e){this.timesStartedPages=e.timesStartedPages||[];this.timesReferrers=e.timesReferrers||[];this.timesSearches=e.timesSearches||[];this.keyPages=e.keyPages||[];this.searchesNumberResults=e.searchesNumberResults||[];this.searchesFollowed=e.searchesFollowed||[];this.timeLastActivity=e.timeLastActivity||t||0;this.timeLastInactivity=e.timeLastInactivity||t||0;this.referrers=e.referrers||[];this.keyWords=e.keyWords||[];this.freshByActiveInterest=e.freshByActiveInterest||{};this.maxTabCount=e.maxTabCount||null;this.numberClicks=e.numberClicks||null;this.temperature=e.temperature||null;this.humidity=e.humidity||null;this.pressure=e.pressure||null;this.windSpeed=e.windSpeed||null;this.cloudiness=e.cloudiness||null;this.countByValueByCustomDatum=e.countByValueByCustomDatum||{};this.conversionCountByGoalId=e.conversionCountByGoalId||{};this.revenueCountByGoalId=e.revenueCountByGoalId||{};this.addPage=function(t,e,s){this.timesStartedPages.push(t);this.keyPages.push(e);var i=[];for(var r=0,n=s.length;r<n;++r){var u=s[r];if(null!=u)i.push(u)}if(i.length>0){this.timesReferrers.push(t);this.referrers.push(i)}};this.addActivity=function(t,e){if(e)this.timeLastActivity=t;else this.timeLastInactivity=t};this.addSearch=function(t,e,s,i){this.timesSearches.push(t);this.keyWords.push(e);this.searchesNumberResults.push(s);this.searchesFollowed.push(i)};this.addConversions=function(t,e,s){var i=this.conversionCountByGoalId[t];if(null==i)i=0;var r=i+e;if(r>0){this.conversionCountByGoalId[t]=r;var n=this.revenueCountByGoalId[t];if(null==n)n=0;var u=n+s;if(u>0)this.revenueCountByGoalId[t]=u;else delete this.revenueCountByGoalId[t]}else{delete this.conversionCountByGoalId[t];delete this.revenueCountByGoalId[t]}};this.addInterests=function(t,e){for(var s=0,i=t.length;s<i;s++){var r=t[s];var n=this.freshByActiveInterest[r];if(null==n)n=!1;this.freshByActiveInterest[r]=n||e}};this.addTabCount=function(t){if(null==this.maxTabCount||t>this.maxTabCount)this.maxTabCount=t};this.addNumberClicks=function(t){if(t>0){if(null==this.numberClicks)this.numberClicks=0;this.numberClicks+=t}};this.addWeather=function(t,e,s,i,r){if(null==this.temperature)this.temperature=t;if(null==this.humidity)this.humidity=e;if(null==this.pressure)this.pressure=s;if(null==this.windSpeed)this.windSpeed=i;if(null==this.cloudiness)this.cloudiness=r};this.addCustomData=function(t,e,s){if(Kameleoon.Utils.testEmptyMap(e)){if(s)delete this.countByValueByCustomDatum[t]}else{if(s||null==this.countByValueByCustomDatum[t])this.countByValueByCustomDatum[t]={};for(var i in e)this.countByValueByCustomDatum[t][i]=(this.countByValueByCustomDatum[t][i]||0)+e[i]}};this.obtainKeyPageIsVisited=function(t){for(var e=0,s=this.keyPages.length;e<s;e++){var i=this.keyPages[e];for(var r=0,n=i.length;r<n;r++)if(t==i[r])return!0}return!1};this.obtainKeyWordIsSearched=function(t){for(var e=0,s=this.keyWords.length;e<s;e++){var i=this.keyWords[e];for(var r=0,n=i.length;r<n;r++)if(t==i[r])return!0}return!1};this.obtainInterestIsActive=function(t,e){if(null==e)return null!=this.freshByActiveInterest[t];return this.freshByActiveInterest[t]==e};this.obtainReferrerIsPresent=function(t){var e=null==t?null:t+1;for(var s=0,i=this.referrers.length;s<i;s++){var r=this.referrers[s];for(var n=0,u=r.length;n<u;n++)if(r[n]==e)return!0}return!1}};Kameleoon.Classes.OnlineMeanAndDeviation=function(){this.create=function(e){var n={};n.dimension=e;n.mean=[];n.nbUpdates=[];n.m2=[];n.deviation=[];for(var t=0;t<e;++t){n.mean[t]=0;n.nbUpdates[t]=0;n.m2[t]=0;n.deviation[t]=0}this.createBinds(n);return n};this.createFromDifferences=function(e,n,t,i){var a=this.create(1);var s=e.length;var r=0;if(r<s){var o=e[r];r++;while(r<s){var h=e[r];r++;var v=h-o;if(v<0&&n||0==v&&t||v>0&&i)a.update([v]);o=h}}return a};this.createFromValues=function(e){var n=this.create(1);for(var t=0,i=e.length;t<i;t++)n.update([e[t]]);return n};this.createFromBooleanValues=function(e){var n=this.create(1);for(var t=0,i=e.length;t<i;t++)n.update([e[t]?1:0]);return n};this.createBinds=function(e){e.update=function(e,n){if(null==n)n=1;if(n>0)for(var t=0;t<this.dimension;++t)if(!isNaN(e[t])&&isFinite(e[t])){var i=this.mean[t]-e[t];var a=this.nbUpdates[t]+n;this.m2[t]=this.m2[t]+i/a*i*this.nbUpdates[t]*n;this.deviation[t]=Math.sqrt(this.m2[t]/a);this.mean[t]=this.mean[t]/a*this.nbUpdates[t]+e[t]/a*n;this.nbUpdates[t]=a}}}};Kameleoon.OnlineMeanAndDeviation=new Kameleoon.Classes.OnlineMeanAndDeviation;
Kameleoon.Internals = {"configuration":{"siteCode":"x9vql09shn","memberCode":"0","abtestingSetup":true,"EDITOR_HOST_NAME":"editor","BACK_OFFICE_HOST_NAME":"back-office","STATIC_HOST_NAME":"static","STATIC_DIRECT_HOST_NAME":"static-direct","PROXY_HOST_NAME":"proxy","API_HOST_NAME":"api","DOMAIN":"kameleoon.com","environment":"PRODUCTION","QOOXDOO_ESTIMATED_LOADING_TIME":2000,"SERVER_CALL_ESTIMATED_LOADING_TIME":500,"GUI_ESTIMATED_LOADING_TIME":3000,"BASE_EDITOR_URL":"//static.kameleoon.com/js/editor/","IFRAME_ORIGIN":"https://x9vql09shn.kameleoon.eu","variations":[{"name":"Tracking","id":183861,"builtCssCodeLevel2":"","elementSets":[]},{"name":"NEW COPIE","id":203805,"builtCssCodeLevel2":"@font-face{font-family:'Brown';src:url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.eot');src:url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.eot?#iefix') format('embedded-opentype'),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.woff2') format('woff2'),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.woff') format(\"woff\"),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.ttf') format(\"truetype\"),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.svg#svgFontName') format(\"svg\");font-weight:normal;font-style:normal}#kameleoonWidgetOverlay{position:fixed;top:0;left:0;bottom:0;right:0;z-index:99999998}#kameleoonWidgetOverlay.kameleoonWidgetOverlayVisible{background:#000;opacity:.7}.kameleoonNewsLetterWrapper{position:fixed;top:100px !important;right:inherit;left:50%;width:300px;-ms-transform:translate(-50%,0);transform:translate(-50%,0);background-color:#fff;z-index:99999999}.kameleoonNewsLetterWrapper .news-letter-confirmed-text-wrapper,.kameleoonNewsLetterWrapper .news-letter-popin-title-wrapper{display:none}.kameleoonNewsLetterWrapper .KameleoonNewsLetter{height:100%}.kameleoonNewsLetterWrapper .KameleoonNewsLetter .news-letter-close{position:absolute;top:15px;right:10px}.kameleoonNewsLetterWrapper .news-letter-popin-text-wrapper{position:absolute;top:40%;left:50%;width:80%;text-align:center;-ms-transform:translate(-50%,0);transform:translate(-50%,0);line-height:20px}.kameleoonNewsLetterWrapper .news-letter-popin-text-wrapper span{font-size:16px;font-family:'Brown' !important}.kameleoonNewsLetterWrapper .news-letter-input-wrapper{padding:150px 0 0 0;margin:0 0 10px 0}.kameleoonNewsLetterWrapper .news-letter-input-wrapper input{width:80%;height:30px;text-align:center;border:1px solid #d1d1d1;font-family:'Brown';font-size:14px}.kameleoonNewsLetterWrapper .news-letter-input-wrapper,.kameleoonNewsLetterWrapper .news-letter-button-wrapper{text-align:center}.kameleoonNewsLetterWrapper .news-letter-button-wrapper button{width:50%;border:0;background-color:#0082e6;text-transform:uppercase;padding:10px 0;color:#fff;font-size:14px;font-family:'Brown';font-weight:600}.kameleoonNewsLetterWrapper .k_box_img,.kameleoonNewsLetterWrapper .k_footer{margin:10px 0 0 0}.kameleoonNewsLetterWrapper .k_box_img img,.kameleoonNewsLetterWrapper .k_footer img{max-width:100%}.KameleoonNewsLetter .news-letter-confirmed-text-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-popin-text-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-input-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-popin-title-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-legal-notice-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-button-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-confirmed-text-wrapper{display:inherit;width:100%;height:50px;margin:30px 0 0 0;text-align:center;font-family:'Brown';font-size:20px}.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-ms-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder{color:#d1d1d1}.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-ms-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::placeholder{color:#d1d1d1}@media only screen and (max-width:800px){.kameleoonNewsLetterWrapper{width:80%}}","elementSets":[],"expositionFrequencySameVisit":1,"expositionFrequencyDelaySecondsBetweenTwoExpositions":172800,"javaScriptCode":{"code":"var NeolaneConfig = {\n\turl: 'https://proxy-pnl.webservices.francetelevisions.fr'\n};\n\nvar kam_neolaneTab = [\n{\n        country: \"auvergnerhône-alpes\",\n        name: \"Auvergne Rhône-Alpes\",\n        optin: \"ftvOptFr3AuvRhoAlp\",\n        //image: \"popin_aura.png\",\n        image: \"header_Popin_aura.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3AuvRhoAlp\"}]'\n    },{\n        country: \"bourgognefranche-comté\",\n        name: \"Bourgogne Franche-Comté\",\n        optin: \"ftvOptFr3BouFraCpt\",\n        //image: \"popin_bfc.png\",\n        image: \"header_Popin_bfc.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3BouFraCpt\"}]'\n    }, {\n        country: \"bretagne\",\n        name: \"Bretagne\",\n        optin: \"ftvOptFr3Bre\",\n        //image: \"popin_bretagne.png\",\n        image: \"header_Popin_bretagne.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Bre\"}]'\n    }, {\n        country: \"centreval de loire\",\n        name: \"Centre-Val de Loire\",\n        optin: \"ftvOptFr3Cen\",\n        //image: \"popin_cvl.png\",\n        image: \"header_Popin_cvl.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Cen\"}]'\n    }, {\n        country: \"corseviastella\",\n        name: \"Corse\",\n        optin: \"ftvOptFr3Cor\",\n        //image: \"popin_corse.png\",\n        image: \"header_Popin_corse.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Cor\"}]'\n    }, {\n        country: \"grand est\",\n        name: \"Grand-Est\",\n        optin: \"ftvOptFr3AlsLorChpArd\",\n        //image: \"popin_grand_est.png\",\n        image: \"header_Popin_grand_est.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3AlsLorChpArd\"}]'\n    }, {\n        country: \"hauts-de-france\",\n        name: \"Hauts-de-France\",\n        optin: \"ftvOptFr3HtDeFrce\",\n        //image: \"popin_hdf.png\",\n        image: \"header_Popin_hdf.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3HtDeFrce\"}]'\n    }, {\n        country: \"normandie\",\n        name: \"Normandie\",\n        optin: \"ftvOptFr3Normandie\",\n        //image: \"popin_normandie.png\",\n        image: \"header_Popin_normandie.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Normandie\"}]'\n    }, {\n        country: \"nouvelleaquitaine\",\n        name: \"Nouvelle Aquitaine\",\n        optin: \"ftvOptFr3NvAquitaine\",\n        //image: \"popin_nouvelle_aquitaine.png\",\n        image: \"header_Popin_nouvelle_aquitaine.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3NvAquitaine\"}]'\n    }, {\n        country: \"occitanie\",\n        name: \"Occitanie\",\n        optin: \"ftvOptFr3Occitanie\",\n        //image: \"popin_occitanie.png\",\n        image: \"header_Popin_occitanie.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Occitanie\"}]'\n    }, {\n        country: \"parisile-de-france\",\n        name: \"Paris Ile-de-France\",\n        optin: \"ftvOptFr3ParIdf\",\n        //image: \"popin_idf.png\",\n        image: \"header_Popin_idf.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3ParIdf\"}]'\n    }, {\n        country: \"pays de la loire\",\n        name: \"Pays de la Loire\",\n        optin: \"ftvOptFr3PayLoir\",\n        //image: \"popin_pdl.png\",\n        image: \"header_Popin_pdl.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3PayLoir\"}]'\n    }, {\n        country: \"provencealpescôte d'azur\",\n        name: \"Provence-Alpes Côtes-d'Azur\",\n        optin: \"ftvOptFr3PrvAlpCteAzur\",\n        //image: \"popin_paca.png\",\n        image: \"header_Popin_paca.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3PrvAlpCteAzur\"}]'\n    }, {\n        country: \"régions\",\n        name: \"Régions\",\n        optin: \"ftvOptFr3PrvAlpCteAzur\",\n        //image: \"popin_paca.png\",\n        image: \"header_Popin_regions.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3PrvAlpCteAzur\"}]'\n    }\n]\n\nkamPopin = {\n    kam_country: [],\n    kam_neolane: kam_neolaneTab,\n    kam_text: `Recevez chaque jour à 13h l’essentiel de l'actualité locale, sportive et culturelle de votre région !`,\n    NeolaneConfig : {\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3\"}]',\n        source: 'SITE',\n        detailSource: 'popinKameleoonSemaine' //Optionnel,\n    },\n    createOverlay: function () {\n        var el = `<div id=\"kameleoonWidgetOverlay\" class=\"kameleoonWidgetOverlayVisible\"><\u002fdiv>`;\n        document.querySelector('body').insertAdjacentHTML('beforeend', el);\n\n        this.createPopin();\n    },\n    createPopin: function () {\n        var el = `<div class=\"KameleoonJavaScriptAdded KameleoonClassNotSelectable kameleoonNewsLetterWrapper\">\n                    <div class=\"KameleoonNewsLetter\" id=\"KameleoonWidget186401\">\n                        <div class=\"k_box_img\">\n                            <img />\n                        <\u002fdiv>\n                        <div class=\"news-letter-close\">\n                            <svg height=\"15px\" viewBox=\"0 0 20 20\">\n                                <path d=\"M11.296,10l8.244,8.244l-1.296,1.296L10,11.296L1.756,19.54L0.46,18.244L8.704,10L0.46,1.756L1.756,0.46L10,8.704l8.244-8.244l1.296,1.296L11.296,10z\"><\u002fpath>\n                            <\u002fsvg>\n                        <\u002fdiv>\n                        <div class=\"news-letter-confirmed-text-wrapper\">Merci de votre inscription<\u002fdiv>\n                        <div class=\"news-letter-popin-title-wrapper\" style=\"display: none;\">\n                            Pop-in title\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508641\" class=\"news-letter-popin-text-wrapper\">\n                            <span id=\"kameleoonId508643\" style=\"font-family: 'Brown'\"><\u002fspan>\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508642\" class=\"news-letter-input-wrapper\">\n                            <input class=\"email-input\" name=\"email\" type=\"email\" placeholder=\"Insérez votre adresse mail\" />\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508640\" class=\"news-letter-button-wrapper\">\n                            <button class=\"news-letter-submit\">Je m'abonne<\u002fbutton>\n                        <\u002fdiv>\n                        <div class=\"k_footer\">\n                            <img src=\"//storage.kameleoon.eu/francetv/Fr3Popin/footer_Popin.png\" />\n                        <\u002fdiv>\n                        <div class=\"news-letter-legal-notice-wrapper\" style=\"display: none !important;\">\n                            <a class=\"news-legal-notice\">Legal notices<\u002fa>\n                        <\u002fdiv>\n                    <\u002fdiv>\n                <\u002fdiv>`; \n\n        document.querySelector('.kameleoonWidgetOverlayVisible').insertAdjacentHTML('afterend', el);\n        this.sendNewsLetterFormSubmit();\n    },\n    sendNewsLetterFormSubmit: function() {\n        var emailInput = document.querySelector('#kameleoonId508642 .email-input');\n        if (!this.validateEmail(emailInput)) {\n            return;\n        }\n        this.processSubscribe(emailInput.value);\n    },\n    processSubscribe: function (email) {\n\t\t\t\tvar optin = this.getCountryOptin();\n\t\t\t\tvar url = NeolaneConfig.url + '/subscribe/subscribe';\n        var data = {\n\t\t\temail: email,\n\t\t\tsource: 'SITE',\n\t\t\toptins: [optin],\n\t\t\tdetailSource: 'KameleoonPopinSemaine' //Optionnel,\n\t\t};\n\t\t\t\tthis.makeRequest(url, 'post', this.onSubmitSuccess, JSON.stringify(data), 'application/json');\n    },\n\t\n\t\tgetCountryOptin: function () {\n\t\t\tvar k_country = document.querySelector('.header-logo__name').textContent.trim().toLowerCase();\n\t\t\t\n\t\t\tfor (var i = 0; i < this.kam_neolane.length; i++) {\n\t            if (this.kam_neolane[i].country === k_country) {\n\t                return this.kam_neolane[i].optin;\n\t            }\n\t        }\n\t\t},\n    makeRequest: function(url, type, callback, data, requestType) {\n        var xmlHttp = new XMLHttpRequest();\n        xmlHttp.onreadystatechange = function () {\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\n                if (callback) {\n                    callback(xmlHttp.responseText)\n                }\n            }\n        }\n        xmlHttp.open(type, url, true);\n        xmlHttp.withCredentials = true;\n        if (requestType) {\n            xmlHttp.setRequestHeader('Content-Type', requestType);\n        }\n        xmlHttp.send(data);\n    },\n    validateEmail: function(emailInput) {\n        var emailValidRegexp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n        if (!emailInput || !emailValidRegexp.test(emailInput.value)) {\n            return false;\n        }\n        return true;\n    },\n    onSubmitSuccess: function() {\n        if (document.getElementById('KameleoonWidget186401')) {\n            document.getElementById('KameleoonWidget186401').className += ' kameleoonNewsLetterConfirmed';\n        }\n    },\n    closeNewsLetter: function() {\n        if (document.getElementsByClassName('KameleoonJavaScriptAdded')) {\n            document.getElementsByClassName('KameleoonJavaScriptAdded')[0].style.display = 'none';\n        }\n\n        // if (document.getElementById('kameleoonWidgetOverlay')) {\n        //     document.getElementById('kameleoonWidgetOverlay').style.display = 'none';\n        // }\n        if (document.querySelector('#kameleoonWidgetOverlay')) {\n            document.querySelector('#kameleoonWidgetOverlay').style.display = 'none';\n        }\n    },\n    checkNeolane: function (country) {\n        console.log('neolane', country);\n\n        for (var i = 0; i < this.kam_neolane.length; i++) {\n            if (this.kam_neolane[i].country === country) {\n                this.k_text(this.kam_neolane[i].name, this.kam_neolane[i].optin, this.kam_neolane[i].image);\n            }\n        }\n    },\n    checkCountry: function () {\n        //var k_country = jQuery('#fr3-header .header-logo__name h1').text().trim();\n        var k_country = document.querySelector('.header-logo__name').textContent.trim().toLowerCase();\n\n        this.checkNeolane(k_country);\n    },\n    k_text: function (name, optin, image) {\n        //var k_text_replace = this.kam_text.replace('/REPLACE/', name);\n\t\tvar k_text_replace = this.kam_text;\n        console.log(k_text_replace);\n\t\t\n        document.querySelector('.KameleoonJavaScriptAdded .KameleoonNewsLetter .k_box_img img').setAttribute(\"src\", \"//storage.kameleoon.eu/francetv/Fr3Popin/\" + image);\n        document.querySelector('.KameleoonNewsLetter .news-letter-popin-text-wrapper > span').textContent = k_text_replace;\n    },\n    init: function () {\n        var self = this;\n\n        this.createOverlay();\n        this.checkCountry();\n        \n        document.querySelector('.news-letter-close').addEventListener('click', function() {\n            self.closeNewsLetter();\n        })\n        \n        document.querySelector('#kameleoonWidgetOverlay').addEventListener('click', function() {\n            self.closeNewsLetter();\n        })\n\n        document.querySelector('.news-letter-submit').addEventListener('click', function() {\n            self.sendNewsLetterFormSubmit();\n        })\n    }\n}\n\nKameleoon.API.runWhenConditionTrue(function () {\n    // Condition\n    return typeof jQuery != \"undefined\" && jQuery('.header-logo__name').length > 0 && jQuery(\"#fr3-header > div.header_content--bg > div > div.header-logo_content > a > div.header-logo__name > h1\").html() !== \"régions\";\n}, function () {\n    kamPopin.init();\n}, 500);\t","afterDOMReady":true}},{"name":"NEW copie","id":203796,"builtCssCodeLevel2":"@font-face{font-family:'Brown';src:url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.eot');src:url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.eot?#iefix') format('embedded-opentype'),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.woff2') format('woff2'),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.woff') format(\"woff\"),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.ttf') format(\"truetype\"),url('https://france3-regions.francetvinfo.fr/grand-est/sites/regions_france3/themes/fr3r_responsive/css/fonts/Brown-Regular.svg#svgFontName') format(\"svg\");font-weight:normal;font-style:normal}#kameleoonWidgetOverlay{position:fixed;top:0;left:0;bottom:0;right:0;z-index:99999998}#kameleoonWidgetOverlay.kameleoonWidgetOverlayVisible{background:#000;opacity:.7}.kameleoonNewsLetterWrapper{position:fixed;top:100px !important;right:inherit;left:50%;width:300px;-ms-transform:translate(-50%,0);transform:translate(-50%,0);background-color:#fff;z-index:99999999}.kameleoonNewsLetterWrapper .news-letter-confirmed-text-wrapper,.kameleoonNewsLetterWrapper .news-letter-popin-title-wrapper{display:none}.kameleoonNewsLetterWrapper .KameleoonNewsLetter{height:100%}.kameleoonNewsLetterWrapper .KameleoonNewsLetter .news-letter-close{position:absolute;top:15px;right:10px}.kameleoonNewsLetterWrapper .news-letter-popin-text-wrapper{position:absolute;top:40%;left:50%;width:80%;text-align:center;-ms-transform:translate(-50%,0);transform:translate(-50%,0);line-height:20px}.kameleoonNewsLetterWrapper .news-letter-popin-text-wrapper span{font-size:16px;font-family:'Brown' !important}.kameleoonNewsLetterWrapper .news-letter-input-wrapper{padding:150px 0 0 0;margin:0 0 10px 0}.kameleoonNewsLetterWrapper .news-letter-input-wrapper input{width:80%;height:30px;text-align:center;border:1px solid #d1d1d1;font-family:'Brown';font-size:14px}.kameleoonNewsLetterWrapper .news-letter-input-wrapper,.kameleoonNewsLetterWrapper .news-letter-button-wrapper{text-align:center}.kameleoonNewsLetterWrapper .news-letter-button-wrapper button{width:50%;border:0;background-color:#0082e6;text-transform:uppercase;padding:10px 0;color:#fff;font-size:14px;font-family:'Brown';font-weight:600}.kameleoonNewsLetterWrapper .k_box_img,.kameleoonNewsLetterWrapper .k_footer{margin:10px 0 0 0}.kameleoonNewsLetterWrapper .k_box_img img,.kameleoonNewsLetterWrapper .k_footer img{max-width:100%}.KameleoonNewsLetter .news-letter-confirmed-text-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-popin-text-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-input-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-popin-title-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-legal-notice-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-button-wrapper{display:none}.KameleoonNewsLetter.kameleoonNewsLetterConfirmed .news-letter-confirmed-text-wrapper{display:inherit;width:100%;height:50px;margin:30px 0 0 0;text-align:center;font-family:'Brown';font-size:20px}.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-ms-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder{color:#d1d1d1}.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-webkit-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-ms-input-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::-moz-placeholder,.KameleoonNewsLetter .news-letter-input-wrapper .email-input::placeholder{color:#d1d1d1}@media only screen and (max-width:800px){.kameleoonNewsLetterWrapper{width:80%}}","elementSets":[],"expositionFrequencySameVisit":1,"expositionFrequencyDelaySecondsBetweenTwoExpositions":172800,"javaScriptCode":{"code":"var NeolaneConfig = {\n\turl: 'https://proxy-pnl.webservices.francetelevisions.fr'\n};\n\nvar kam_neolaneTab = [\n{\n        country: \"auvergnerhône-alpes\",\n        name: \"Auvergne Rhône-Alpes\",\n        optin: \"ftvOptFr3AuvRhoAlp\",\n        //image: \"popin_aura.png\",\n        image: \"header_Popin_aura.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3AuvRhoAlp\"}]'\n    },{\n        country: \"bourgognefranche-comté\",\n        name: \"Bourgogne Franche-Comté\",\n        optin: \"ftvOptFr3BouFraCpt\",\n        //image: \"popin_bfc.png\",\n        image: \"header_Popin_bfc.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3BouFraCpt\"}]'\n    }, {\n        country: \"bretagne\",\n        name: \"Bretagne\",\n        optin: \"ftvOptFr3Bre\",\n        //image: \"popin_bretagne.png\",\n        image: \"header_Popin_bretagne.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Bre\"}]'\n    }, {\n        country: \"centreval de loire\",\n        name: \"Centre-Val de Loire\",\n        optin: \"ftvOptFr3Cen\",\n        //image: \"popin_cvl.png\",\n        image: \"header_Popin_cvl.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Cen\"}]'\n    }, {\n        country: \"corseviastella\",\n        name: \"Corse\",\n        optin: \"ftvOptFr3Cor\",\n        //image: \"popin_corse.png\",\n        image: \"header_Popin_corse.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Cor\"}]'\n    }, {\n        country: \"grand est\",\n        name: \"Grand-Est\",\n        optin: \"ftvOptFr3AlsLorChpArd\",\n        //image: \"popin_grand_est.png\",\n        image: \"header_Popin_grand_est.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3AlsLorChpArd\"}]'\n    }, {\n        country: \"hauts-de-france\",\n        name: \"Hauts-de-France\",\n        optin: \"ftvOptFr3HtDeFrce\",\n        //image: \"popin_hdf.png\",\n        image: \"header_Popin_hdf.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3HtDeFrce\"}]'\n    }, {\n        country: \"normandie\",\n        name: \"Normandie\",\n        optin: \"ftvOptFr3Normandie\",\n        //image: \"popin_normandie.png\",\n        image: \"header_Popin_normandie.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Normandie\"}]'\n    }, {\n        country: \"nouvelleaquitaine\",\n        name: \"Nouvelle Aquitaine\",\n        optin: \"ftvOptFr3NvAquitaine\",\n        //image: \"popin_nouvelle_aquitaine.png\",\n        image: \"header_Popin_nouvelle_aquitaine.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3NvAquitaine\"}]'\n    }, {\n        country: \"occitanie\",\n        name: \"Occitanie\",\n        optin: \"ftvOptFr3Occitanie\",\n        //image: \"popin_occitanie.png\",\n        image: \"header_Popin_occitanie.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3Occitanie\"}]'\n    }, {\n        country: \"parisile-de-france\",\n        name: \"Paris Ile-de-France\",\n        optin: \"ftvOptFr3ParIdf\",\n        //image: \"popin_idf.png\",\n        image: \"header_Popin_idf.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3ParIdf\"}]'\n    }, {\n        country: \"pays de la loire\",\n        name: \"Pays de la Loire\",\n        optin: \"ftvOptFr3PayLoir\",\n        //image: \"popin_pdl.png\",\n        image: \"header_Popin_pdl.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3PayLoir\"}]'\n    }, {\n        country: \"provencealpescôte d'azur\",\n        name: \"Provence-Alpes Côtes-d'Azur\",\n        optin: \"ftvOptFr3PrvAlpCteAzur\",\n        //image: \"popin_paca.png\",\n        image: \"header_Popin_paca.png\",\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3PrvAlpCteAzur\"}]'\n    }\n]\n\nkamPopin = {\n    kam_country: [],\n    kam_neolane: kam_neolaneTab,\n    kam_text: `Recevez chaque jour à 13h l’essentiel de l'actualité locale, sportive et culturelle de votre région !`,\n    NeolaneConfig : {\n        json: '[{\"action\":\"A\",\"optin\":\"ftvOptFr3\"}]',\n        source: 'SITE',\n        detailSource: 'popinKameleoonWeekEnd' //Optionnel,\n    },\n    createOverlay: function () {\n        var el = `<div id=\"kameleoonWidgetOverlay\" class=\"kameleoonWidgetOverlayVisible\"><\u002fdiv>`;\n        document.querySelector('body').insertAdjacentHTML('beforeend', el);\n\n        this.createPopin();\n    },\n    createPopin: function () {\n        var el = `<div class=\"KameleoonJavaScriptAdded KameleoonClassNotSelectable kameleoonNewsLetterWrapper\">\n                    <div class=\"KameleoonNewsLetter\" id=\"KameleoonWidget186401\">\n                        <div class=\"k_box_img\">\n                            <img />\n                        <\u002fdiv>\n                        <div class=\"news-letter-close\">\n                            <svg height=\"15px\" viewBox=\"0 0 20 20\">\n                                <path d=\"M11.296,10l8.244,8.244l-1.296,1.296L10,11.296L1.756,19.54L0.46,18.244L8.704,10L0.46,1.756L1.756,0.46L10,8.704l8.244-8.244l1.296,1.296L11.296,10z\"><\u002fpath>\n                            <\u002fsvg>\n                        <\u002fdiv>\n                        <div class=\"news-letter-confirmed-text-wrapper\">Merci de votre inscription<\u002fdiv>\n                        <div class=\"news-letter-popin-title-wrapper\" style=\"display: none;\">\n                            Pop-in title\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508641\" class=\"news-letter-popin-text-wrapper\">\n                            <span id=\"kameleoonId508643\" style=\"font-family: 'Brown'\"><\u002fspan>\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508642\" class=\"news-letter-input-wrapper\">\n                            <input class=\"email-input\" name=\"email\" type=\"email\" placeholder=\"Insérez votre adresse mail\" />\n                        <\u002fdiv>\n                        <div id=\"kameleoonId508640\" class=\"news-letter-button-wrapper\">\n                            <button class=\"news-letter-submit\">Je m'abonne<\u002fbutton>\n                        <\u002fdiv>\n                        <div class=\"k_footer\">\n                            <img src=\"//storage.kameleoon.eu/francetv/Fr3Popin/footer_Popin.png\" />\n                        <\u002fdiv>\n                        <div class=\"news-letter-legal-notice-wrapper\" style=\"display: none !important;\">\n                            <a class=\"news-legal-notice\">Legal notices<\u002fa>\n                        <\u002fdiv>\n                    <\u002fdiv>\n                <\u002fdiv>`; \n\n        document.querySelector('.kameleoonWidgetOverlayVisible').insertAdjacentHTML('afterend', el);\n        this.sendNewsLetterFormSubmit();\n    },\n    sendNewsLetterFormSubmit: function() {\n        var emailInput = document.querySelector('#kameleoonId508642 .email-input');\n        if (!this.validateEmail(emailInput)) {\n            return;\n        }\n        this.processSubscribe(emailInput.value);\n    },\n    processSubscribe: function (email) {\n\t\t\t\tvar optin = this.getCountryOptin();\n\t\t\t\tvar url = NeolaneConfig.url + '/subscribe/subscribe';\n        var data = {\n\t\t\temail: email,\n\t\t\tsource: 'SITE',\n\t\t\toptins: [optin],\n\t\t\tdetailSource: 'popinKameleoonWeekEnd' //Optionnel,\n\t\t};\n\t\t\t\tthis.makeRequest(url, 'post', this.onSubmitSuccess, JSON.stringify(data), 'application/json');\n    },\n\t\n\t\tgetCountryOptin: function () {\n\t\t\tvar k_country = document.querySelector('.header-logo__name').textContent.trim().toLowerCase();\n\t\t\t\n\t\t\tfor (var i = 0; i < this.kam_neolane.length; i++) {\n\t            if (this.kam_neolane[i].country === k_country) {\n\t                return this.kam_neolane[i].optin;\n\t            }\n\t        }\n\t\t},\n    makeRequest: function(url, type, callback, data, requestType) {\n        var xmlHttp = new XMLHttpRequest();\n        xmlHttp.onreadystatechange = function () {\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\n                if (callback) {\n                    callback(xmlHttp.responseText)\n                }\n            }\n        }\n        xmlHttp.open(type, url, true);\n        xmlHttp.withCredentials = true;\n        if (requestType) {\n            xmlHttp.setRequestHeader('Content-Type', requestType);\n        }\n        xmlHttp.send(data);\n    },\n    validateEmail: function(emailInput) {\n        var emailValidRegexp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n        if (!emailInput || !emailValidRegexp.test(emailInput.value)) {\n            return false;\n        }\n        return true;\n    },\n    onSubmitSuccess: function() {\n        if (document.getElementById('KameleoonWidget186401')) {\n            document.getElementById('KameleoonWidget186401').className += ' kameleoonNewsLetterConfirmed';\n        }\n    },\n    closeNewsLetter: function() {\n        if (document.getElementsByClassName('KameleoonJavaScriptAdded')) {\n            document.getElementsByClassName('KameleoonJavaScriptAdded')[0].style.display = 'none';\n        }\n\n        // if (document.getElementById('kameleoonWidgetOverlay')) {\n        //     document.getElementById('kameleoonWidgetOverlay').style.display = 'none';\n        // }\n        if (document.querySelector('#kameleoonWidgetOverlay')) {\n            document.querySelector('#kameleoonWidgetOverlay').style.display = 'none';\n        }\n    },\n    checkNeolane: function (country) {\n        console.log('neolane', country);\n\n        for (var i = 0; i < this.kam_neolane.length; i++) {\n            if (this.kam_neolane[i].country === country) {\n                this.k_text(this.kam_neolane[i].name, this.kam_neolane[i].optin, this.kam_neolane[i].image);\n            }\n        }\n    },\n    checkCountry: function () {\n        //var k_country = jQuery('#fr3-header .header-logo__name h1').text().trim();\n        var k_country = document.querySelector('.header-logo__name').textContent.trim().toLowerCase();\n\n        this.checkNeolane(k_country);\n    },\n    k_text: function (name, optin, image) {\n        //var k_text_replace = this.kam_text.replace('/REPLACE/', name);\n\t\tvar k_text_replace = this.kam_text;\n        console.log(k_text_replace);\n\t\t\n        document.querySelector('.KameleoonJavaScriptAdded .KameleoonNewsLetter .k_box_img img').setAttribute(\"src\", \"//storage.kameleoon.eu/francetv/Fr3Popin/\" + image);\n        document.querySelector('.KameleoonNewsLetter .news-letter-popin-text-wrapper > span').textContent = k_text_replace;\n    },\n    init: function () {\n        var self = this;\n\n        this.createOverlay();\n        this.checkCountry();\n        \n        document.querySelector('.news-letter-close').addEventListener('click', function() {\n            self.closeNewsLetter();\n        })\n        \n        document.querySelector('#kameleoonWidgetOverlay').addEventListener('click', function() {\n            self.closeNewsLetter();\n        })\n\n        document.querySelector('.news-letter-submit').addEventListener('click', function() {\n            self.sendNewsLetterFormSubmit();\n        })\n    }\n}\n\nKameleoon.API.runWhenConditionTrue(function () {\n    // Condition\n    return typeof jQuery != \"undefined\" && jQuery('.header-logo__name').length > 0;\n}, function () {\n    kamPopin.init();\n}, 500);","afterDOMReady":true}},{"id":"reference","name":"Reference","builtCssCodeLevel2":"","elementSets":[]}],"experiments":[{"id":59066,"name":" Tracking | Régions | Réseaux sociaux | Normandie","baseURL":"https://france3-regions.francetvinfo.fr/normandie/","type":"CLASSIC","experimentContainer":true,"multiVariateTest":false,"executeCodeForReference":true,"atInternetTracking":{"predefinedTagName":"atinternet"},"kameleoonTracking":{"mainGoalMasterId":79170,"mainGoalId":79174,"mainGoalName":"[Tracking] Bloc réseaux sociaux","mainGoal":{"id":79174,"name":"[Tracking] Bloc réseaux sociaux","type":"CLICK","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":[{"mode":"AUTOGENERATED","value":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","context":null,"scopeURL":null,"readableValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","queryValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","currentQuery":null}],"category":"Kameleoon","action":"CLICK","googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null}},"goals":[{"id":79174,"name":"[Tracking] Bloc réseaux sociaux","type":"CLICK","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":[{"mode":"AUTOGENERATED","value":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","context":null,"scopeURL":null,"readableValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","queryValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child","currentQuery":null}],"category":"Kameleoon","action":"CLICK","googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":79170,"experimentId":59066},{"id":79175,"name":"[Tracking] Twitter","type":"CLICK","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":[{"mode":"AUTOGENERATED","value":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(2)","context":null,"scopeURL":null,"readableValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(2)","queryValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(2)","currentQuery":null}],"category":"Kameleoon","action":"CLICK","googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":false,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":79173,"experimentId":59066},{"id":79176,"name":"[Tracking] FB","type":"CLICK","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":[{"mode":"AUTOGENERATED","value":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:first-child","context":null,"scopeURL":null,"readableValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:first-child","queryValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:first-child","currentQuery":null}],"category":"Kameleoon","action":"CLICK","googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":false,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":79172,"experimentId":59066},{"id":79180,"name":"[Tracking] Youtube2","type":"CLICK","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":[{"mode":"AUTOGENERATED","value":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(3) > a:first-child","context":null,"scopeURL":null,"readableValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(3) > a:first-child","queryValue":"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child > ul:first-child > li:nth-of-type(3) > a:first-child","currentQuery":null}],"category":"Kameleoon","action":"CLICK","googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":false,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":79179,"experimentId":59066}],"dateModified":1518022447000,"dateCreated":1517912697000,"dateStatusModified":1518022447000,"deviation":{"reference":0.0,"183861":1.0},"variations":[{"name":"Reference","id":"reference","deviation":0.0},{"name":"Tracking","id":183861,"deviation":1.0,"color":{"code":1,"color":"#00a9dc"}}],"targetingSegmentId":80596},{"id":62869,"name":"[FR3 Regions] POPIN newsletter / Semaine","baseURL":"https://france3-regions.francetvinfo.fr/","type":"CLASSIC","experimentContainer":true,"multiVariateTest":false,"executeCodeForReference":true,"atInternetTracking":{"predefinedTagName":"atinternet"},"kameleoonTracking":{"mainGoalMasterId":98644,"mainGoalId":101582,"mainGoalName":"[France 3 Régions] Validation newsletter","mainGoal":{"id":101582,"name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":null,"category":null,"action":null,"googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null}},"goals":[{"id":101582,"name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":null,"category":null,"action":null,"googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":98644,"experimentId":62869}],"dateModified":1549539981000,"dateCreated":1524476944000,"dateStatusModified":1535702738000,"deviation":{"reference":0.0,"203805":1.0},"variations":[{"name":"Reference","id":"reference","deviation":0.0},{"name":"NEW","id":192753,"deviation":0,"color":{"code":2,"color":"#e77d27"}},{"name":"NEW COPIE","id":203805,"deviation":1.0,"color":{"code":4,"color":"#e14165"}}],"targetingSegmentId":100334},{"id":66700,"name":"[FR3 Regions] POPIN newsletter | Weekend","baseURL":"https://france3-regions.francetvinfo.fr/","type":"CLASSIC","experimentContainer":true,"multiVariateTest":false,"executeCodeForReference":true,"atInternetTracking":{"predefinedTagName":"atinternet"},"kameleoonTracking":{"mainGoalMasterId":98644,"mainGoalId":101820,"mainGoalName":"[France 3 Régions] Validation newsletter","mainGoal":{"id":101820,"name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":null,"category":null,"action":null,"googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null}},"goals":[{"id":101820,"name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false,"description":null,"url":null,"matchType":null,"pageViews":null,"timeSpent":null,"mentalistWeight":0.0,"selectors":null,"category":null,"action":null,"googleAnalyticsEventTracking":false,"universalAnalyticsEventTracking":false,"atInternetEventTracking":false,"smartTagEventTracking":false,"adobeOmnitureEventTracking":false,"eulerianEventTracking":false,"webtrendsEventTracking":false,"heatMapEventTracking":false,"kissMetricsEventTracking":false,"piwikEventTracking":false,"crazyEggEventTracking":false,"comScoreEventTracking":false,"reportingScriptEventTracking":false,"webtrekkEventTracking":false,"automaticallyCreated":false,"active":true,"accessLimiter":null,"scrollTrackingType":null,"scrollTrackingValue":null,"numberName":null,"masterGoalId":98644,"experimentId":66700}],"dateModified":1549544780000,"dateCreated":1531412131000,"dateStatusModified":1535622948000,"deviation":{"reference":0.0,"203796":1.0},"variations":[{"name":"Reference","id":"reference","deviation":0.0},{"name":"NEW","id":199431,"deviation":0,"color":{"code":2,"color":"#e77d27"}},{"name":"NEW copie","id":203796,"deviation":1.0,"color":{"code":4,"color":"#e14165"}}],"targetingSegmentId":100336}],"pausedExperiments":[],"personalizations":[],"goals":[{"id":79172,"mentalistWeight":0.0,"name":"[Tracking] FB","type":"CLICK","multipleConversions":false},{"id":77884,"mentalistWeight":0.0,"name":"GE | Clic Charleville","type":"CLICK","multipleConversions":false},{"id":105122,"mentalistWeight":0.0,"name":"Clics régions menu burger","type":"CUSTOM","multipleConversions":false},{"id":77870,"mentalistWeight":0.0,"name":"[AB 16] Clic Vidéos","type":"CLICK","multipleConversions":false},{"id":79179,"mentalistWeight":0.0,"name":"[Tracking] Youtube2","type":"CLICK","multipleConversions":false},{"id":77901,"mentalistWeight":0.0,"name":"GE | Grands formats | 5","type":"CLICK","multipleConversions":false},{"id":79127,"mentalistWeight":0.0,"name":"[AB 16] Tag position 1","type":"CLICK","multipleConversions":false},{"id":104100,"mentalistWeight":0.0,"name":"Tracking_clic_section2","type":"CLICK","multipleConversions":false},{"id":79140,"mentalistWeight":0.0,"name":"[AB 16] Tag position 6","type":"CLICK","multipleConversions":false},{"id":77873,"mentalistWeight":0.0,"name":"[AB 16] Clic recherche","type":"CLICK","multipleConversions":false},{"id":77872,"mentalistWeight":0.0,"name":"[AB 16] Clic Services","type":"CLICK","multipleConversions":false},{"id":135938,"mentalistWeight":0.0,"name":"Clic sur le même sujet","type":"CLICK","multipleConversions":false},{"id":105177,"mentalistWeight":0.0,"name":"Régions | Clic header","type":"CLICK","multipleConversions":false},{"id":108076,"mentalistWeight":0.0,"name":"Clics Logo","type":"CLICK","multipleConversions":false},{"id":98644,"mentalistWeight":0.0,"name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false},{"id":77874,"mentalistWeight":0.0,"name":"GE | Clic alsace","type":"CLICK","multipleConversions":false},{"id":79131,"mentalistWeight":0.0,"name":"[AB 16] Tag position 2","type":"CLICK","multipleConversions":false},{"id":104093,"mentalistWeight":0.0,"name":"Régions | Ouverture menu burger","type":"CLICK","multipleConversions":false},{"id":136041,"mentalistWeight":0.0,"name":"Scroll JT 2","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"ELEMENT","selector":{"mode":"AUTOGENERATED","value":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child","context":null,"scopeURL":null,"readableValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child","queryValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child","currentQuery":null}},{"id":77877,"mentalistWeight":0.0,"name":"GE | Clic Strasbourg","type":"CLICK","multipleConversions":false},{"id":135932,"mentalistWeight":0.0,"name":"Scroll JT","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"ELEMENT","selector":{"mode":"AUTOGENERATED","value":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child > div:nth-of-type(2)","context":null,"scopeURL":null,"readableValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child > div:nth-of-type(2)","queryValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > aside:nth-of-type(1) > div:nth-of-type(2) > div:first-child > div:nth-of-type(2)","currentQuery":null}},{"id":77876,"mentalistWeight":0.0,"name":"GE | Clic lorraine","type":"CLICK","multipleConversions":false},{"id":77102,"mentalistWeight":0.0,"name":"HDF | Bloc Menu","type":"CLICK","multipleConversions":false},{"id":95453,"mentalistWeight":0.0,"name":"Clics \"Dans vos régions\"","type":"CLICK","multipleConversions":false},{"id":77871,"mentalistWeight":0.0,"name":"[AB 16] Clic émissions","type":"CLICK","multipleConversions":false},{"id":77881,"mentalistWeight":0.0,"name":"GE | Clic Mulhouse","type":"CLICK","multipleConversions":false},{"id":77883,"mentalistWeight":0.0,"name":"GE | Clic Troyes","type":"CLICK","multipleConversions":false},{"id":135935,"mentalistWeight":0.0,"name":"Clic les + lus","type":"CLICK","multipleConversions":false},{"id":95454,"mentalistWeight":0.0,"name":"Clics contenus sponso","type":"CLICK","multipleConversions":false},{"id":79143,"mentalistWeight":0.0,"name":"[AB 16] Clic Navigation régionale","type":"CLICK","multipleConversions":false},{"id":77879,"mentalistWeight":0.0,"name":"GE - Clic Metz","type":"CLICK","multipleConversions":false},{"id":77882,"mentalistWeight":0.0,"name":"GE | Clic Colmar","type":"CLICK","multipleConversions":false},{"id":136039,"mentalistWeight":0.0,"name":"Scroll fin article","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"ELEMENT","selector":{"mode":"AUTOGENERATED","value":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > div:first-child","context":null,"scopeURL":null,"readableValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > div:first-child","queryValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > div:first-child","currentQuery":null}},{"id":105121,"mentalistWeight":0.0,"name":"Clics Flèche Menu Burger","type":"CUSTOM","multipleConversions":false},{"id":79134,"mentalistWeight":0.0,"name":"[AB 16] Tag position 4","type":"CLICK","multipleConversions":false},{"id":135933,"mentalistWeight":0.0,"name":"Scroll videos","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"ELEMENT","selector":{"mode":"ID","value":"block-last-videos","context":null,"scopeURL":null,"readableValue":"#block-last-videos","queryValue":"#block-last-videos","currentQuery":null}},{"id":77885,"mentalistWeight":0.0,"name":"GE | Clic Epinal","type":"CLICK","multipleConversions":false},{"id":79170,"mentalistWeight":0.0,"name":"[Tracking] Bloc réseaux sociaux","type":"CLICK","multipleConversions":false},{"id":77866,"mentalistWeight":0.0,"name":"GE | Clic région","type":"CLICK","multipleConversions":false},{"id":79139,"mentalistWeight":0.0,"name":"[AB 16] Tag position 5","type":"CLICK","multipleConversions":false},{"id":96392,"mentalistWeight":0.0,"name":"Clic dans vos régions","type":"CLICK","multipleConversions":false},{"id":77890,"mentalistWeight":0.0,"name":"[AB16] Clic bloc tags menu","type":"CLICK","multipleConversions":false},{"id":136037,"mentalistWeight":0.0,"name":"Scroll tags articles","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"ELEMENT","selector":{"mode":"AUTOGENERATED","value":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > ul:nth-of-type(2)","context":null,"scopeURL":null,"readableValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > ul:nth-of-type(2)","queryValue":"#node-1625585 > div:nth-of-type(1) > div:nth-of-type(2) > section:first-child > ul:nth-of-type(2)","currentQuery":null}},{"id":77887,"mentalistWeight":0.0,"name":"GE | Clic Bar-le-duc","type":"CLICK","multipleConversions":false},{"id":77875,"mentalistWeight":0.0,"name":"GE | Clic Champagne ardenne","type":"CLICK","multipleConversions":false},{"id":79142,"mentalistWeight":0.0,"name":"[AB 16] Tag position 7","type":"CLICK","multipleConversions":false},{"id":135939,"mentalistWeight":0.0,"name":"Clic les plus chauds","type":"CLICK","multipleConversions":false},{"id":135934,"mentalistWeight":0.0,"name":"Scroll bas de page","type":"SCROLL","multipleConversions":false,"scrollTrackingType":"PERCENTAGE","scrollTrackingValue":100.0},{"id":79133,"mentalistWeight":0.0,"name":"[AB 16] Tag position 3","type":"CLICK","multipleConversions":false},{"id":77880,"mentalistWeight":0.0,"name":"GE | Clic Nancy","type":"CLICK","multipleConversions":false},{"id":70502,"mentalistWeight":0.0,"name":"Engagement","type":"ENGAGEMENT","multipleConversions":false},{"id":77886,"mentalistWeight":0.0,"name":"GE | Clic Chaumont","type":"CLICK","multipleConversions":false},{"id":79173,"mentalistWeight":0.0,"name":"[Tracking] Twitter","type":"CLICK","multipleConversions":false},{"id":104099,"mentalistWeight":0.0,"name":"Menu_selection_région","type":"CLICK","multipleConversions":false},{"id":108071,"mentalistWeight":0.0,"name":"Clics Villes/département","type":"CLICK","multipleConversions":false},{"id":108068,"mentalistWeight":0.0,"name":"Clics Menu Burger","type":"CLICK","multipleConversions":false},{"id":77878,"mentalistWeight":0.0,"name":"GE | Clic Reims","type":"CLICK","multipleConversions":false},{"id":104101,"mentalistWeight":0.0,"name":"clic_full_block_cloned-menu","type":"CLICK","multipleConversions":false},{"id":79174,"mentalistWeight":0.0,"linkedExperimentId":59066,"masterGoalId":79170,"masterGoalName":"[Tracking] Bloc réseaux sociaux","name":"[Tracking] Bloc réseaux sociaux","type":"CLICK","multipleConversions":false},{"id":79175,"mentalistWeight":0.0,"linkedExperimentId":59066,"masterGoalId":79173,"masterGoalName":"[Tracking] Twitter","name":"[Tracking] Twitter","type":"CLICK","multipleConversions":false},{"id":79176,"mentalistWeight":0.0,"linkedExperimentId":59066,"masterGoalId":79172,"masterGoalName":"[Tracking] FB","name":"[Tracking] FB","type":"CLICK","multipleConversions":false},{"id":79180,"mentalistWeight":0.0,"linkedExperimentId":59066,"masterGoalId":79179,"masterGoalName":"[Tracking] Youtube2","name":"[Tracking] Youtube2","type":"CLICK","multipleConversions":false},{"id":101582,"mentalistWeight":0.0,"linkedExperimentId":62869,"masterGoalId":98644,"masterGoalName":"[France 3 Régions] Validation newsletter","name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false},{"id":101820,"mentalistWeight":0.0,"linkedExperimentId":66700,"masterGoalId":98644,"masterGoalName":"[France 3 Régions] Validation newsletter","name":"[France 3 Régions] Validation newsletter","type":"CUSTOM","multipleConversions":false}],"personalizationsDeviation":0.9,"personalizationSetup":true,"boLocale":"FRENCH","weather":false,"weatherForecast":false,"weatherHistory":false,"geolocation":false,"ip":false,"googleAnalytics":true,"googleAnalyticsAllowAnchor":false,"googleAnalyticsTracker":"","checkTestedTrafficActive":false,"timeZone":"Europe/Paris","localDataLegalControl":"OFF","localDataConsentCookieName":null,"globalScript":"Kameleoon.API.runWhenConditionTrue(function(){return typeof jQuery!=\"undefined\"&&jQuery(\".kameleoonNewsLetterWrapper .KameleoonNewsLetter\").length>0},function(){Kameleoon.API.runWhenConditionTrue(function(){return jQuery(\".kameleoonNewsLetterWrapper .KameleoonNewsLetter.kameleoonNewsLetterConfirmed\").length>0},function(){Kameleoon.API.processConversion(98644)},100)},200);try{var kameleoonEventsTracker=[{id:104100,selector:\"#cloned-menu > section:first-child + div + div > section:first-child\"},{id:135938,selector:\"body > div:nth-of-type(4)\"},{id:105177,selector:\".header_content\"},{id:108076,selector:\".header-logo_content\"},{id:104093,selector:\".r_navigation__title--burger\"},{id:135935,selector:\"body > div:nth-of-type(5) > div:first-child > div:first-child > div:first-child\"},{id:95454,selector:\"#outbrain_widget_0\"},{id:79170,selector:\"#fr3-header-inner > div:first-child > div:nth-of-type(2) > div:first-child > div:first-child\"},{id:96392,selector:\"#outbrain_widget_1 > div:first-child > div:nth-of-type(1)\"},{id:135939,selector:\"#fr3r-chartbeat-toppages\"},{id:104099,selector:\"#cloned-menu > section:first-child + div\"},{id:108071,selector:\".header_subContent--button\"},{id:108068,selector:\".header_subContent--button-menu\"},{id:104101,selector:\"#cloned-menu\"}];var createEventTracking=function(d,b){var a=function(f){if(!Kameleoon.Internals.runtime.touchMoveEvent){if(b.universalAnalyticsTracking){var g=Kameleoon.Analyst.obtainUniversalAnalyticsObject();if(g!==undefined){g(Kameleoon.Analyst.obtainUniversalAnalyticsTrackerPrefix()+\"send\",\"event\",b.category,b.action,b.name,undefined)}}if(b.googleAnalyticsTracking){window._gaq=window._gaq||[];var e=Kameleoon.Analyst.obtainGoogleAnalyticsTracker(null,true);window._gaq.push([e+\"_trackEvent\",b.category,b.action,b.name?b.name:\"\"])}if(b.atInternetTracking){if(window.xt_med){window.xt_med(\"C\",b.category,b.name,b.atAction)}}Kameleoon.API.Goals.processConversion(b.id)}};for(var c=0;c<d.length;++c){Kameleoon.Utils.addEventListener(d[c],Kameleoon.Internals.runtime.mouseDownEvent,a,true)}};var kameleoonIntervalId=Kameleoon.Utils.setInterval(function(){for(var a=kameleoonEventsTracker.length-1;a>=0;--a){var b=Kameleoon.Utils.querySelectorAll(kameleoonEventsTracker[a].selector);if(b.length>0){createEventTracking(b,kameleoonEventsTracker[a]);kameleoonEventsTracker.splice(a,1)}}if(kameleoonEventsTracker.length==0){window.clearInterval(kameleoonIntervalId)}},250)}catch(exception){console.log(\"An error occurred in your custom JavaScript Kameleoon tracking function, please check your code.\");console.log(exception,exception.message)};","maxNumberLocalVisits":25,"staticURL":"//static.kameleoon.eu/","kameleoonByteLength":57527,"trackerNodeCodes":["01","02","03","04"],"trackerNodeNumberLogParsers":[6,6,6,6],"track":true,"trackerExcludedIPRanges":[],"targetingSegments":[{"id":80596,"name":"Segment for Régions | Tracking réseaux sociaux | Normandie","targetingTree":{"targetingCondition":{"type":"PAGE_TITLE","disabled":false,"weight":1,"value":"(.*)Normandie(.*)","include":true}},"track":true},{"id":100334,"name":"[FR3 Regions] POPIN newsletter / Semaine-7","targetingTree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DAY_OF_WEEK","disabled":false,"weight":1,"value":6,"include":false}},"rightChild":{"targetingCondition":{"type":"DAY_OF_WEEK","disabled":false,"weight":1,"value":0,"include":false}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_VIEWS","disabled":false,"weight":1,"operator":"GREATER","include":true,"value":1}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"^https\\://france3-regions\\.francetvinfo\\.fr/$","include":false}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"CONVERSIONS","disabled":false,"weight":1,"value":98644,"include":false}},"rightChild":{"targetingCondition":{"type":"BROWSER","disabled":false,"weight":1,"value":"SAFARI","version":null,"operator":"EQUAL","include":false}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/direct(.*)","include":false}}}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)xtor\\=CS2-758(.*)","include":false}}},"track":true},{"id":100336,"name":"[FR3 Regions] POPIN newsletter | Weekend-2","targetingTree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DAY_OF_WEEK","disabled":false,"weight":1,"value":6,"include":true}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DAY_OF_WEEK","disabled":false,"weight":1,"value":0,"include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_VIEWS","disabled":false,"weight":1,"operator":"GREATER","include":true,"value":1}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"^https\\://france3-regions\\.francetvinfo\\.fr/$","include":false}},"rightChild":{"targetingCondition":{"type":"CONVERSIONS","disabled":false,"weight":1,"value":98644,"include":false}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"BROWSER","disabled":false,"weight":1,"value":"SAFARI","version":null,"operator":"EQUAL","include":false}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/direct(.*)","include":false}}}}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)xtor\\=CS2-758(.*)","include":false}}},"track":true}],"scriptProduceTime":1576197099029}};
Kameleoon.Internals.configuration.Gatherer = "eyJtYXhWaXNpdElkbGVEdXJhdGlvbiI6MTgwMDAwMCwiZW5hYmxlSW1hZ2VzRGV0ZWN0aW9uQ2FjaGVUaW1lb3V0Q29tcHV0YXRpb24iOmZhbHNlLCJkaXJlY3ROb25lUmVmZXJyZXJPbmx5Rmlyc3QiOmZhbHNlLCJjdXN0b21TY3JpcHRCZWZvcmUiOiIiLCJpbnRlcmVzdHMiOnt9LCJpbnRlcmVzdHNJbWFnZXNMaXN0cyI6W10sImludGVyZXN0c0ltYWdlc0xpc3RzRmlsZVVybCI6bnVsbCwidGltZVpvbmVHcm91cHMiOnt9LCJsYW5ndWFnZXMiOnt9LCJicm93c2VycyI6eyIwIjp7Im5hbWUiOiJDSFJPTUUifSwiMSI6eyJuYW1lIjoiRVhQTE9SRVIifSwiMiI6eyJuYW1lIjoiRklSRUZPWCJ9LCIzIjp7Im5hbWUiOiJTQUZBUkkifSwiNCI6eyJuYW1lIjoiT1BFUkEifX0sIm9zcyI6eyIxIjp7Im5hbWUiOiJNQUMifSwiNSI6eyJuYW1lIjoiV0lORE9XUyBQSE9ORSJ9LCIzIjp7Im5hbWUiOiJMSU5VWCJ9LCIyIjp7Im5hbWUiOiJJT1MifSwiNCI6eyJuYW1lIjoiQU5EUk9JRCJ9LCIwIjp7Im5hbWUiOiJXSU5ET1dTIn19LCJhbGlhc1NpdGVzIjpbXSwibm9SZWZlcnJlclBhZ2VzIjpbXSwicmVmZXJyZXJzIjp7IjAiOnsibmFtZSI6Ikdvb2dsZSBBZFdvcmRzIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvYWNsayhbXFw/JiNdLip8KSQifSx7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlVSTF9SRUdFWCIsImFuZCI6ZmFsc2UsImFuZFBhcmFtZXRlcnMiOiIiLCJwYXJhbWV0ZXJzIjoiW1xcPyYjXWdjbGlkPSJ9XX0sIjIiOnsibmFtZSI6IkJpbmcgT3JnYW5pYyBTZWFyY2giLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3siYW5kTWV0aG9kIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJhbmQiOmZhbHNlLCJhbmRQYXJhbWV0ZXJzIjoiIiwicGFyYW1ldGVycyI6Il4uK1xcLmJpbmdcXC5bXi9cXC5dKy8uKltcXD8mI11xPS4qKFtcXD8mI10uKnwpJCJ9XX0sIjMiOnsibmFtZSI6IllhaG9vIE9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC55YWhvb1xcLlteL1xcLl0rLy4qW1xcPyYjXXA9LiooW1xcPyYjXS4qfCkkIn1dfSwiMSI6eyJuYW1lIjoiR29vZ2xlIE9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvKD8hYWNsa3xpbWdyZXMpLipbXFw/JiNdcT0uKihbXFw/JiNdLip8KSQifSx7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvPyQifV19LCI0Ijp7Im5hbWUiOiJCYWlkdSBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJhbmRNZXRob2QiOiIiLCJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsImFuZCI6ZmFsc2UsImFuZFBhcmFtZXRlcnMiOiIiLCJwYXJhbWV0ZXJzIjoiXi4rXFwuYmFpZHVcXC5bXi9cXC5dKy8uKltcXD8mI113ZD0uKihbXFw/JiNdLip8KSQifV19fSwia2V5UGFnZXMiOnt9LCJrZXlXb3JkcyI6e30sImN1c3RvbURhdGEiOnt9fQ==";
!function(e,i){this[e]=i()}("bowser",function(){var O=!0;function t(s){function e(e){var i=s.match(e);return i&&i.length>1&&i[1]||""}function i(e){var i=s.match(e);return i&&i.length>1&&i[2]||""}var o=e(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(s),n=!r&&/android/i.test(s),t=/nexus\s*[0-6]\s*/i.test(s),a=!t&&/nexus\s*[0-9]+/i.test(s),d=/CrOS/.test(s),l=/silk/i.test(s),f=/sailfish/i.test(s),m=/tizen/i.test(s),v=/(web|hpw)os/i.test(s),p=/windows phone/i.test(s),c=/SamsungBrowser/i.test(s),b=!p&&/windows/i.test(s),h=!o&&!l&&/macintosh/i.test(s),u=!n&&!f&&!m&&!v&&/linux/i.test(s),w=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),k=e(/version\/(\d+(\.\d+)?)/i),g=/tablet/i.test(s)&&!/tablet pc/i.test(s),y=!g&&/[^-]mobi/i.test(s),x=/xbox/i.test(s),S;if(/opera/i.test(s))S={name:"Opera",opera:O,version:k||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)};else if(/opr\/|opios/i.test(s))S={name:"Opera",opera:O,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||k};else if(/SamsungBrowser/i.test(s))S={name:"Samsung Internet for Android",samsungBrowser:O,version:k||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/coast/i.test(s))S={name:"Opera Coast",coast:O,version:k||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)};else if(/yabrowser/i.test(s))S={name:"Yandex Browser",yandexbrowser:O,version:k||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/ucbrowser/i.test(s))S={name:"UC Browser",ucbrowser:O,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)};else if(/mxios/i.test(s))S={name:"Maxthon",maxthon:O,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)};else if(/epiphany/i.test(s))S={name:"Epiphany",epiphany:O,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)};else if(/puffin/i.test(s))S={name:"Puffin",puffin:O,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)};else if(/sleipnir/i.test(s))S={name:"Sleipnir",sleipnir:O,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)};else if(/k-meleon/i.test(s))S={name:"K-Meleon",kMeleon:O,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)};else if(p){S={name:"Windows Phone",osname:"Windows Phone",windowsphone:O};if(w){S.msedge=O;S.version=w}else{S.msie=O;S.version=e(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(s))S={name:"Internet Explorer",msie:O,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(d)S={name:"Chrome",osname:"Chrome OS",chromeos:O,chromeBook:O,chrome:O,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/edg([ea]|ios)/i.test(s))S={name:"Microsoft Edge",msedge:O,version:w};else if(/vivaldi/i.test(s))S={name:"Vivaldi",vivaldi:O,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||k};else if(f)S={name:"Sailfish",osname:"Sailfish OS",sailfish:O,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(s))S={name:"SeaMonkey",seamonkey:O,version:e(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel|fxios/i.test(s)){S={name:"Firefox",firefox:O,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(s)){S.firefoxos=O;S.osname="Firefox OS"}}else if(l)S={name:"Amazon Silk",silk:O,version:e(/silk\/(\d+(\.\d+)?)/i)};else if(/phantom/i.test(s))S={name:"PhantomJS",phantom:O,version:e(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/slimerjs/i.test(s))S={name:"SlimerJS",slimer:O,version:e(/slimerjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(s)||/rim\stablet/i.test(s))S={name:"BlackBerry",osname:"BlackBerry OS",blackberry:O,version:k||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(v){S={name:"WebOS",osname:"WebOS",webos:O,version:k||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(s)&&(S.touchpad=O)}else if(/bada/i.test(s))S={name:"Bada",bada:O,version:e(/dolfin\/(\d+(\.\d+)?)/i)};else if(m)S={name:"Tizen",osname:"Tizen",tizen:O,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||k};else if(/qupzilla/i.test(s))S={name:"QupZilla",qupzilla:O,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||k};else if(/chromium/i.test(s))S={name:"Chromium",chromium:O,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||k};else if(/chrome|crios|crmo/i.test(s))S={name:"Chrome",chrome:O,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(n)S={name:"Android",version:k};else if(/safari|applewebkit/i.test(s)){S={name:"Safari",safari:O};if(k)S.version=k}else if(o){S={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"};if(k)S.version=k}else if(/googlebot/i.test(s))S={name:"Googlebot",googlebot:O,version:e(/googlebot\/(\d+(\.\d+))/i)||k};else S={name:e(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)};if(!S.msedge&&/(apple)?webkit/i.test(s)){if(/(apple)?webkit\/537\.36/i.test(s)){S.name=S.name||"Blink";S.blink=O;S.webkit=O}else{S.name=S.name||"Webkit";S.webkit=O}if(!S.version&&k)S.version=k}else if(!S.opera&&/gecko\//i.test(s)){S.name=S.name||"Gecko";S.gecko=O;S.version=S.version||e(/gecko\/(\d+(\.\d+)?)/i)}else if(S.msedge&&/(apple)?webkit/i.test(s))if(/(apple)?webkit\/537\.36/i.test(s))S.webkit=O;if(!S.windowsphone&&!S.msedge&&(n||S.silk))S.android=O;else if(!S.windowsphone&&!S.msedge&&o){S[o]=O;S.ios=O}else if(h)S.mac=O;else if(x)S.xbox=O;else if(b)S.windows=O;else if(u)S.linux=O;var B="";if(S.windowsphone)B=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);else if(o){B=e(/os (\d+([_\s]\d+)*) like mac os x/i);B=B.replace(/[_\s]/g,".")}else if(n)B=e(/android[ \/-](\d+(\.\d+)*)/i);else if(S.webos)B=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);else if(S.blackberry)B=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i);else if(S.bada)B=e(/bada\/(\d+(\.\d+)*)/i);else if(S.tizen)B=e(/tizen[\/\s](\d+(\.\d+)*)/i);if(B)S.osversion=B;var z=B.split(".")[0];if(g||a||"ipad"==o||n&&(3==z||z>=4&&!y)||S.silk)S.tablet=O;else if(y||"iphone"==o||"ipod"==o||n||t||S.blackberry||S.webos||S.bada)S.mobile=O;if(S.msedge||S.msie&&S.version>=10||S.yandexbrowser&&S.version>=15||S.vivaldi&&S.version>=1||S.chrome&&S.version>=20||S.samsungBrowser&&S.version>=4||S.firefox&&S.version>=20||S.safari&&S.version>=6||S.opera&&S.version>=10||S.ios&&S.osversion&&S.osversion.split(".")[0]>=6||S.blackberry&&S.version>=10.1||S.chromium&&S.version>=20)S.a=O;else if(S.msie&&S.version<10||S.chrome&&S.version<20||S.firefox&&S.version<20||S.safari&&S.version<6||S.opera&&S.version<10||S.ios&&S.osversion&&S.osversion.split(".")[0]<6||S.chromium&&S.version<20)S.c=O;else S.x=O;return S}var a=t("undefined"!==typeof navigator?navigator.userAgent||"":"");a.test=function(e){for(var i=0;i<e.length;++i){var s=e[i];if("string"===typeof s)if(s in a)return!0}return!1};function o(e){return e.split(".").length}function r(e,i){var s=[],o;if(Array.prototype.map)return Array.prototype.map.call(e,i);for(o=0;o<e.length;o++)s.push(i(e[o]));return s}function d(e){var s=Math.max(o(e[0]),o(e[1]));var i=r(e,function(e){var i=s-o(e);e+=new Array(i+1).join(".0");return r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});while(--s>=0)if(i[0][s]>i[1][s])return 1;else if(i[0][s]===i[1][s]){if(0===s)return 0}else return-1}function n(e,i,s){var o=a;if("string"===typeof i){s=i;i=void 0}if(void 0===i)i=!1;if(s)o=t(s);var r=""+o.version;for(var n in e)if(e.hasOwnProperty(n))if(o[n])return d([r,e[n]])<0;return i}function e(e,i,s){return!n(e,i,s)}a.isUnsupportedBrowser=n;a.compareVersions=d;a.check=e;a._detect=t;return a});this.Element&&function(e){e.matches=e.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){var t=this,o=(t.parentNode||t.document).querySelectorAll(e),c=-1;while(o[++c]&&o[c]!=t);return!!o[c]}}(Element.prototype);this.Element&&function(e){e.closest=e.closest||function(e){var t=this;while(t&&t.matches&&!t.matches(e))t=t.parentNode;return t&&t.matches?t:null}}(Element.prototype);if (window.kameleoonLightIframe){if (window.kameleoonExternalIFrameLoadedData) { eval(window.kameleoonExternalIFrameLoadedData); Kameleoon.Analyst.load();}}else{Kameleoon.Analyst.load();}}